{"title":"【UNR #1】火车管理","time_limit":4000,"memory_limit":1024,"url":"http://uoj.ac/problem/218","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n<p>uoj 旗下有一个火车站，用来管理属于 uoj 的小火车。</p>\n<p>火车站一共有 $n$ 条编号为 $1, \\dots, n$ 的，只有一端的用来存放小火车的铁路，由于小火车特殊的构造，每条铁路可以停放无数辆小火车。每条铁路是相互独立的。</p>\n<p>铁路是一个栈结构，后停放的小火车可以先出来。</p>\n<p>每辆小火车有一个吨位 $t$。</p>\n<p>由于 NOI2016 即将到来，想要跟小火车正面作战的人多了起来，火车站管理员九条可怜每天需要处理很多事件。</p>\n<p>事件可以概括成一下三种：</p>\n<ul><li><code>1 l r</code> 有人想跟铁路编号在 $[l,r]$ 的每条铁路的<strong>第一辆可以开出来的小火车</strong>正面战斗，你需要统计这些小火车的吨位之和，没有火车的铁路不计入答案。</li>\n<li><code>2 l</code> 编号为 $l$ 的铁路开走一辆火车，如果这条铁路没有小火车则不开出。</li>\n<li><code>3 l r x</code> 铁路编号在 $[l,r]$ 的每条铁路都新停放一辆吨位为 $x$ 的火车。</li>\n</ul><p>现在管理员九条可怜要去南海前线了，你需要替他管理火车站。</p>\n<p>由于火车站很忙，所以你需要实时反馈信息，我们会用一些手段要求你强制在线，具体请看输入格式。</p>\n"},{"title":"# 输入格式","format":"html","require":["katex"],"content":"\n\n<p>输入第一行三个非负整数 $n,m,\\mathrm{ty}$ 表示铁路的数量和操作次数还有是否强制在线。</p>\n<p>接下来 $m$ 行，每行四个数或者三个数或者两个数表示一次操作。</p>\n<p>为了实时反馈信息，你需要解密 $l,r$，设读入的是 $l_1,r_1$，则实际的值如下：</p>\n<p>\\begin{eqnarray}\nl_2 &amp; = &amp; (l_1+\\mathrm{lastans} \\cdot \\mathrm{ty}) \\bmod n + 1 \\\\\nr_2 &amp; = &amp; (r_1+\\mathrm{lastans} \\cdot \\mathrm{ty}) \\bmod n + 1 \\\\\nl   &amp; = &amp; \\min(l_2,r_2) \\\\\nr   &amp; = &amp; \\max(l_2,r_2)\n\\end{eqnarray}</p>\n<p>$\\mathrm{lastans}$ 表示上一次询问的答案，如果之前没有询问则为 $0$。</p>\n<p>当你进行的是第二类操作时，只需要令 $l=(l_1+\\mathrm{lastans} \\cdot \\mathrm{ty}) \\bmod n+1$ 即可。</p>\n<p>输入数据保证 $1\\leq l_1,r_1\\leq n$。</p>\n<p><strong>注意，我们并没有加密吨位和操作类型</strong></p>\n"},{"title":"# 输出格式","format":"html","require":["katex"],"content":"\n\n<p>对于每个询问输出一行，一个非负整数表示答案。</p>\n"},{"title":"# 样例一","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre>10 10 0\n3 1 5 3\n1 1 6\n3 1 7 1\n1 1 9\n1 1 6\n3 1 5 2\n1 3 6\n1 3 9\n3 1 7 6\n2 1\n\n\n</pre>\n\n<h4>output</h4>\n<pre>15\n7\n6\n7\n8\n\n</pre>\n\n"},{"title":"# 样例二","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre>10 10 1\n1 1 8\n2 1\n1 1 6\n3 3 7 5\n2 9\n1 5 9\n1 2 7\n2 9\n3 1 6 2\n2 9\n\n\n</pre>\n\n<h4>output</h4>\n<pre>0\n0\n15\n25\n\n\n</pre>\n\n"},{"title":"# 样例三","format":"html","require":["katex"],"content":"\n\n<p>见样例数据下载，限制与约定跟第 $6$ 个测试点相同。</p>\n"},{"title":"# 样例四","format":"html","require":["katex"],"content":"\n\n<p>见样例数据下载，限制与约定跟第 $10$ 个测试点相同。</p>\n"},{"title":"# 限制与约定","format":"html","require":["katex"],"content":"\n\n<div class=\"table-responsive\">\n    <table class=\"table table-bordered table-text-center table-vertical-middle\"><thead><tr><th>测试点编号</th><th>$n,m$</th><th>$\\mathrm{ty}$</th></tr></thead><tbody><tr><td>1</td><td rowspan=\"3\">$\\leq 10^3$</td><td rowspan=\"3\">$=1$</td></tr><tr><td>2</td></tr><tr><td>3</td></tr><tr><td>4</td><td>$\\leq 10^5$</td><td rowspan=\"3\">$=0$</td></tr><tr><td>5</td><td>$\\leq 2 \\times 10^5$</td></tr><tr><td>6</td><td>$\\leq 5 \\times 10^5$</td></tr><tr><td>7</td><td>$\\leq 10^5$</td><td rowspan=\"4\">$=1$</td></tr><tr><td>8</td><td>$\\leq 2 \\times 10^5$</td></tr><tr><td>9</td><td>$\\leq 3 \\times 10^5$</td></tr><tr><td>10</td><td>$\\leq 5 \\times 10^5$</td></tr></tbody></table></div>\n\n<p>对于所有数据，$1 \\leq t \\leq 10^3$。</p>\n<p><strong>时间限制：</strong>$4\\texttt{s}$</p>\n<p><strong>空间限制：</strong>$1024\\texttt{MB}$</p>\n"},{"title":"# 下载","format":"html","require":["katex"],"content":"\n\n<p><a href=\"/download.php?type=problem&amp;id=218\">样例数据下载</a></p>\n\n"}]}