{"title":"【UNR #4】同构判定鸭","time_limit":1000,"memory_limit":512,"url":"http://uoj.ac/problem/552","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n<p>出题人 01 买了一只同构判定鸭。一买回来，这只鸭就嘎嘎地叫着：“我是<a href=\"//uoj.ac/problem/286\">同构判定鸡</a>的同类，可以判定两张图是否一样！”</p>\n<p>具体来说，同构判定鸭的工作逻辑如下:</p>\n<ul><li>给定同构判定鸭两张有向图 $G_1,G_2$，每条边上都写有小写字母。</li>\n<li>对于图上的一条路径和一个非空字符串 $S$，我们称这条路径和 $S$ <strong>匹配</strong>当且仅当按照顺序写下路径上所有边的字母所得到的字符串恰好等于 $S$。</li>\n<li>定义一个非空字符串 $S$ 在图 $G$ 上的<strong>出现次数</strong>为 $G$ 中与 $S$ 匹配的不同路径条数。</li>\n<li>定义一个非空字符串 $S$ 是<strong>好串</strong>，当且仅当其在 $G_1$ 中出现次数和 $G_2$ 中出现次数相等。否则我们称之为坏串。</li>\n<li>同构判定鸭判定两张图 $G_1$,$G_2$ <strong>等价</strong>当且仅当所有非空小写字符串 $S$ 都是好串。</li>\n</ul><p>但是作为一名有经验的出题人，出题人 01 并不能轻易相信同构判定鸭的结果。</p>\n<p>因此他找到你，让你帮他判断两张图是否等价。若不相同，你需要给出长度最短的坏串。若有多个长度最短的坏串，你需要给出其中字典序最小的。</p>\n<p>注意本题并不讨论空串的情况。<strong>空串不是好串也不是坏串。</strong></p>\n"},{"title":"输入格式","format":"html","require":["katex"],"content":"\n\n<p>输入的两部分分别描述 $G_1,G_2$，对于一张图：</p>\n<p>第一行两个正整数 $n,m$，表示图的点数和边数。</p>\n<p>接下来 $m$ 行，每行两个正整数 $x_i,y_i$ 和一个小写字母 $c_i$，表示一条从 $x_i$ 出发，到 $y_i$ 结束的有向边，边上的字母为 $c_i$。</p>\n<p>两张图之间没有额外的空行做分隔。</p>\n"},{"title":"输出格式","format":"html","require":["katex"],"content":"\n\n<p>若两张图等价，则输出 &#34;<samp>Same</samp>&#34;。</p>\n<p>否则按照题目要求输出最短的坏串中字典序最小的。</p>\n<p>注意，如果答案是&#34;<samp>Same</samp>&#34;而你输出了&#34;<samp>same</samp>&#34;，你的输出将会被判定为错误。</p>\n"},{"title":"样例一","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre>3 3\n1 2 a\n2 3 b\n3 1 c\n3 3\n1 2 b\n2 3 c\n3 1 a\n\n</pre>\n\n<h4>output</h4>\n<pre>Same\n\n</pre>\n\n<h4>explanation</h4>\n<p>将 $G_2$ 中的点按照 $1 \\rightarrow 2,2 \\rightarrow 3,3 \\rightarrow 1$ 重标号后，不难发现其与 $G_1$ 完全相同，自然每个非空小写字符串 $S$ 在两图中的出现次数都相等了。</p>\n"},{"title":"样例二","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre>6 6\n1 3 a\n1 4 a\n2 4 b\n3 5 a\n3 6 b\n4 6 b\n6 6\n1 3 a\n1 4 a\n2 4 b\n3 5 a\n4 5 b\n4 6 b\n\n</pre>\n\n<h4>output</h4>\n<pre>bb\n\n</pre>\n\n"},{"title":"样例三","format":"html","require":["katex"],"content":"\n\n<p>见样例数据下载。</p>\n<p>该样例范围同测试包 2。</p>\n"},{"title":"样例四","format":"html","require":["katex"],"content":"\n\n<p>见样例数据下载。</p>\n<p>该样例范围同测试包 2。</p>\n"},{"title":"数据范围","format":"html","require":["katex"],"content":"\n\n<div class=\"table-responsive\">\n    <table class=\"table table-bordered table-text-center table-vertical-middle\"><thead><tr><th>测试包编号</th><th>$n$</th><th>$m$</th><th>特殊性质</th><th>分值</th></tr></thead><tbody><tr><td>$1$</td><td>$\\le 6$</td><td>$\\le 10$</td><td rowspan=\"2\">无</td><td>$15$</td></tr><tr><td>$2$</td><td>$\\le 30$</td><td>$\\le 100$</td><td>$20$</td></tr><tr><td>$3$</td><td rowspan=\"2\">$\\le 100$</td><td rowspan=\"2\">$\\le 400$</td><td>保证图是一张有向无环图</td><td>$20$</td></tr><tr><td>$4$</td><td>无</td><td>$15$</td></tr><tr><td>$5$</td><td rowspan=\"2\">$\\le 500$</td><td rowspan=\"2\">$\\le 3000$</td><td>保证图是一张有向无环图</td><td>$15$</td></tr><tr><td>$6$</td><td>无</td><td>$15$</td></tr></tbody></table></div>\n\n<p>对于所有测试数据，满足 $1 \\le n \\le 500,0 \\le m \\le 3000$。</p>\n<p>保证图中不存在自环，但是可能会存在重边。</p>\n<p><strong>时间限制</strong>：$1\\texttt{s}$</p>\n<p><strong>空间限制</strong>：$512\\texttt{MB}$</p>\n"},{"title":"下载","format":"html","require":["katex"],"content":"\n\n<p><a href=\"/download.php?type=problem&amp;id=552\">样例数据下载</a></p>\n\n"}]}