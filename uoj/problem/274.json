{"title":"【清华集训2016】温暖会指引我们前行","time_limit":2000,"memory_limit":512,"url":"http://uoj.ac/problem/274","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n<p>寒冬又一次肆虐了北国大地</p>\n<p>无情的北风穿透了人们御寒的衣物</p>\n<p>可怜虫们在冬夜中发出无助的哀嚎</p>\n<p>“冻死宝宝了！”</p>\n<p>这时</p>\n<p>远处的天边出现了一位火焰之神</p>\n<p>“我将赐予你们温暖和希望！”</p>\n<p>只见他的身体中喷射出火焰之力</p>\n<p>通过坚固的钢铁，传遍了千家万户</p>\n<p>这时，只听见人们欢呼</p>\n<p>“暖气来啦！”</p>\n"},{"title":"任务描述","format":"html","require":["katex"],"content":"\n\n<p>虽然小R住的宿舍楼早已来了暖气，但是由于某些原因，宿舍楼中的某些窗户仍然开着（例如厕所的窗户），这就使得宿舍楼中有一些路上的温度还是很低。</p>\n<p>小R的宿舍楼中有$n$个地点和一些路，一条路连接了两个地点，小R可以通过这条路从其中任意一个地点到达另外一个地点。但在刚开始，小R还不熟悉宿舍楼中的任何一条路，所以他会慢慢地发现这些路，他在发现一条路时还会知道这条路的温度和长度。每条路的温度都是互不相同的。</p>\n<p>小R需要在宿舍楼中活动，每次他都需要从一个地点到达另一个地点。小R希望每次活动时经过一条最温暖的路径，最温暖的路径的定义为，将路径上各条路的温度从小到大排序后字典序最大。即温度最低的路温度尽量高，在满足该条件的情况下，温度第二低的路温度尽量高，以此类推。小R不会经过重复的路。由于每条路的温度互不相同，因此只存在一条最温暖的路径。</p>\n<p>对于小R的每次活动，你需要求出小R需要走过的路径总长度。如果小R通过当前发现的路不能完成这次活动，则输出 $-1$。</p>\n<p><strong>注意本题中的字典序与传统意义上的字典序定义有所不同，对于两个序列$a,b(a \\neq b)$，若$a$是$b$的前缀则$a$的字典序较大，同时可以推出空串的字典序最大。</strong></p>\n"},{"title":"输入格式","format":"html","require":["katex"],"content":"\n\n<p>第一行两个正整数 $n,m$。表示小R的宿舍楼中有 $n$ 个地点，共发生了 $m$ 个事件。</p>\n<p>接下来 $m$ 行，每行描述一个事件，事件分为三类。</p>\n<ol><li><p>$\\texttt{find id u v t l}$ 表示小R发现了一条连接$u$和$v$之间的路，编号为$id$。相同$id$的边只会出现一次。</p>\n</li>\n<li><p>$\\texttt{move u v}$ 表示小R要从$u$到达$v$，你需要计算出最温暖的路径的长度 ，若不能从$u$到达$v$，则输出$-1$。</p>\n</li>\n<li><p>$\\texttt{change id l}$ 表示从$u$到$v$这条边的长度变为了$l$（保证在当前时间点这条边存在）。 </p>\n</li>\n</ol>"},{"title":"输出格式","format":"html","require":["katex"],"content":"\n\n<p>对于每个询问，输出一行整数，表示最温暖的路径长度。</p>\n"},{"title":"样例一","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre>8 19\nfind 0 0 2 7 2\nfind 1 2 4 4 4\nfind 2 4 6 10 1\nfind 3 6 7 8 6\nmove 2 7\nmove 1 6\nfind 4 2 5 3 4\nmove 0 5\nchange 0 12\nfind 5 4 5 5 10\nfind 6 2 3 6 9\nmove 3 5\nfind 7 0 1 12 1\nmove 1 6\nfind 8 1 7 11 100\nmove 1 6\nmove 3 7\nmove 5 6\nmove 2 2\n\n</pre>\n\n<h4>output</h4>\n<pre>11\n-1\n6\n23\n18\n106\n122\n11\n0\n\n</pre>\n\n"},{"title":"样例二","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre>15 45\nfind 0 1 0 8 5987\nfind 1 2 0 14 5455\nfind 2 3 0 27 8830\nfind 3 4 3 42 7688\nfind 4 5 0 25 1756\nfind 5 6 5 35 1550\nfind 6 7 4 43 9440\nmove 3 9\nchange 2 9113\nmove 10 13\nmove 3 3\nmove 11 10\nfind 7 8 7 6 7347\nfind 8 9 8 26 8935\nmove 8 4\nchange 3 4466\nfind 9 10 9 28 8560\nmove 6 5\nfind 10 11 10 31 6205\nchange 9 9228\nfind 11 12 10 23 948\nfind 12 13 12 45 5945\nmove 0 9\nmove 2 5\nchange 2 6118\nfind 13 14 13 12 6906\nmove 4 1\nchange 2 504\nfind 14 4 2 22 9796\nmove 10 7\nmove 1 14\nmove 13 3\nfind 15 12 9 39 8985\nfind 16 9 8 17 3710\nchange 1 5370\nfind 17 1 0 36 4669\nfind 18 7 6 37 8087\nmove 9 0\nfind 19 14 9 33 8234\nfind 20 0 4 24 5209\nchange 1 4883\nfind 21 6 3 9 2461\nfind 22 5 2 19 4291\nchange 1 7219\nchange 6 4846\n\n</pre>\n\n<h4>output</h4>\n<pre>-1\n-1\n0\n-1\n16787\n1550\n39301\n7211\n16571\n25510\n59706\n46309\n30692\n\n</pre>\n\n"},{"title":"样例三","format":"html","require":["katex"],"content":"\n\n<p>见样例数据下载</p>\n"},{"title":"限制与约定","format":"html","require":["katex"],"content":"\n\n<p>对于find操作：$(0\\le id\\lt m, 0\\le u,v \\lt n, u\\ne v,0\\le t\\le 1000000000, 0 \\le l \\le 10000)$；</p>\n<p>对于move操作：$(0\\le u,v \\lt n)$；</p>\n<p>对于change操作：$(0 \\le l \\le 10000)$。</p>\n<p>对于100%的数据，$1\\le n\\le 100000, 1\\le m \\le 300000$ 。</p>\n<p>本题共有20个数据点，每个数据点5分。</p>\n<div class=\"table-responsive\">\n<table class=\"table table-bordered table-text-center table-vertical-middle\"><thead><tr><th rowspan=\"1\">测试点</th><th rowspan=\"1\">$n$</th><th rowspan=\"1\">$m$</th><th rowspan=\"1\">$其它$</th></tr></thead><tbody><tr><td rowspan=\"1\">$1-2$</td><td rowspan=\"1\">$\\leq20$</td><td rowspan=\"1\">$\\leq50$</td><td rowspan=\"2\">无特殊约定</td></tr><tr><td rowspan=\"1\">$3-5$</td><td rowspan=\"1\">$\\leq1000$</td><td rowspan=\"1\">$\\leq3000$</td></tr><tr><td rowspan=\"1\">$6-10$</td><td rowspan=\"3\">$\\leq100000$</td><td rowspan=\"3\">$\\leq300000$</td><td rowspan=\"1\">所有的find事件都在move事件之前，且没有change事件</td></tr><tr><td rowspan=\"1\">$11-14$</td><td rowspan=\"1\">所有的find事件都在move事件之前</td></tr><tr><td rowspan=\"1\">$15-20$</td><td rowspan=\"1\">无特殊约定</td></tr></tbody></table></div>\n\n\n<p><strong>时间限制</strong>：$2\\texttt{s}$</p>\n<p><strong>空间限制</strong>：$512\\texttt{MB}$</p>\n"},{"title":"下载","format":"html","require":["katex"],"content":"\n\n<p><a href=\"/download.php?type=problem&amp;id=274\">样例数据下载</a></p>\n\n"}]}