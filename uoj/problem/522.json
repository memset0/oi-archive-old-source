{"title":"【美团杯2020】版本答案","time_limit":2000,"memory_limit":512,"url":"http://uoj.ac/problem/522","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n<p>酒馆战棋也是蒜斜非常喜欢的游戏。他常常一边玩游戏一边思考着哲♂学问题。众所周知，当前的酒馆战棋的版本答案是多个圣盾剧毒的峰哥。作为一名善于发问的新世纪大学生，蒜斜想要明白当双方都拥有版本答案的时候，游戏会变成什么样呢？究竟是谁杀了峰哥，而峰哥又杀了谁呢？</p>\n<p>现在，假设在酒馆战棋的一轮战斗中，战斗的一方有 $n$ 个随从，另一方有 $m$ 个随从，所有的随从都是圣盾剧毒的峰哥，问期望多少次进攻后战斗结束。</p>\n"},{"title":"题目补充","format":"html","require":["katex"],"content":"\n\n<p>在这儿，我们补充介绍一下峰哥的属性以及酒馆战棋的战斗流程。峰哥的卡牌如下图所示，在本题中，血量、攻击力、费用都没有意义，你只需要留意峰哥的特殊属性。</p>\n<p><img class=\"img-responsive center-block\" src=\"//img.uoj.ac/problem/522/yuren.jpg\" alt=\"fgnb\"/></p>\n<p>酒馆战棋的战斗流程为：</p>\n<ol><li>战斗开始前，双方的随从按照从左到右的顺序被标上了序号。如果有 $k \\in \\{n,m\\}$ 个随从，那么第一个随从的编号为 $1$，最后一个随从的编号为 $k$。其中编号为 $i+1$ 的随从在 $i$ 之后，编号为 $1$ 的随从在 $k$ 之后。</li>\n<li>双方轮流行动，随从多的一方先手，如果双方随从数相同，则等概率随机一方开始攻击。</li>\n<li>当前攻击的一方的一个随从进行攻击。如果当前回合是这一方的第一个攻击回合，则编号为 $1$ 的随从攻击，否则假设上一次这一方攻击的随从编号是 $x$，这一次由 $x$ 后面第一个还活着的随从攻击。<strong>注意，当只有一个随从存活的时候，可能出现 $x$ 再次攻击的情况。</strong></li>\n<li>攻击的随从等概率随机挑选一个还存活的敌方随从攻击。攻击结果：无论是攻击的随从还是被攻击的随从，如果身上有圣盾，则圣盾失去；如果没有圣盾，则随从死亡。</li>\n<li>峰哥的效果触发：对于每一个当前没有圣盾的峰哥，如果有一个和它同一方的其他随从（不包括自己）在刚才的攻击中失去了圣盾，则它获得圣盾。</li>\n<li>如果存在一方没有任何随从存活，游戏结束。否则进入对方回合，回到步骤 $3$。</li>\n</ol><p>如果你对战斗流程依然不了解，你可以看<a href=\"https://www.bilibili.com/video/BV1ME411W71f/?spm_id_from=333.788.videocard.1\">这个视频</a>。 该视频从 0:55 开始就对应本题 $n=m=6$ 的情况。</p>\n"},{"title":"输入格式","format":"html","require":["katex"],"content":"\n\n<p>输入三个整数 $n,m, p (1 \\leq n,m \\leq 2000, n+m &lt; p \\leq 10^9+7$ 且 $p$ 为质数 $)$</p>\n"},{"title":"输出格式","format":"html","require":["katex"],"content":"\n\n<p>输出一行一个整数，表示期望轮数对 $p$ 取模后的结果。即，如果期望轮数的最简分数表示为 $\\frac{a}{b}$，你需要输出一个整数 $c$ 满足 $c \\times b = a \\text{ mod } p$。</p>\n"},{"title":"样例一","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre>1 1 3\n\n</pre>\n\n<h4>output</h4>\n<pre>2\n\n</pre>\n\n"},{"title":"样例二","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre>1 2 5\n\n</pre>\n\n<h4>output</h4>\n<pre>2\n\n</pre>\n\n\n"},{"title":"限制与约定","format":"html","require":["katex"],"content":"\n\n<p><strong>Small Task</strong>: $n+m\\leq 5$。</p>\n<p><strong>Large Task</strong>: $n,m \\leq 2000$。</p>\n<p><strong>时间限制：</strong>$2\\texttt{s}$</p>\n<p><strong>空间限制：</strong>$512\\texttt{MB}$</p>\n"},{"title":"下载","format":"html","require":["katex"],"content":"\n\n<p><a href=\"/download.php?type=problem&amp;id=522\">样例数据下载</a></p>\n\n"}]}