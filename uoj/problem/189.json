{"title":"【集训队互测2016】火车司机出秦川","time_limit":5000,"memory_limit":512,"url":"http://uoj.ac/problem/189","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n<p>火车司机出秦川，跳蚤国王下江南。每天，勤劳的火车司机们都会开着自己心爱的火车去传播福音。</p>\n<p>和跳蚤国类似，火车国也有 $n$ 个城市编号为 $1$ 到 $n$，城市之间有一些铁路相连。这些铁路构成了一个仙人掌。如果一个无向连通图的任意一条边最多属于一个简单环，我们就称之为仙人掌。所谓简单环即不经过重复的结点的环。</p>\n<p><img class=\"img-responsive center-block\" src=\"//img.uoj.ac/utility/what-is-cactus.png\" alt=\"什么是仙人掌\"/></p>\n<p>第 $i$ 天会有 $k_i$ 名火车司机出秦川，第 $j$ 名司机会从城市 $s_j$ 到 $t_j$。有一些司机是老司机，他们会沿着选择经过城市最多的路径走，显示自己高超的驾驶技术。而另一些是新司机，他们会走经过城市最少的路径。但不管是新司机还是老司机，都不会走过同一个城市两次（也就是选择的路径都是简单路径）。</p>\n<p>每一条铁路周围都有一些人居住，如果第 $i$ 天这条铁路被火车司机经过，这些人会收到福音。我们想知道每天有多少人收到福音。</p>\n<p>当然人口是会变化的，第 $i$ 天结束以后第 $w_i$ 铁路的人口会改变为 $x_i$。</p>\n"},{"title":"# 输入格式","format":"html","require":["katex"],"content":"\n\n<p>第一行三个整数 $n,m$ 和 $q$，表示有 $n$ 个城市，有 $m$ 条铁路以及有 $q$ 天。</p>\n<p>接下来 $m$ 行每行三个整数 $u,v,w$，表示一条连接 $u$ 和 $v$ 的铁路，铁路周围有 $w$ 个人。保证是仙人掌，没有自环，每个环的长度都是奇数。铁路编号从 $1$ 开始。</p>\n<p>接下来 $2q$ 行，每两行表示一天。</p>\n<p>第一行一个整数 $k_i$ 表示有 $k_i$ 名司机（ $k_i$ 可能为 $0$ ，这时候请忽略这个询问并输出 $0$ ），然后是 $3k_i$ 个整数 $s_j,t_j,type_j$，分别表示每个司机的起点和终点和类型，如果 $type_j$ 是 $0$ 表示是新司机，为 $1$ 是老司机。每个司机的起点和终点均不同。</p>\n<p>第二行两个整数 $w_i$ 和 $x_i$，表示第 $w_i$ 条铁路的人口会改变为 $x_i$ ，如果 $w_i$ 为 $0$ 则表示没有修改。</p>\n"},{"title":"# 输出格式","format":"html","require":["katex"],"content":"\n\n<p>$q$ 行，每行一个整数表示这一天收到福音的人数。</p>\n"},{"title":"# 样例一","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre>11 13 3\n1 2 1\n2 3 2\n1 3 4\n2 8 8\n2 9 16\n9 10 32\n10 11 64\n11 9 128\n3 4 256\n3 5 512\n4 7 1024\n7 6 2048\n5 6 4096\n1 10 7 1\n3 8192\n3 8 1 1 2 7 1 10 4 0\n7 16384\n3 8 1 0 2 7 0 10 4 1\n0 16384\n\n</pre>\n\n<h4>output</h4>\n<pre>6869\n15163\n32667\n\n</pre>\n\n\n"},{"title":"# 样例二","format":"html","require":["katex"],"content":"\n\n<p>见样例数据下载。</p>\n"},{"title":"# 样例三","format":"html","require":["katex"],"content":"\n\n<p>见样例数据下载。</p>\n"},{"title":"# 限制与约定","format":"html","require":["katex"],"content":"\n\n<p>保证任意时刻边长和都属于int范围内。边长均为正整数。</p>\n<p>$2 \\leq n \\leq 300000$， $n-1 \\leq m \\leq 2n-2,q \\leq 300000$，令 $S = \\sum k_i$， $S&lt;=300000$。</p>\n<p>具体数据范围见下表：</p>\n<div class=\"table-responsive\">\n<table class=\"table table-bordered table-text-center table-vertical-middle\"><thead><tr><th>数据编号</th>\n<th>$n$ 的规模</th>\n<th>$q$ 的规模</th>\n<th>$S$ 的规模</th>\n<th>其他</th>\n</tr></thead><tbody><tr><td>1</td><td>$n = 2$</td><td>$q \\leq 10$</td><td>$S \\leq 10$</td><td rowspan=\"2\">无</td></tr><tr><td>2</td><td>$n = 100$</td><td>$q \\leq 100$</td><td>$S \\leq 100$</td></tr><tr><td>3</td><td rowspan=\"2\">$n = 100000$</td><td rowspan=\"2\">$q \\leq 100000$</td><td rowspan=\"2\">$S \\leq 100000$</td><td>$m=n-1$，没有修改</td></tr><tr><td>4</td><td>$m=n-1$</td></tr><tr><td>5</td><td rowspan=\"2\">$n = 300000$</td><td rowspan=\"2\">$q \\leq 300000$</td><td rowspan=\"2\">$S \\leq 300000$</td><td>$m=n-1$，没有修改</td></tr><tr><td>6</td><td>$m=n-1$</td></tr><tr><td>7</td><td rowspan=\"2\">$n = 100000$</td><td rowspan=\"2\">$q \\leq 100000$</td><td rowspan=\"2\">$S \\leq 100000$</td><td>没有修改</td></tr><tr><td>8</td><td>无</td></tr><tr><td>9</td><td rowspan=\"2\">$n = 300000$</td><td rowspan=\"2\">$q \\leq 300000$</td><td rowspan=\"2\">$S \\leq 300000$</td><td>没有修改</td></tr><tr><td>10</td><td>无</td></tr></tbody></table></div>\n\n<p><strong>时间限制：</strong>$5\\texttt{s}$</p>\n<p><strong>空间限制：</strong>$512\\texttt{MB}$</p>\n"},{"title":"# 下载","format":"html","require":["katex"],"content":"\n\n<p><a href=\"/download.php?type=problem&amp;id=189\">样例数据下载</a></p>\n"},{"title":"# IOI赛制","format":"html","require":["katex"],"content":"\n\n<p>本题在考试时排行榜上显示的成绩即为最终评测结果。</p>\n\n"}]}