{"title":"【UTR #3】去月球","time_limit":2000,"memory_limit":512,"url":"http://uoj.ac/problem/327","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n<p>Scape和Mythological交流了玩几何冲刺的经验之后，Mythological非常高兴，又推荐给Scape一款游戏To the moon。</p>\n<p>游戏中一位老人John的记忆被药物尘封，进行了解除尘封的仪式之后，Scape走入了他的记忆。</p>\n<p>John的记忆中有一个唤做River女孩的身影，有着数不尽的纸兔子，有一个沙包，一只鸭嘴兽玩偶，一座灯塔。Scape被深深的打动了。</p>\n<p>”我的鸭嘴兽和沙包又在哪里呢？” Scape这样想到，不禁幻想出Mythological决定给他送 $n$ 份礼物，其中第 $i$ 份的种类是 $a_i$。这些礼物按顺序排成一行。</p>\n<p>她挑选礼物的方式很特别，她每次会选择两份<strong>种类相同</strong>的礼物，并且这对礼物满足它们之间没有<strong>尚未拿走</strong>的礼物，并将这对礼物拿走。</p>\n<p>现在Scape给出了若干次询问，每次询问如果他送给她的是区间 $\\left [L_i,R_i\\right ]$ 之间的礼物，那么她最多能拿走多少份礼物。</p>\n"},{"title":"# 任务","format":"html","require":["katex"],"content":"\n\n<p>你需要编写两个函数/过程，以完成题目的任务：</p>\n<ul><li>init(n, m, a[], t);<ul><li>在程序最开始运行时会调用一次来完成初始化。</li>\n<li>$n$ 表示 $a$ 的长度是 $n$，$m$ 表示 $a_i$ 的最大可能值，$a$ 数组的下标从 $1$ 开始，$t$ 表示子任务编号。</li>\n</ul></li>\n<li>query(l, r);<ul><li>表示询问区间 $\\left [L ,R\\right ]$ 的答案 。</li>\n<li>保证 $L\\leq R$。</li>\n</ul></li>\n</ul>"},{"title":"# 实现细节","format":"html","require":["katex"],"content":"\n\n<p>本题只支持 C/C++。</p>\n<p>你只能提交一个源文件实现如上所述的 init 和 query 函数/过程，并且遵循下面的命名和接口。你需要包含头文件 mythological.h。</p>\n<pre><code class=\"sh_cpp\">void init(int n, int m, int a[], int t);\nint query(int l, int r);</code></pre>\n<p>如果有不清楚的地方，见样例及测评库下载，<strong>内附了样例程序</strong>。</p>\n<p>评测库大概需要占用$8\\texttt{MB}$的内存和$100\\texttt{ms}$的时间。</p>\n<p>因为评测库使用了fread来进行快速读入，所以用命令行输入数据的选手需要在输入数据完毕后用&#34;<samp>Ctrl+D<samp>&#34;来输入EOF。</samp></samp></p>\n"},{"title":"# 评测方式","format":"html","require":["katex"],"content":"\n\n<p>评测系统将读入如下格式的输入数据：</p>\n<ol><li>第 $1$ 行：四个整数 $n,m,q,t$，分别是这组测试数据的大小，$a_i$ 的最大可能值，询问个数和子任务编号。</li>\n<li>第 $2$ 行：$n$ 个整数，第 $i$ 个整数表示 $a_i$。</li>\n<li>第 $2+i$ 行（$1\\le i\\le q$）：两个整数 $L_i,R_i$，表示询问的区间。</li>\n</ol>"},{"title":"# 样例一","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre>9 10 3 0\n1 1 3 2 1 1 2 3 1\n2 9\n1 2\n2 5\n\n</pre>\n\n<h4>output</h4>\n<pre>8\n2\n0\n\n</pre>\n\n"},{"title":"# 样例二","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre>10 10 3 0\n1 2 3 4 5 6 7 8 9 10\n1 9\n2 3\n4 5\n\n</pre>\n\n<h4>output</h4>\n<pre>0\n0\n0\n\n</pre>\n\n\n"},{"title":"# 样例三","format":"html","require":["katex"],"content":"\n\n<p>见样例及测评库下载。</p>\n"},{"title":"# 限制与约定","format":"html","require":["katex"],"content":"\n\n<p>对于所有数据，$1\\le n\\le 1\\times 10^5$，$1\\le m\\le 1\\times10^5$，$ q\\leq 2\\times 10^6$，$ L_i \\le  R_i$。</p>\n<p>为了拿到每个子任务的分数，你必须通过<strong>所有</strong>他依赖的子任务。</p>\n<div class=\"table-responsive\">\n <table class=\"table table-bordered table-text-center table-vertical-middle\"><thead><tr><th>子任务</th>\n    <th>分值</th>\n    <th>$n$</th>\n    <th>$q$</th>\n    <th>其他性质</th>\n    <th>依赖的subtask</th>\n   </tr></thead><tbody><tr><td>1</td>\n    <td>20</td>\n    <td>$\\le 1000$</td>\n    <td>$\\le 1000$</td>\n    <td>无</td>\n    <td>无</td>\n   </tr><tr><td>2</td>\n    <td>16</td>\n    <td>$\\le 1\\times 10^5$</td>\n    <td>$\\le 1\\times 10^5$</td>\n    <td>每种权值最多出现两次</td>\n    <td>$1$</td>\n   </tr><tr><td>3</td>\n    <td>25</td>\n    <td>$\\le 1\\times 10^5$</td>\n    <td>$\\le 1\\times 10^5$</td>\n    <td>询问的 $L,R$ 生成方式给出（见下）</td>\n    <td>$1$</td>\n   </tr><tr><td>4</td>\n    <td>19</td>\n    <td>$\\le 1\\times 10^5$</td>\n    <td>$\\le 1\\times 10^5$</td>\n    <td>无</td>\n    <td>$1,2,3$</td>\n   </tr><tr><td>5</td>\n    <td>20</td>\n    <td>$\\le 1\\times 10^5$</td>\n    <td>$\\le 2\\times 10^6$</td>\n    <td>无</td>\n    <td>$1,2,3,4$</td>\n   </tr></tbody></table></div>\n\n\n\n<p>子任务3生成询问的方式如下：</p>\n<p>定义\n$$F_i=(2000i^2+629i+2333) \\bmod n+1$$</p>\n<p>则对所有的 $1\\le i\\le q$，有\n$$L_i = \\min\\left\\{F_{2i-1},F_{2i} \\right\\}$$\n$$R_i = \\max\\left\\{F_{2i-1},F_{2i} \\right\\}$$</p>\n<p><a href=\"/faq\">交互式类型的题目怎么本地测试</a></p>\n<p><strong>时间限制：</strong>$2\\texttt{s}$</p>\n<p><strong>空间限制：</strong>$512\\texttt{MB}$</p>\n"},{"title":"# 下载","format":"html","require":["katex"],"content":"\n\n<p><a href=\"/download.php?type=problem&amp;id=327\">样例数据下载</a></p>\n\n"}]}