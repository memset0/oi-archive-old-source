{"title":"【CSP-S 2019】树上的数","time_limit":0,"memory_limit":0,"url":"http://uoj.ac/problem/490","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n<p>给定一个大小为 $n$ 的树,它共有 $n$ 个结点与 $n − 1$ 条边,结点从 $1 \\sim n$ 编号。初始时每个结点上都有一个 $1 \\sim n$ 的数字,且每个 $1 \\sim n$ 的数字都只在<strong>恰好</strong>一个结点上出现。</p>\n<p>接下来你需要进行<strong>恰好</strong> $n − 1$ 次删边操作,每次操作你需要选一条<strong>未被删去</strong>的边，此时这条边所连接的两个结点上的数字将会<strong>交换</strong>,然后这条边将被删去。</p>\n<p>$n − 1$ 次操作过后,所有的边都将被删去。此时,按数字从小到大的顺序,将数字 $1 \\sim n$ 结点编号依次排列,就得到一个结点编号的排列 $P_i$。现在请你求出,在最优操作方案下能得到的<strong>字典序最小</strong>的 $P_i$。</p>\n<p><img class=\"img-responsive center-block\" src=\"//img.uoj.ac/problem/490/csptree1.webp\" style=\"width:200px;\" alt=\"示意图\"/></p>\n<p>如上图,蓝圈中的数字 $1 \\sim 5$ 一开始分别在结点②、①、③、⑤、④。按照 (1)(4)(3)(2)的顺序删去所有边,树变为下图。按数字顺序得到的结点编号排列为①、③、④、②、⑤。排列是所有可能的结果中字典序最小的。</p>\n<p><img class=\"img-responsive center-block\" src=\"//img.uoj.ac/problem/490/csptree2.webp\" style=\"width:230px;\" alt=\"示意图\"/></p>\n"},{"title":"输入格式","format":"html","require":["katex"],"content":"\n\n<p><strong>本题输入包含多组测试数据。</strong></p>\n<p>第一行一个正整数 $T$ ,表示数据组数。</p>\n<p>对于每组测试数据:</p>\n<p>第一行一个整数 $n$,表示树的大小。</p>\n<p>第二行 $n$ 个整数,第 $i(1 \\leq i \\leq n)$ 个整数表示数字 $i$ 初始时所在的结点编号。</p>\n<p>接下来 $n − 1$ 行每行两个整数 $x, y$,表示一条连接 $x$ 号结点与 $y$ 号结点的边。</p>\n"},{"title":"输出格式","format":"html","require":["katex"],"content":"\n\n<p>对于每组测试数据,输出一行共 $n$ 个用空格隔开的整数,表示最优操作方案下所能得到的字典序最小的 $P_i$ 。</p>\n"},{"title":"样例1","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre><code class=\"sh_plain\">4\n5\n2 1 3 5 4\n1 3\n1 4\n2 4\n4 5\n5\n3 4 2 1 5\n1 2\n2 3\n3 4\n4 5\n5\n1 2 5 3 4\n1 2\n1 3\n1 4\n1 5\n10\n1 2 3 4 5 7 8 9 10 6\n1 2\n1 3\n1 4\n1 5\n5 6\n6 7\n7 8\n8 9\n9 10</code></pre>\n<h4>output</h4>\n<pre><code class=\"sh_plain\">1 3 4 2 5\n1 3 5 2 4\n2 3 1 4 5\n2 3 4 5 6 1 7 8 9 10</code></pre>\n"},{"title":"样例2","format":"html","require":["katex"],"content":"\n\n<p>见下发文件。</p>\n"},{"title":"限制与约定","format":"html","require":["katex"],"content":"\n\n<div class=\"table-responsive\">\n    <table class=\"table table-bordered table-text-center table-vertical-middle\"><thead><tr><th>测试点编号</th><th>$n \\leq $</th><th>特殊性质</th></tr></thead><tbody><tr><td>$1 \\sim 2$</td><td>$10$</td><td></td></tr><tr><td>$3 \\sim 4$</td><td>$160$</td><td rowspan=\"2\">树的形态是一条链</td></tr><tr><td>$5 \\sim 7$</td><td>$2000$</td></tr><tr><td>$8 \\sim 9$</td><td>$160$</td><td rowspan=\"2\">存在度数为$n-1$的点</td></tr><tr><td>$10 \\sim 12$</td><td>$2000$</td></tr><tr><td>$13 \\sim 16$</td><td>$160$</td><td rowspan=\"2\"></td></tr><tr><td>$17 \\sim 20$</td><td>$2000$</td></tr></tbody></table></div>\n\n<p>对于所有测试点: $1 \\leq T \\leq 10$,保证给出的是一个树。</p>\n<p><strong>时间限制:</strong> $2\\texttt{s}$</p>\n<p><strong>空间限制:</strong> $256\\texttt{MB}$</p>\n"},{"title":"下载","format":"html","require":["katex"],"content":"\n\n<p><a href=\"/download.php?type=problem&amp;id=490\">样例数据下载</a></p>\n\n"}]}