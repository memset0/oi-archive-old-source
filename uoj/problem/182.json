{"title":"【UR #12】a^-1 + b problem","time_limit":4000,"memory_limit":256,"url":"http://uoj.ac/problem/182","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n<p>在你的帮助下，跳蚤国王终于打开了最后一间房间的大门。然而，picks 博士和他的猴子们早已通过地道逃跑了。万幸的是，因为阿姆斯特朗回旋加速喷气式阿姆斯特朗炮本身太过笨重，无法从地道中运走，所以还被静静的停放在房间的正中央。</p>\n<p>拥有了征服世界的力量，跳蚤国王感觉非常一颗赛艇。为了试验这个传说中的武器的威力，跳蚤国王让士兵们把炮口对准空无一人的实验室开炮。</p>\n<p>然而，事情总是没有这么顺利。片刻之后，一个士兵匆匆跑到跳蚤国王身前：“报！picks 博士给它设置了保险！但是我们根本不知道解除方法！”</p>\n<p>经过研究，跳蚤国王发现，picks 博士所设置的保险措施可以简化为这样一个问题：</p>\n<p>首先炮身的屏幕上显示了 $n$ 个数，接着在模 $998244353（7\\times 17 \\times 2^{23}+1$，一个质数$）$ 意义下，给出了 $m$ 条指令，每一条指令都是下列两种之一：</p>\n<ol><li>给<strong>所有</strong>数加上某一个数。</li>\n<li>让<strong>所有</strong>数都变成原来的逆元。（保证这时所有数的逆元都存在）</li>\n</ol><p>在每个指令完成之后，你要回答当前屏幕上<strong>所有</strong>数的和。</p>\n<p>跳蚤国王思索了片刻，发现这个问题奥妙重重，于是他让你——这附近最著名的民间科学家来帮他解决这个难题。</p>\n"},{"title":"# 输入格式","format":"html","require":["katex"],"content":"\n\n<p>第一行两个正整数 $n, m$，含义如题意所述。</p>\n<p>第二行$n$个数，表示屏幕上最初显示的 $n$ 个数。</p>\n<p>接下来$m$行，表示 $m$ 条指令，第 $i$ 行第一个数$ t_i $表示第 $i$ 个操作的类型。</p>\n<p>若 $t_i = 1$ 则接下来有一个整数 $x_i$，表示给所有数都加上 $x_i$。</p>\n<p>若 $t_i = 2$ 则表示将所有数都变成原来的逆元。</p>\n"},{"title":"# 输出格式","format":"html","require":["katex"],"content":"\n\n<p>输出$m$行，第$i$行一个整数表示第$i$条指令之后当前屏幕上每个数的和。</p>\n"},{"title":"# 样例一","format":"html","require":["katex"],"content":"\n\n<h4>input</h4>\n<pre>5 5\n1 2 3 4 5\n1 1\n2\n1 1\n2\n2\n\n</pre>\n\n<h4>output</h4>\n<pre>20\n349385525\n349385530\n292342993\n349385530\n\n</pre>\n\n<h4>explanation</h4>\n<p>执行每个指令后的数列分别如下：</p>\n<p>2 3 4 5 6 </p>\n<p>499122177 332748118 748683265 598946612 166374059 </p>\n<p>499122178 332748119 748683266 598946613 166374060 </p>\n<p>665496236 249561089 399297742 831870295 142606337 </p>\n<p>499122178 332748119 748683266 598946613 166374060 </p>\n"},{"title":"# 样例二","format":"html","require":["katex"],"content":"\n\n<p>见样例数据下载。这组数据符合1号测试点的限制与约定。</p>\n"},{"title":"# 样例三","format":"html","require":["katex"],"content":"\n\n<p>见样例数据下载。这组数据符合3号测试点的限制与约定。</p>\n"},{"title":"# 限制与约定","format":"html","require":["katex"],"content":"\n\n<div class=\"table-responsive\">\n    <table class=\"table table-bordered table-text-center table-vertical-middle\"><thead><tr><th>测试点编号</th><th>限制与约定</th></tr></thead><tbody><tr><td>1</td><td rowspan=\"1\">$n, m \\leq 1000$</td></tr><tr><td>2</td><td rowspan=\"1\">$n \\leq 100000$, $m \\leq 60000$, $t_i = 1$</td></tr><tr><td>3</td><td rowspan=\"1\">$n, m \\leq 10000$</td></tr><tr><td>4</td><td rowspan=\"1\">$n, m \\leq 20000$</td></tr><tr><td>5</td><td rowspan=\"1\">$n, m \\leq 30000$</td></tr><tr><td>6</td><td rowspan=\"2\">$n \\leq 100000$, $m \\leq 30000$</td></tr><tr><td>7</td></tr><tr><td>8</td><td rowspan=\"3\">$n \\leq 100000$, $m \\leq 60000$</td></tr><tr><td>9</td></tr><tr><td>10</td></tr></tbody></table></div>\n\n<p>对于所有数据，$1 \\le n \\le 100000$, $1 \\le m \\le 60000$, $t_i \\in \\{1, 2\\}$，其他所有数均为区间$[1, 998244352]$中的整数。</p>\n<p>保证任何时候每个数的逆元均存在。</p>\n<p><strong>时间限制：</strong>$4\\texttt{s}$</p>\n<p><strong>空间限制：</strong>$256\\texttt{MB}$</p>\n"},{"title":"# 下载","format":"html","require":["katex"],"content":"\n\n<p><a href=\"/download.php?type=problem&amp;id=182\">样例数据下载</a></p>\n"},{"title":"# 后记","format":"html","require":["katex"],"content":"\n\n<p>在你的帮助下，保险被成功解除，并进入了发射倒计时状态。</p>\n<p>“5,4,3,2,1，发射！”然而，就在所有人屏息以待，想要见证它超强的破坏力的时候，预想当中的炮击声并没有出现——炮口上弹出了一大簇鲜花！</p>\n<p>这时从旁边的地（窨）道（井）口（盖）下，跳出来了一个 picks 博士，他手上举着一支鲜花并大喊：“愚人节快乐！”</p>\n<p>P.S. 跳蚤国的愚人节是2月28号！（一本正经的胡说八道ing）</p>\n<p><img src=\"//img.uoj.ac/utility/na.jpg\" alt=\"嘿嘿嘿\"/></p>\n<p>从此跳蚤国王和 picks 博士过上了幸（没）福（羞）快（没）乐（臊）的生活（o(*////▽////*)q 好像剧情往奇怪的方向发展了）</p>\n\n"}]}