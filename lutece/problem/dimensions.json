{"title":"Dimensions","time_limit":1000,"memory_limit":64,"url":"https://acm.uestc.edu.cn/problem/dimensions/description","statement":[{"title":"# Content","format":"markdown","require":["katex"],"content":"\nYou and your friend Christian have decided to take a vacation year and travel all around the world to see magnificent places, meet wonderful people, and experience new cultures. Unfortunately, with different cultures come difficult differences. And the hardest differences engineers like you know of are unit differences. Why are people using miles, firkins, microfortnights, candlepowers, boisseaux, foes, pints, kWh and not to mention degrees Celsius when they instead would be much happier using the standard and beloved SI units of metres, kilograms, seconds, amperes, kelvins and candelas?\n\n<table class=\"table\">\n<thead>\n<tr><th>Quantity</th><th>Name</th><th>Symbol</th></tr>\n</thead>\n<tbody>\n<tr><td>length</td><td>metre</td><td>$m$</td></tr>\n<tr><td>time</td><td>second</td><td>$s$</td></tr>\n<tr><td>mass</td><td>kilogram</td><td>$kg$</td></tr>\n<tr><td>electric current</td><td>ampere</td><td>$A$</td></tr>\n<tr><td>temperature</td><td>kelvin</td><td>$K$</td></tr>\n<tr><td>luminous intensity</td><td>candela</td><td>$cd$</td></tr>\n</tbody>\n</table>\n\n<p class=\"text-center\"><b>Table 1: List of SI units</b></p>\n\nIn fact, you love the SI units so much that you refuse to use any other units. Derived units like the joule ($J$), the newton ($N$), and the ohm ($\\Omega$) are perfectly expressible in their\nequivalent SI units of $kg\\ m^2 / s^2$, $kg\\ m / s^2$, and $kg\\ m^2 / s^3\\ A^2$, respectively. So during\nyour travel, you record all units you come across, along with their definitions. Of course,some definitions are depending on other definitions, like $Pa = N / m^2$.\n\n![title](/source/lutece/dimensions/img/aHR0cHM6Ly9hY20udWVzdGMuZWR1LmNuL21lZGlhL2ltYWdlL3Byb2JsZW0vNzE4LzIwMTQwOTAxMTg0MzU0MzM2MzQucG5n.png)\n\nWith your definitions ready at hand, you don't have to put up with such nonsense as $60$ firkins / microfortnights or $63\\ km / h$ anymore, since you can always convert them SI units. Even calculations like $100\\ m + 1.3\\ km$ and $7\\ N \\times 8$ become a breeze to you.\n\n"},{"title":"# Standard Input","format":"markdown","require":["katex"],"content":"\nThe following syntax is given (`?` denotes \"zero or one\", `+` denotes \"one or more\", and `*` denotes \"zero or more\"):\n* `power ::= { integer larger than 1 }`\n* `unit ::= { upper or lower case English letter }+`\n* `dimension ::= unit ['^' power]?`\n* `size ::= {any floating-point number} [' ' dimension]* ['/' [' ' dimension]+]?`\n* `operator ::= '+' OR '-' OR '*'`\n* `expression ::= size ' ' operator ' ' size`\n* `unit definition ::= unit ' = ' size`\n\nAll units have length less than $10$, and in a size, no units are repeated.\n\nThe first line of the input consists of a single integer $U$, the number of new units.\n\nThen follow $U$ lines with new unit definitions. After the unit definitions follows a line with a single integer $N$, and then $N$ lines with either an expression or a size.\n\nIn the input, all powers are less than $5$, and all units are SI unit symbols or previously defined units.\n\n$0 < U \\le 100$\n\n$0 < N \\le 1000$\n\nUnits are case sensitive.\n\nNo lines are longer than $140$ characters.\n\nNo input, output or part of any computation have size of absolute value above $10^{100}$.\n\nNo input, output or part of any computation have unit exponents of absolute value above $10^6$.\n\nNo part of any computation will yield division by $0$.\n\n**Please, output the value in Scientific notation, and round to $0.001$, i.e. you can use `%.3E` to output the value.**\n"},{"title":"# Standard Output","format":"markdown","require":["katex"],"content":"\nFor each computation, output one line with the answer to the expression, or the size itself, converted to SI units. If the answer cannot be computed, output \"Incompatible\"(without the quotes). The answer should be formatted as a size, with the following clarifications:\n* Keep the units on the correct side of the division sign, and for each side, the units must be written in orders given in the list:\n`m, s, kg, A, K, cd`.\n* Do not output a unit if its exponent is $0$, or its exponent if it is equal to $1$.\n* Output one space between each unit and between units and the division sign, `\\`.\n* Do not output any spaces before or after the exponent sign, `^`.\n"},{"title":"# Samples","format":"markdown","require":["katex"],"content":"\n<style>\n        table,table tr th, table tr td { border:1px solid #0094ff; }\n        table { width: 200px; min-height: 25px; line-height: 25px; text-align: center; border-collapse: collapse;}   \n    </style>\n<table>\n\t<tr>\n\t\t<td>Input</td>\n\t\t<td>Output</td>\n\t</tr>\n<tr><td>4\nkm = 1000 m\nh = 3600 s\nJ = 1 kg m^2 / s^2\nX = 3 m^2 kg s / A K cd^4\n4\n100 m + 1.3 km\n63 km / h\n1E5 J * 0.003 h^2 / km^2\n1 J - 2 X</td><td>1.400E+03 m\n1.750E+01 m / s\n3.888E+03 kg\nIncompatible</td></tr></table>\n\n"},{"title":"# Note","format":"markdown","require":["katex"],"content":"\nMake sure that you are using `%.3E` to output your answer. For windows-users, your output for the first test case might look like `1.400E+003 m` instead of the sample output above, but that's OK, just submit and see your result.\n"}]}