{"title":"Join the game","time_limit":1000,"memory_limit":64,"url":"https://acm.uestc.edu.cn/problem/join-the-game/description","statement":[{"title":"# Content","format":"markdown","require":["katex"],"content":"\nHys likes to play with Hsy. Although poor Hys cannot play ping-pong, he follows Hsy when she goes to play ping-pong with her roommates every Sunday. In the ping-pong stadium, each girl plays with every other once, and the one who lose will have to treat the winner an ice-cream even when they are on diet. The results of games are related to the state of girls, which can be represented by a value $S$. The state of girls may differ in different weeks. The better state a girl has, the greater her $S$ is, also, the higher win probability she has. The win probability of a girl whose state value is $S\\_i$ is $\\frac{S\\_i}{S\\_i + S\\_j}$ when she competes with the other girl with $S\\_j$. Girls count the number they win or lose and buy ice-cream at the end of that day before they return home.\n\nAfter being an onlooker for several weeks, Hys came up with a good idea to participate in the games. On the way to ping-pong stadium, he would choose one from the $K$ girls (including Hsy) to be his `trustee`. Then in each game the girl Hys chooses plays, he would win or lose ice-cream as the girl would. Hys can alter his choice in the next week. However, he has to give the girl he chose last time $P$ ice-cream to show his apologies. \n\nNote that buying ice-cream is equivalent to receiving ice-cream of negative number. If the number of ice-cream Hys gets is negative, he has to pay them himself. Otherwise, Hys would give all ice-cream he gets to Hsy to show his heart.\n\nHys wants to find a strategy to choose `trustee` so that the expected number of ice-cream Hsy gets in $N$ weeks is maximized.\n"},{"title":"# Standard Input","format":"markdown","require":["katex"],"content":"\nThe first line of the input is $T$ (no more than $1000$), which stands for the number of test cases you need to solve. \n\nEach test case begins with $N$, $K$, $P$. $K$ is the number of girls. $2\\leq K \\leq 4$, $1\\leq N\\leq 52$, $0\\leq P\\leq 5$. \n\nThe next $N$ lines give $K$ positive integers not bigger than $100$. The $j\\_{th}$ number on the $i\\_{th}$ line is the state value of the $j\\_{th}$ girl in the $i\\_{th}$ week. Note that Hsy is the first girl.\n"},{"title":"# Standard Output","format":"markdown","require":["katex"],"content":"\nPlease output the greatest expect number of ice-cream Hsy gets for each test case. The result should be printed accurately rounded to three decimals.\n"},{"title":"# Samples","format":"markdown","require":["katex"],"content":"\n<style>\n        table,table tr th, table tr td { border:1px solid #0094ff; }\n        table { width: 200px; min-height: 25px; line-height: 25px; text-align: center; border-collapse: collapse;}   \n    </style>\n<table>\n\t<tr>\n\t\t<td>Input</td>\n\t\t<td>Output</td>\n\t</tr>\n<tr><td>4\n1 2 2\n60 40\n2 4 2\n90 80 70 60\n85 80 95 80\n10 3 0\n41 21 1\n79 12 11\n91 56 93\n99 43 23\n56 5 86\n55 13 34\n26 48 21\n1 54 85\n48 81 29\n59 31 51\n10 3 5\n41 21 1\n79 12 11\n91 56 93\n99 43 23\n56 5 86\n55 13 34\n26 48 21\n1 54 85\n48 81 29\n59 31 51</td><td>0.800\n4.154\n12.442\n35.546</td></tr></table>\n\n"},{"title":"# Note","format":"markdown","require":["katex"],"content":"\nAssume $P=2$ and HYS chose girl-A in the $1\\_{st}$ week and girl-B(another girl) in the $2\\_{nd}$ week.If HYS win $1$ ice-cream in the $2\\_{nd}$ week,then he will give HSY $1$ ice-cream and give girl-A $2$ ice-cream.\n"}]}