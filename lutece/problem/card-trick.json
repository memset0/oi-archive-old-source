{"title":"Card Trick","time_limit":999,"memory_limit":64,"url":"https://acm.uestc.edu.cn/problem/card-trick/description","statement":[{"title":"Content","format":"markdown","require":["katex"],"content":"\nI am learning magic tricks to impress my girlfriend Alice. My latest trick is\na probabilistic one, i.e. it does work in most cases, but not in every case.\nTo perform the trick, I first shuffle a set of many playing cards and put them all in\none line with faces up on the table. Then Alice secretly selects one of the\nfirst ten cards (i.e. she chooses $x\\_0$, a secret number between $1$ and $10$\ninclusive) and skips cards repeatedly as follows: after having selected a card\nat position $x\\_i$ with a number $c(x\\_i)$ on its face, she will select the card\nat position $x\\_{i+1} = x\\_i+c(x\\_i)$.\nJack (`J`), Queen (`Q`), and King (`K`) count as $10$, Ace (`A`)\n counts as $11$. You may assume that there are at least ten cards on the\ntable.\n\nAlice stops this procedure as soon as there is no card at position\n$x\\_i+c(x\\_i)$. I then perform the same procedure from a randomly selected\nstarting position that may be different from the position selected by\nAlice.  It turns out that often, I end up at the same position. Alice is\nvery impressed by this trick.\n\nHowever, I am more interested in the underlying math. Given my randomly\nselected starting position and the card faces of every selected card (including my final one), can\nyou compute the probability that Alice chose a starting position ending up on the same\nfinal card? You may assume that her starting position is randomly chosen with\nuniform probability (between $1$ and $10$ inclusive).\nI forgot to note the cards that I skipped, so these cards are unknown.\nYou may assume that the card face of every single of the unknown cards is independent of the other\ncard faces and random with uniform probability out of the possible card faces\n(i.e. `2`-`10`, `J`, `Q`, `K`, and `A`).\n\n<p class=\"text-center\"><img src=\"/source/lutece/card-trick/img/aHR0cHM6Ly9hY20udWVzdGMuZWR1LmNuL21lZGlhL2ltYWdlL3Byb2JsZW0vODkwLzIwMTQwNTIzMTIyMjA4NzIwMTAucG5n.png\" alt=\"title\"></p>\n\n*Illustration of first sample input: my starting position is $2$, so I\nstart selecting that card. Then I keep skipping cards depending on the card's\nface. This process iterates until there are not enough cards to skip (in this\nsample: `Q`). The final `Q` card is followed by $0$ to $9$ unknown cards, since `Q` counts as $10$. *\n"},{"title":"Standard Input","format":"markdown","require":["katex"],"content":"\nFor each test case:\n\n* A line containing two integers $n$ $(1\\le n\\le100)$ and $m$ ($1\\le m\\le10$) where $n$\n  is the number of selected cards and $m$ is the $1$-based position of my first selected card.\n* A line with $n$ tokens that specify the $n$ selected card faces (in order,\n  including the final card). Each card face is given either as an integer $x$\n  ($2\\le x\\le10$) or as a single character (`J`, `Q`, `K`, or\n  `A` as specified above).\n"},{"title":"Standard Output","format":"markdown","require":["katex"],"content":"\nFor each test case, print one line containing the probability that Alice\nchooses a starting position that leads to the same final card.\nYour output should have an absolute error of at most $10^{-7}$.\n"},{"title":"Samples","format":"markdown","require":["katex"],"content":"\n<style>\n        table,table tr th, table tr td { border:1px solid #0094ff; }\n        table { width: 200px; min-height: 25px; line-height: 25px; text-align: center; border-collapse: collapse;}   \n    </style>\n<table>\n\t<tr>\n\t\t<td>Input</td>\n\t\t<td>Output</td>\n\t</tr>\n<tr><td>5 2\n2 3 5 3 Q\n1 1\nA\n1 2\nA\n1 10\nA\n6 1\n2 2 2 2 2 2\n7 1\n2 2 2 2 2 2 2\n3 10\n10 J K</td><td>0.4871377757023325348071573\n0.1000000000000000000000000\n0.1000000000000000000000000\n0.1748923357025314239697490\n0.5830713210321767445117468\n0.6279229611115749556280350\n0.3346565827603272001891974</td></tr></table>\n\n"}]}