{"title":"Magic Number","time_limit":5000,"memory_limit":64,"url":"https://acm.uestc.edu.cn/problem/magic-number/description","statement":[{"title":"Content","format":"markdown","require":["katex"],"content":"\nIllya has  $n$  magic numbers. The  $i\\_{th}$  number  $a\\_i$  can be represented by a binary with the length of  $i$. Combining these  $0-1$  strings gets a long string  $s$  with the length of  $\\frac{n(n+1)}{2}$. The  $0-1$  strings from  $s\\_{\\frac{i(i-1)}{2}}$  to  $s\\_{\\frac{i(i+1)}{2}-1}$  is the binary of  $a\\_i$  from low to high.\nOne day, Rin input Illyaâ€™s magic numbers into a program to create  $n$  new magic numbers. The  $i\\_{th}$  new number is  $b_i$.\nHere is the code of program in C++:\n\n```\nfor(int i = 1; i <= n; i++)\n\tb[i] = flag[i] = 0;\n\t\nfor(int i = 1; i <= n; i++){\n\tfor(int j = 1; j <= n; j++){\n\t\tif( (1 << (j - 1) & a[i]) > 0){\n\t\t\tif(!flag[i])\n\t\t\t\tb[i] = b[j], flag[i] = 1;\n\t\t\telse b[i] &= b[j];\n\t\t}\n\t}\n\tb[i] ^= 1 << (i - 1);\n}\n```\nAfter that, Rin leave  $q$  questions. The  $i\\_{th}$  question is a number  $c\\_i$, which can be represented by a binary with the length of   $len\\_i$. Combining these  $0-1$  strings gets a long string  $t$  with the length of  $L\\_q$ ($L\\_k = \\sum\\_{1}^{k}len\\_i$). The  $0-1$  strings from  $t\\_{L\\_{i-1}}$  to  $t\\_{L_i-1}$  is the binary of  $c\\_i$  from low to high. \nFor each question, Rin requires Illya to calculate number  $d\\_i$.\n\n```\nfor(int i = 1; i <= n; i++){\n\td[i] = 0;\n\tfor(int j = 1; j <= len[i]; j++)\n\t\tif(j <= n && (1 << (j - 1) & c[i]) > 0)\n\t\t\td[i] |= b[j];\n}\n```\nThe answer of  $i_{th}$  question is the number of ones in the binary of  $d_i$.\n"},{"title":"Standard Input","format":"markdown","require":["katex"],"content":"\nThere are multiple test cases.\nthe first line contains a single integers  $T$, denoting the number of test cases.\nFor each case, \nthe first line contains two integers  $n$  and  $m$, denoting the number of magic numbers and the number of ones in a long string  $s$.\nThe second line contains  $m$  integers, the  $i\\_{th}$  integer  $p1\\_i$  denotes  $s\\_{p1\\_i}$ = 1. The others are equal to 0.\nThe third line contains two integer  $q$  and  $r$, denoting the number of questions and the number of ones in a long string  $t$.\nThe forth line contains  $q$  integers, the  $i\\_{th}$  integer  $len\\_i$  denotes the length of binary of the  $i\\_{th}$  question  $c\\_i$.\nThe fifth line contains  $r$  integers, the  $i\\_{th}$  integer  $p2\\_i$  denotes $t\\_{p2\\_i}$ = 1. The others are equal to 0.\n\n$1 \\leqslant T \\leqslant 20$\n$1 \\leqslant n,q  \\leqslant 5000$\n$1 \\leqslant m,r  \\leqslant 10^6$\n$0 \\leqslant L\\_q \\leqslant 10^9$\n$0 \\leqslant p1\\_i < \\frac{n(n+1)}{2}$\n$0 \\leqslant p2\\_i < L\\_q$\n"},{"title":"Standard Output","format":"markdown","require":["katex"],"content":"\nFor each case, first output \"Case #x:\".\nEach question should print one line: the  $i_{th}$  line of these denotes the answer of  $i_{th}$  question.\nThere is no blank line between two cases.\n"},{"title":"Samples","format":"markdown","require":["katex"],"content":"\n<style>\n        table,table tr th, table tr td { border:1px solid #0094ff; }\n        table { width: 200px; min-height: 25px; line-height: 25px; text-align: center; border-collapse: collapse;}   \n    </style>\n<table>\n\t<tr>\n\t\t<td>Input</td>\n\t\t<td>Output</td>\n\t</tr>\n<tr><td>1\n3 4\n0 1 4 5\n3 6\n2 3 3\n0 1 2 4 6 7\n</td><td>Case #1:\n2\n3\n3\n</td></tr></table>\n\n"}]}