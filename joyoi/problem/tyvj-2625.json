{"title":"Seq 维护序列seq","time_limit":1000,"memory_limit":64,"url":"http://www.joyoi.cn/problem/tyvj-2625","statement":[{"title":"","format":"markdown","require":["katex"],"content":"\n# \n\n \n # 题目描述 \n<p>\n    老师交给小可可一个维护数列的任务，现在小可可希望你来帮他完成。\r<br>    有长为N的数列，不妨设为a1,a2,…,aN 。有如下三种操作形式：\r<br>(1)把数列中的一段数全部乘一个值;\r<br>(2)把数列中的一段数全部加一个值;\r<br>(3)询问数列中的一段数的和，由于答案可能很大，你只需输出这个数模P的值。\r<br>\r<br></p> \n\n \n # 输入格式 \n<p>\n第一行两个整数N和P(1≤P≤1000000000）。第二行含有N个非负整数,从左到右依次为a1,a2,…,aN, (0≤ai≤1000000000,1≤i≤N)。第三行有一个整数M，表示操作总数。从第四行开始每行描述一个操作，输入的操作有以下三种形式：\r<br>操作1：“1 t g c”(不含双引号)。表示把所有满足t≤i≤g的ai改为ai×c (1≤t≤g≤N,0≤c≤1000000000)。\r<br>操作2：“2 t g c”(不含双引号)。表示把所有满足t≤i≤g的ai改为ai+c (1≤t≤g≤N,0≤c≤1000000000)。\r<br>操作3：“3 t g”(不含双引号)。询问所有满足t≤i≤g的ai的和模P的值\r<br>(1≤t≤g≤N)。\r<br>       同一行相邻两数之间用一个空格隔开，每行开头和末尾没有多余空格。\r<br>\r<br></p> \n\n \n # 输出格式 \n<p>\n    对每个操作3，按照它在输入中出现的顺序，依次输出一行一个整数表示询问结果。\r<br>\r<br></p> \n\n \n # 提示 \n<p>\n【样例说明】\r<br>\r<br>初始时数列为(1,2,3,4,5,6,7)。\r<br>经过第1次操作后，数列为(1,10,15,20,25,6,7)。\r<br>对第2次操作，和为10+15+20=45，模43的结果是2。\r<br>经过第3次操作后，数列为(1,10,24,29,34,15,16}\r<br>对第4次操作，和为1+10+24=35，模43的结果是35。\r<br>对第5次操作，和为29+34+15+16=94,模43的结果是8。\r<br>\r<br>\r<br>\r<br>测试数据规模如下表所示\r<br>\r<br>数据编号\t1\t2\t3\t4\t5\t6\t7\t8\t9\t10\r<br>N=\t10\t1000\t1000\t10000\t60000\t70000\t80000\t90000\t100000\t100000\r<br>M=\t10\t1000\t1000\t10000\t60000\t70000\t80000\t90000\t100000\t100000\r<br></p> "},{"title":"# 样例数据","format":"markdown","require":["katex"],"content":"<style>\n        table,table tr th, table tr td { border:1px solid #0094ff; }\n        table { width: 200px; min-height: 25px; line-height: 25px; text-align: center; border-collapse: collapse;}   \n    </style>\n<table>\n\t<tr>\n\t\t<td>输入样例</td>\n\t\t<td>输出样例</td>\n\t</tr>\n<tr><td>7 43\r\n1 2 3 4 5 6 7\r\n5\r\n1 2 5 5\r\n3 2 4\r\n2 3 7 9\r\n3 1 3\r\n3 4 7\r\n\r\n</td><td>2\r\n35\r\n8\r\n\r</td></tr></table>\n\n"}]}