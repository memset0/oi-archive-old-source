{"title":"算式排版","time_limit":1000,"memory_limit":128,"url":"http://www.joyoi.cn/problem/tyvj-1426","statement":[{"title":"","format":"markdown","require":["katex"],"content":"\n# \n\n \n # 题目背景 \n<p>这种题。。。</p> \n\n \n # 题目描述 \n<p>算式排版<br />\r\n算式的排版常常是一件非常令人头疼的事情。不过对于简单的算式，这项工作就并不是很复杂了。给定一个只包含常数（均为整数，不超过50位），变量（都是1位小写字母）以及&nbsp;+,&nbsp;-,&nbsp;*,&nbsp;/,&nbsp;^（乘方）,(,&nbsp;),&nbsp;{,&nbsp;}&nbsp;构成的算式。对于任何一个排版之后的算式，我们定义这个算式的&ldquo;边框&rdquo;为恰好可以完全盖住这个算式的最小矩形。<br />\r\n例如：算式：<br />\r\n&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;....<br />\r\n----&nbsp;&nbsp;&nbsp;&nbsp;====&gt;&nbsp;&nbsp;&nbsp;&nbsp;....<br />\r\n1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;....<br />\r\n的边框是一个3*4的矩形，而算式<br />\r\n1+2+3&nbsp;&nbsp;&nbsp;&nbsp;====&gt;&nbsp;&nbsp;&nbsp;&nbsp;.....<br />\r\n的边框是一个1*5的矩形。<br />\r\n{&nbsp;和&nbsp;}&nbsp;的作用是规定计算的顺序，但是不必输出。而&nbsp;(&nbsp;和&nbsp;)&nbsp;不仅规定计算顺序，而且是必须输出的。<br />\r\n要求用以下的规则排版这个算式：<br />\r\n(1]&nbsp;对于算式A，(A)必须满足以下规则：<br />\r\n在A的边框左侧每一行增加一个(，右侧每一行增加一个)。<br />\r\n例如：((12345))的正确输出是：<br />\r\n((12345))<br />\r\n(1/12)的正确输出是：<br />\r\n(&nbsp;1)<br />\r\n(--)<br />\r\n(12)<br />\r\n(2]&nbsp;对于算式A和算式B，A+B,&nbsp;A-B&nbsp;和&nbsp;A*B&nbsp;必须满足以下规则：<br />\r\nA的分数线和B的分数线对齐（输入保证不会存在繁分式），并且以+(-,&nbsp;*)左右都必须留有一个空格。算式A,B的<br />\r\n分数线，即作为A+B的分数线。<br />\r\n例如：算式：x+y的正确输出是：<br />\r\nx&nbsp;+&nbsp;y<br />\r\n算式：{1/x}-y的正确输出是：<br />\r\n1<br />\r\n-&nbsp;-&nbsp;y<br />\r\nx<br />\r\n算式：x*(1/y)的正确输出是：<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;(1)<br />\r\nx&nbsp;*&nbsp;(-)<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;(y)<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;<br />\r\n(3]&nbsp;对于算式A和算式B，A^B必须满足以下规则：（保证A不是繁分式）<br />\r\n要求B的边框的左下角和A的边框的右上角重合。A^B的分数线定义为A的分数线。<br />\r\n例如：算式{x+y}^{y+x}的正确输出为：<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;+&nbsp;x<br />\r\nx&nbsp;+&nbsp;y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;---&nbsp;结果的分数线<br />\r\n算式{1/{x+y+z}}^(1/2)的正确输出为：<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(1)<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(-)<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2)<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />\r\n---------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;---&nbsp;结果的分数线<br />\r\nx&nbsp;+&nbsp;y&nbsp;+&nbsp;z&nbsp;&nbsp;&nbsp;<br />\r\n(4]&nbsp;对于算式A和算式B，A/B必须满足以下规则：（保证A,B的底数不是分式）<br />\r\n要求A作为分子，B作为分母，A,B之间加上一条分数线。分数线的长度必须恰好既能覆盖A的边框，又能覆盖B的<br />\r\n边框。并且如果A或B边框的宽度（列数）小于分数线宽度，那么A或B右侧的空格个数不多于左侧空格个数，并且<br />\r\n至多比左侧少1个。<br />\r\n新添加的分数线，作为A/B结果的分数线。<br />\r\n例如：1/12345的正确输出是：<br />\r\n&nbsp;&nbsp;1<br />\r\n-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;---&nbsp;结果的分数线<br />\r\n12345<br />\r\n1/1234的正确输出是：<br />\r\n&nbsp;&nbsp;1<br />\r\n----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;---&nbsp;结果的分数线<br />\r\n1234<br />\r\nx^{1/23)/y^{a+b+c}的正确输出是：<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;23&nbsp;<br />\r\n&nbsp;&nbsp;&nbsp;&nbsp;x<br />\r\n----------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;---&nbsp;结果的分数线<br />\r\n&nbsp;a&nbsp;+&nbsp;b&nbsp;+&nbsp;c<br />\r\ny<br />\r\n(5]&nbsp;另外，本题输出比较特别，要求输出算式的边框覆盖的部分必须被字符填满。也就是说，不足的地方全部<br />\r\n应该由空格填充。例如：<br />\r\n......1...<br />\r\n.....--...<br />\r\n.....23...<br />\r\n....x.....<br />\r\n----------<br />\r\n.a&nbsp;+&nbsp;b&nbsp;+&nbsp;c<br />\r\ny.........<br />\r\n上面的.表示应该填充的空格。</p> \n\n \n # 输入格式 \n<p>一个算式，占一行，长度不超过255个字符。</p> \n\n \n # 输出格式 \n<p>满足上面要求的排版后的算式。保证算式长、宽均不超过100个字符。</p> \n\n \n # 提示 \n<p>非原创，转载</p> "},{"title":"# 样例数据","format":"markdown","require":["katex"],"content":"<style>\n        table,table tr th, table tr td { border:1px solid #0094ff; }\n        table { width: 200px; min-height: 25px; line-height: 25px; text-align: center; border-collapse: collapse;}   \n    </style>\n<table>\n\t<tr>\n\t\t<td>输入样例</td>\n\t\t<td>输出样例</td>\n\t</tr>\n<tr><td>样例输入1\r\n1+2+3+4+1/500\r\n\r\n样例输入2\r\n(1+2+(3+1/4))^x\r\n\r\n样例输入3\r\n{1+2+3^4}/100^100\r\n</td><td>样例输出1\r\n                 1\r\n1 + 2 + 3 + 4 + ---\r\n                500\r\n\r\n样例输出2\r\n                 x\r\n(        (    1)) \r\n(1 + 2 + (3 + -)) \r\n(        (    4)) \r\n\r\n样例输出3\r\n         4\r\n1 + 2 + 3 \r\n----------\r\n     100  \r\n  100     \r\n</td></tr></table>\n\n"}]}