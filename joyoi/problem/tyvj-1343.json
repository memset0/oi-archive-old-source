{"title":"保镖排队","time_limit":1000,"memory_limit":128,"url":"http://www.joyoi.cn/problem/tyvj-1343","statement":[{"title":"","format":"markdown","require":["katex"],"content":"\n# \n\n \n # 题目背景 \n教主LHX作为知名人物，时刻会有恐怖分子威胁他的生命。于是教主雇佣了一些保镖来保障他的人生安全。<BR> \n\n \n # 题目描述 \n教主一共雇佣了N个保镖，编号为1~N。每个保镖虽然身手敏捷武功高强，但是他在其余N-1个保镖里，都会有一个\"上司\"，他会对他的上司言听计从。但一号保镖例外，他武功盖世，不惧怕其余任何保镖，所以他没有上司。<BR>　　教主LHX会对这N个保镖进行定期视察。每次视察的时候，首先会让所有保镖排队。<BR>对于每个保镖，在他心目中会对他的所有下属的武功实力排个队。<BR>　　现在教主要求排出来的队伍满足：①互为上司-下属的两个保镖，上司在前，下属在后&nbsp;②对于一个保镖的所有下属，武功实力较强的在前，较弱的在后。<BR>　　教主想知道，总的排队方法数除以10007的余数是多少。<BR><BR><BR> \n\n \n # 输入格式 \n输入的第一行为一个正整数T，表示了数据组数。<BR>对于每组数据：<BR>第一行为一个正整数N。<BR>　　接下来N行，每行描述一个保镖。<BR>　　第i+1行，会有一个整数K，代表第i个保镖的下属个数，接下来K个数，代表第i个保镖的下属按照武功实力从高到低的编号。<BR><BR><BR> \n\n \n # 输出格式 \n输出包括C行，每行对于每组数据输出方案数mod&nbsp;10007后的结果。<BR> \n\n \n # 提示 \n【样例说明】<BR>对于第1组数据，有以下3种排列是合法的：<BR>1&nbsp;2&nbsp;4&nbsp;3&nbsp;5<BR>1&nbsp;2&nbsp;3&nbsp;4&nbsp;5<BR>1&nbsp;2&nbsp;4&nbsp;5&nbsp;3<BR>同时满足了1在2与3之前且2在3之前，2在4与5之前且4在5之前<BR><BR>【数据规模】<BR>对于20%的数据，有N&nbsp;≤&nbsp;9；<BR>对于40%的数据，有对于所有K，有K&nbsp;≤&nbsp;2；<BR>对于60%的数据，有N&nbsp;≤&nbsp;100；<BR>对于100%的数据，有T&nbsp;≤&nbsp;10，N&nbsp;≤&nbsp;1000，K&nbsp;＜&nbsp;N。<BR>&nbsp;<BR><BR> "},{"title":"样例数据","format":"markdown","require":["katex"],"content":"<style>\n        table,table tr th, table tr td { border:1px solid #0094ff; }\n        table { width: 200px; min-height: 25px; line-height: 25px; text-align: center; border-collapse: collapse;}   \n    </style>\n<table>\n\t<tr>\n\t\t<td>输入样例</td>\n\t\t<td>输出样例</td>\n\t</tr>\n<tr><td>2\r\n5\r\n2 2 3\r\n2 4 5\r\n0\r\n0\r\n0\r\n7\r\n2 2 3\r\n2 4 5\r\n2 6 7\r\n0\r\n0\r\n0\r\n0\r\n\r\n</td><td>3\r\n10\r\n\r\n\r\n</td></tr></table>\n\n"}]}