{"title":"[NOIP2018普及组] 对称二叉树","time_limit":1000,"memory_limit":244,"url":"http://www.joyoi.cn/problem/NOIP2018PJ4","statement":[{"title":"题目背景","format":"markdown","require":["katex"],"content":"NOIP2018普及组第4题\n\n如图片无法正常显示请访问：[图1](https://img2018.cnblogs.com/blog/1585805/201901/1585805-20190127163002446-729346886.jpg)，[图2](https://img2018.cnblogs.com/blog/1585805/201901/1585805-20190127164131293-785814377.jpg)，[图3](https://img2018.cnblogs.com/blog/1585805/201901/1585805-20190127164311182-205122974.jpg)，[图4](https://img2018.cnblogs.com/blog/1585805/201901/1585805-20190127164531705-458319352.jpg)，[图5](https://img2018.cnblogs.com/blog/1585805/201901/1585805-20190127164431855-2019379240.jpg)"},{"title":"问题描述","format":"markdown","require":["katex"],"content":"一棵有点权的有根树如果满足以下条件，则被轩轩称为对称二叉树：\n\n1.二叉树；\n\n2.将这棵树所有节点的左右子树交换，新树和原树对应位置的结构相同且点权相等。\n下图中节点内的数字为权值，节点外的 id 表示节点编号。\n![](/source/joyoi/NOIP2018PJ4/img/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTU4NTgwNS8yMDE5MDEvMTU4NTgwNS0yMDE5MDEyNzE2MzAwMjQ0Ni03MjkzNDY4ODYuanBn.jpg)\n现在给出一棵二叉树，希望你找出它的一棵子树，该子树为对称二叉树，且节点数 最多。请输出这棵子树的节点数。\n\n注意：只有树根的树也是对称二叉树。本题中约定，以节点 T 为子树根的一棵“子 树”指的是：节点T 和它的全部后代节点构成的二叉树。"},{"title":"输入格式","format":"markdown","require":["katex"],"content":"第一行一个正整数 n，表示给定的树的节点的数目，规定节点编号 1∼n，其中节点 1 是树根。\n\n第二行 n 个正整数，用一个空格分隔，第 i 个正整数 vi代表节点 i 的权值。\n\n接下来 n 行，每行两个正整数 li,ri，分别表示节点 i 的左右孩子的编号。如果不存在左 / 右孩子，则以 -1 表示。两个数之间用一个空格隔开。"},{"title":"输出格式","format":"markdown","require":["katex"],"content":"输出共一行，包含一个整数，表示给定的树的最大对称二叉子树的节点数。"},{"title":"提示","format":"markdown","require":["katex"],"content":"* 【输入输出样例 1 说明】\n\n![](/source/joyoi/NOIP2018PJ4/img/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTU4NTgwNS8yMDE5MDEvMTU4NTgwNS0yMDE5MDEyNzE2NDEzMTI5My03ODU4MTQzNzcuanBn.jpg)\n\n  最大的对称二叉子树为以节点 2 为树根的子树，节点数为 1。\n\n* 【输入输出样例 2 说明】\n\n![](/source/joyoi/NOIP2018PJ4/img/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTU4NTgwNS8yMDE5MDEvMTU4NTgwNS0yMDE5MDEyNzE2NDMxMTE4Mi0yMDUxMjI5NzQuanBn.jpg)\n\n  最大的对称二叉子树为以节点 7 为树根的子树，节点数为 3。"},{"title":"数据规模与约定","format":"markdown","require":["katex"],"content":"\n共 25 个测试点。\n\nvi≤1000。\n\n测试点 1∼3,n≤10，保证根结点的左子树的所有节点都没有右孩子，根结点的右子树\n的所有节点都没有左孩子。\n\n测试点 4∼8,n≤10。\n\n测试点 9∼12,n≤10^5，保证输入是一棵“满二叉树” 。\n\n测试点 13∼16,n≤10^5，保证输入是一棵“完全二叉树”。\n\n测试点 17∼20,n≤10^5，保证输入的树的点权均为 1。\n\n测试点 21∼25,n≤10^6。\n\n本题约定：\n\n  层次：节点的层次从根开始定义起，根为第一层，根的孩子为第二层。树中任一节点的层次等于其父亲节点的层次加 1。\n\n  树的深度：树中节点的最大层次称为树的深度。\n\n  满二叉树：设二叉树的深度为 h，且二叉树有 2h−1 个节点，这就是满二叉树。\n\n![](/source/joyoi/NOIP2018PJ4/img/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTU4NTgwNS8yMDE5MDEvMTU4NTgwNS0yMDE5MDEyNzE2NDUzMTcwNS00NTgzMTkzNTIuanBn.jpg)\n\n  完全二叉树：设二叉树的深度为 h，除第 h 层外，其它各层的结点数都达到最大个数，第 h 层所有的结点都连续集中在最左边，这就是完全二叉树。\n![](/source/joyoi/NOIP2018PJ4/img/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTU4NTgwNS8yMDE5MDEvMTU4NTgwNS0yMDE5MDEyNzE2NDQzMTg1NS0yMDE5Mzc5MjQwLmpwZw==.jpg)"},{"title":"样例数据","format":"markdown","require":["katex"],"content":"<style>\n        table,table tr th, table tr td { border:1px solid #0094ff; }\n        table { width: 200px; min-height: 25px; line-height: 25px; text-align: center; border-collapse: collapse;}   \n    </style>\n<table>\n\t<tr>\n\t\t<td>输入样例</td>\n\t\t<td>输出样例</td>\n\t</tr>\n<tr><td>2 \n1 3 \n2 -1 \n-1 -1 \n</td><td>1\n</td></tr><tr><td>10 \n2 2 5 5 5 5 4 4 2 3 \n9 10 \n-1 -1 \n-1 -1 \n-1 -1 \n-1 -1 \n-1 2 \n3 4 \n5 6 \n-1 -1 \n7 8\n</td><td>3\n</td></tr></table>\n\n"}]}