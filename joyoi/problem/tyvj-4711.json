{"title":"命题证明","time_limit":1000,"memory_limit":64,"url":"http://www.joyoi.cn/problem/tyvj-4711","statement":[{"title":"","format":"markdown","require":["katex"],"content":"\n# \n\n \n # 题目描述 \n<p>有若干命题，给出命题的证明关系m个，以及k个初始的真命题，求&nbsp;证明命题p至少需要多少步。</p>\r\n\r\n<p>命题关系表示为&nbsp;T&nbsp;a&nbsp;b&nbsp;c。T是一个字符，可以为A&nbsp;或&nbsp;O，a&nbsp;b&nbsp;c是正整数。如:</p>\r\n\r\n<p>A&nbsp;1&nbsp;2&nbsp;3&nbsp;表示若1&nbsp;2&nbsp;都成立，则能证明3；</p>\r\n\r\n<p>O&nbsp;1&nbsp;2&nbsp;3表示若1&nbsp;2中任意一个成立则能证明3</p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p>注意：本题中保证不出现证明环；证明同一个命题的关系仅有一个，即只出现一次；说白了，这就是个二叉树。</p> \n\n \n # 输入格式 \n<p>第一行m,k,p，表示共有m个命题之间证明关系，有k个初始成立的真命题，要证明的命题p</p>\r\n\r\n<p>接下来m行，每行一个字符后，三个正整数（不超过200000），表示证明关系；</p>\r\n\r\n<p>接下来一行，k个整数，表示初始已知成立的真命题。</p> \n\n \n # 输出格式 \n<p>一行，一个整数表示证明p最少需要多少步。如果不能证明则输出&nbsp;Unable&nbsp;to&nbsp;prove(行末行首无空格)。</p> \n\n \n # 提示 \n<p>输入样例</p>\r\n\r\n<p>5&nbsp;3&nbsp;1<br />\r\nA&nbsp;2&nbsp;3&nbsp;1<br />\r\nO&nbsp;4&nbsp;5&nbsp;2<br />\r\nA&nbsp;6&nbsp;7&nbsp;4<br />\r\nO&nbsp;8&nbsp;9&nbsp;3<br />\r\nA&nbsp;33&nbsp;44&nbsp;22<br />\r\n6&nbsp;7&nbsp;8</p>\r\n\r\n<p>输出样例</p>\r\n\r\n<p>4</p>\r\n\r\n<p>样例解释</p>\r\n\r\n<p>6&nbsp;7&nbsp;-&gt;&nbsp;4</p>\r\n\r\n<p>4-&gt;&nbsp;2</p>\r\n\r\n<p>8-&gt;&nbsp;3</p>\r\n\r\n<p>2&nbsp;3-&gt;&nbsp;1</p>\r\n\r\n<p>共4步</p>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p>数据范围</p>\r\n\r\n<p>1&lt;=<span style=\"line-height: 20.7999992370605px;\">所有命题编号，</span>m&lt;=200000</p> \n\n"}]}