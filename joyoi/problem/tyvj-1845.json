{"title":"[APIO2012]派遣dispatching","time_limit":1000,"memory_limit":128,"url":"http://www.joyoi.cn/problem/tyvj-1845","statement":[{"title":"","format":"markdown","require":["katex"],"content":"\n# \n\n \n # 题目背景 \nAPIO2012第一题<BR> \n\n \n # 题目描述 \n在一个忍者的帮派里，一些忍者们被选中派遣给顾客，然后依据自己的工作获取报偿。<BR>在这个帮派里，有一名忍者被称之为Master。除了Master以外，每名忍者都有且仅有一个上级。为保密，同时增强忍者们的领导力，所有与他们工作相关的指令总是由上级发送给他的直接下属，而不允许通过其他的方式发送。<BR>现在你要招募一批忍者，并把它们派遣给顾客。你需要为每个被派遣的忍者支付一定的薪水，同时使得支付的薪水总额不超过你的预算。另外，为了发送指令，你需要选择一名忍者作为管理者，要求这个管理者可以向所有被派遣的忍者发送指令，在发送指令时，任何忍者（不管是否被派遣）都可以作为消息的传递人。管理者自己可以被派遣，也可以不被派遣。当然，如果管理者没有被排遣，你就不需要支付管理者的薪水。<BR>你的目标是在预算内使顾客的满意度最大。这里定义顾客的满意度为派遣的忍者总数乘以管理者的领导力水平，其中每个忍者的领导力水平也是一定的。<BR>写一个程序，给定每一个忍者i的上级Bi，薪水Ci，领导力Li，以及支付给忍者们的薪水总预算M，输出在预算内满足上述要求时顾客满意度的最大值。 \n\n \n # 输入格式 \n从标准输入读入数据。<BR>第一行包含两个整数N和M，其中N表示忍者的个数，M表示薪水的总预算。<BR>接下来N行描述忍者们的上级、薪水以及领导力。其中的第i行包含三个整数Bi,&nbsp;Ci,&nbsp;Li分别表示第i个忍者的上级，薪水以及领导力。Master满足Bi=0，并且每一个忍者的老板的编号一定小于自己的编号Bi&lt;&nbsp;i。 \n\n \n # 输出格式 \n输出到标准输出。<BR>输出一个数，表示在预算内顾客的满意度的最大值 \n\n \n # 提示 \n1&nbsp;≤&nbsp;N≤&nbsp;100,000忍者的个数；<BR>1&nbsp;≤&nbsp;M≤&nbsp;1,000,000,000薪水总预算；<BR>0&nbsp;≤Bi&lt;&nbsp;i忍者的上级的编号；<BR>1&nbsp;≤&nbsp;Ci≤&nbsp;M忍者的薪水；<BR>1&nbsp;≤&nbsp;Li≤&nbsp;1,000,000,000忍者的领导力水平。<BR>对于30%的数据，N≤&nbsp;3000。<BR><BR>如果我们选择编号为1的忍者作为管理者并且派遣第三个和第四个忍者，薪水总和为4，没有超过总预算4。因为派遣了2个忍者并且管理者的领导力为3，用户的满意度为2&nbsp;×3&nbsp;=&nbsp;6，是可以得到的用户满意度的最大值。APIO2012<BR>数据为国内数据 "},{"title":"# 样例数据","format":"markdown","require":["katex"],"content":"<style>\n        table,table tr th, table tr td { border:1px solid #0094ff; }\n        table { width: 200px; min-height: 25px; line-height: 25px; text-align: center; border-collapse: collapse;}   \n    </style>\n<table>\n\t<tr>\n\t\t<td>输入样例</td>\n\t\t<td>输出样例</td>\n\t</tr>\n<tr><td>5 4\r\n0 3 3\r\n1 3 5\r\n2 2 2\r\n1 2 4\r\n2 3 1</td><td>6</td></tr></table>\n\n"}]}