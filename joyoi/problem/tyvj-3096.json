{"title":"魔鬼之城","time_limit":1000,"memory_limit":64,"url":"http://www.joyoi.cn/problem/tyvj-3096","statement":[{"title":"","format":"markdown","require":["katex"],"content":"\n# \n\n \n # 题目描述 \n<p>\n　　在一个被分割为N*M个正方形房间的矩形魔鬼之城中，一个探险者必须遵循下列规则才能跳跃行动。他必须从(1, 1)进入，从(N, M)走出；在每一房间的墙壁上都写了一个魔法数字，是1～13之内的自然数；探险者可以想像出8个方向中的任何一个(水平或垂直或对角线方向)，随后他就可以作一次空间跳跃穿过这一方向上的连续的X个房间，其中X是他原来所在房间的魔法数字。但如果在这一方向上的房间数小于X，则他不作任何跳跃，而必须想像另一个方向。同时，探险者不能作连续两次相同方向的跳跃。\r<br><br><center><img src=\"/source/joyoi/tyvj-3096/img/aHR0cDovL3d3dy5qb3lvaS5jbi9wcm9ibGVtL3R5dmotMzA5Ni9wcm9ibGVtc19pbWFnZXMvMTI1OS8xLmJtcA==.bmp\"></img></center>\r<br>　　例如在上图的5*4的魔鬼之城中，如果探险者现在所在的位置是(3, 3)，那么通过依次空间跳跃他可以到达下列房间中的一个：(1, 1)，(3, 1)，(1, 3)，(5, 1)，或(5, 3)。另外，如果他要用两次跳跃从(5, 4)到达(3, 2)，则他不能首先跳到(4, 3)(因为这样他第二次跳跃的方向将和第一次相同，而这是不允许的)。所以他必须先跳跃到(2, 1)。\r<br>　　请你写一个程序，对给定的地图，算出探险者至少需要跳跃多少步才能离开魔鬼之城。\r<br></p> \n\n \n # 输入格式 \n<p>\n　　一行给出N，M(都不超过100)；\r<br>　　下来有M行，每行为N个自然数，表示对应房间中的魔法数字。\r<br></p> \n\n \n # 输出格式 \n<p>\n　　出最小步数，如果探险者无法离开魔鬼之城，请输出“NEVER”。</p> \n\n \n # 提示 \n<p>\n　　广度优先搜索。\r<br>　　将地图中的每个格子(x, y)分离出8个状态，每个状态对应一个方向，即用(x, y, d)表示一个状态，其中，x和y表示位置，d表示上一次行动的方向。扩展的时候，(x, y, d)可以向除d以外的另七个方向扩展。\r<br>　　时间复杂度是O(82×n^2)，即O(n^2)。\r<br></p> "},{"title":"# 样例数据","format":"markdown","require":["katex"],"content":"<style>\n        table,table tr th, table tr td { border:1px solid #0094ff; }\n        table { width: 200px; min-height: 25px; line-height: 25px; text-align: center; border-collapse: collapse;}   \n    </style>\n<table>\n\t<tr>\n\t\t<td>输入样例</td>\n\t\t<td>输出样例</td>\n\t</tr>\n<tr><td>5 4\t\t\t\t\t\t\t\r\n3 3 6 7 11\r\n3 2 1 1 3\r\n3 2 2 1 1\r\n2 1 2 2 1\r\n</td><td>4</td></tr></table>\n\n"}]}