# 

 
 # 题目描述 
<p>
    老师交给小可可一个维护数列的任务，现在小可可希望你来帮他完成。<br>    有长为N的数列，不妨设为a1,a2,…,aN 。有如下三种操作形式：<br>(1)把数列中的一段数全部乘一个值;<br>(2)把数列中的一段数全部加一个值;<br>(3)询问数列中的一段数的和，由于答案可能很大，你只需输出这个数模P的值。<br><br></p> 

 
 # 输入格式 
<p>
第一行两个整数N和P(1≤P≤1000000000）。第二行含有N个非负整数,从左到右依次为a1,a2,…,aN, (0≤ai≤1000000000,1≤i≤N)。第三行有一个整数M，表示操作总数。从第四行开始每行描述一个操作，输入的操作有以下三种形式：<br>操作1：“1 t g c”(不含双引号)。表示把所有满足t≤i≤g的ai改为ai×c (1≤t≤g≤N,0≤c≤1000000000)。<br>操作2：“2 t g c”(不含双引号)。表示把所有满足t≤i≤g的ai改为ai+c (1≤t≤g≤N,0≤c≤1000000000)。<br>操作3：“3 t g”(不含双引号)。询问所有满足t≤i≤g的ai的和模P的值<br>(1≤t≤g≤N)。<br>       同一行相邻两数之间用一个空格隔开，每行开头和末尾没有多余空格。<br><br></p> 

 
 # 输出格式 
<p>
    对每个操作3，按照它在输入中出现的顺序，依次输出一行一个整数表示询问结果。<br><br></p> 

 
 # 提示 
<p>
【样例说明】<br><br>初始时数列为(1,2,3,4,5,6,7)。<br>经过第1次操作后，数列为(1,10,15,20,25,6,7)。<br>对第2次操作，和为10+15+20=45，模43的结果是2。<br>经过第3次操作后，数列为(1,10,24,29,34,15,16}<br>对第4次操作，和为1+10+24=35，模43的结果是35。<br>对第5次操作，和为29+34+15+16=94,模43的结果是8。<br><br><br><br>测试数据规模如下表所示<br><br>数据编号	1	2	3	4	5	6	7	8	9	10<br>N=	10	1000	1000	10000	60000	70000	80000	90000	100000	100000<br>M=	10	1000	1000	10000	60000	70000	80000	90000	100000	100000<br></p> 
# 样例数据
<style>
        table,table tr th, table tr td { border:1px solid #0094ff; }
        table { width: 200px; min-height: 25px; line-height: 25px; text-align: center; border-collapse: collapse;}   
    </style>
<table>
	<tr>
		<td>输入样例</td>
		<td>输出样例</td>
	</tr>
<tr><td>7 43
1 2 3 4 5 6 7
5
1 2 5 5
3 2 4
2 3 7 9
3 1 3
3 4 7

</td><td>2
35
8
</td></tr></table>
