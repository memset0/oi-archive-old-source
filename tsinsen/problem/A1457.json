{"title":"Wizards and Bets","time_limit":3000,"memory_limit":256,"url":"http://www.tsinsen.com/A1457","statement":[{"title":"","format":"html","require":["katex"],"content":"\n<div id=\"pcont1\" style=\"margin-top:20px; display:block;\">\n"},{"title":"# 问题描述","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　一个国家居住着巫师，他们喜欢打奇怪的赌。<br/>\n　　两个巫师画了一张有n个点m条边的有向无环图（图中顶点由1编号到n）。称没有入边的点为源，没有出边的点为汇。注意一个孤立点既是源也是汇。在这张图当中，源和汇的数目是相同的。<br/>\n　　巫师们把源们按照顶点编号升序重新编号为1-k，把汇们同样编号为1-k。<br/>\n　　为了进行赌博，这两个货真价实的巫师发动咒语，从图中选出k条路径，分别从某个源出发到达某个汇。每个源汇都恰被一条路径覆盖一次，任何路径不在顶点处相交。假设终止于i号汇的路径是由源ai出发的，我们称汇对(i,j)是一个逆序对当且仅当i&lt;j且ai&gt;aj。如果所有汇对(i,j) (1&lt;=i&lt;j&lt;=k)中的逆序对总数是偶数，那么第一个巫师赢得这次赌博，后者必须给他一块钱，否则第二个巫师赢，获得一块钱。<br/>\n　　这两个巫师对赌博是如此地狂热，以至于他们不断地念出咒语来产生新的路径集合。终于，所有可能的路径集合都被产生过恰好一次。两个路径集合被认为是不同的，当且仅当存在一条边，出现在前一个集合的某条路径中，而在后一个集合中不出现。<br/>\n　　为了兑现赌注，请你算出第一个巫师的净收入，答案模一个素数p。</div>"},{"title":"# 输入格式","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　第一行三个整数n,m,p，保证p是一个素数。<br/>\n　　接下来m行，每行两个整数u,v，表示图中存在一条从u到v的边。数据保证图中无环，并且源与汇的数目相同。注意可能出现重边。</div>"},{"title":"# 输出格式","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　一行一个整数，最后第一个巫师的净收入模p。注意他的收入虽然有可能为负，答案总是一个非负的整数。</div>"},{"title":"# 样例输入","format":"html","require":["katex"],"content":"\n<div class=\"pddata\">#1<br/>\n4 2 1000003<br/>\n1 3<br/>\n2 4<br/>\n<br/>\n<br/>\n#2<br/>\n4 2 1000003<br/>\n4 1<br/>\n3 2<br/>\n<br/>\n<br/>\n#3<br/>\n4 4 1000003<br/>\n2 1<br/>\n2 4<br/>\n3 1<br/>\n3 4<br/>\n<br/>\n<br/>\n#4<br/>\n5 2 1000003<br/>\n5 1<br/>\n3 4</div>"},{"title":"# 样例输出","format":"html","require":["katex"],"content":"\n<div class=\"pddata\">#1<br/>\n1<br/>\n<br/>\n<br/>\n#2<br/>\n1000002<br/>\n<br/>\n<br/>\n#3<br/>\n0<br/>\n<br/>\n<br/>\n#4<br/>\n0<br/>\n<br/>\n<br/>\n#5<br/>\n1</div>"},{"title":"# 数据规模和约定","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　对于10%的数据，n=5<br/>\n　　对于50%的数据，n&lt;=300<br/>\n　　对于100%的数据，n&lt;=600，m&lt;=10^5，2&lt;=p&lt;=10^9+7<br/>\n<br/>\n　　之前的数据有问题..非常抱歉&gt;&lt;</div>\n\n</div>\n"}]}