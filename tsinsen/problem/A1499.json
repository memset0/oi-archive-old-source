{"title":"Theresa与数据结构（罗剑桥）","time_limit":2000,"memory_limit":512,"url":"http://www.tsinsen.com/A1499","statement":[{"title":"","format":"html","require":["katex"],"content":"\n<div id=\"pcont1\" style=\"margin-top:20px; display:block;\">\n"},{"title":"问题描述","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　这是个复杂的世界。人类社会，自然界，还有地球之外的银河……<br/>\n　　……<br/>\n　　每一天日出日落，人来人往，步履匆匆。究竟是为什么呢？那支配着一切的至高无上的法则又是否存在呢？Theresa知道，这个问题并不是一朝一夕就可以解答的，只有在仔细、深入的观察和思考以后，才有可能将所有支离破碎的线索联系起来，从而隐约窥见真实的答案。<br/>\n　　……<br/>\n　　于是，Theresa经常思考生活中遇到的大大小小的问题。为什么港台出版的书籍里印刷的汉字她一个也不认识呢？为什么隔夜的白开水中富含一氧化二氢呢？为什么每年都有一段时间<i>Gmail</i>邮箱上不去呢？<br/>\n　　……<br/>\n　　为了更加系统、科学地分析这些问题，Theresa决定向你求助。<br/>\n　　……<br/>\n　　长话短说，Theresa想请你帮助她实现一个数据结构。这个数据结构的功能是在<b>空间直角坐标系</b>中维护一个<b>点的集合</b>，并支持以下三类操作：<br/>\n　　……<br/>\n　　<i>1.      </i><i>ADD x y z</i>             加入一个新的点，点的坐标为(<i>x, y, z</i>)。<br/>\n　　<i>2.      </i><i>QUERY x y z r     </i>查询在正方体(<i>x, y, z</i>) - (<i>x+r, y+r, z+r</i>)内部的点的数目。<br/>\n　　<i>3.      </i><i>CANCEL</i>              撤销最近的一次<i>ADD</i>操作。<br/>\n　　……<br/>\n　　其中<i>x, y, z, r</i>均为给出的整数。<i>QUERY</i>操作中，(<i>x, y, z</i>)为正方体的一个顶点的坐标，<i>r</i>为正方体的边长。在正方体<b>边界上的点也算在正方体内部</b>。<br/>\n　　……<br/>\n　　这个问题可能过于困难，所以Theresa并不强迫你实现一个高效的数据结构。然而，你必须对每一次<i>QUERY</i>操作给出正确的答案。</div>"},{"title":"输入格式","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　第一行包含一个整数<i>N</i>，表示最初的点集有<i>N</i>个点。<br/>\n　　接下来<i>N</i>行，每行包含三个整数<i>x<sub>i</sub></i>、<i>y<sub>i</sub></i>、<i>z<sub>i</sub></i>，依次表示每个点的坐标。<br/>\n　　第<i>N+2</i>行包含一个整数<i>Q</i>，表示将有<i>Q</i>次操作。<br/>\n　　接下来<i>Q</i>行，每行表示一次操作，格式如题目描述。</div>"},{"title":"输出格式","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　输出若干行，每行一个整数，依次表示每次查询操作的答案。</div>"},{"title":"样例输入","format":"html","require":["katex"],"content":"\n<div class=\"pddata\">2<br/>\n1 2 3<br/>\n1 1 3<br/>\n7<br/>\nADD 0 4 3<br/>\nQUERY 0 0 0 4<br/>\nADD 1 1 5<br/>\nQUERY 1 1 2 3<br/>\nQUERY 0 2 2 1<br/>\nCANCEL<br/>\nQUERY 1 1 2 3</div>"},{"title":"样例输出","format":"html","require":["katex"],"content":"\n<div class=\"pddata\">3<br/>\n3<br/>\n1<br/>\n2</div>"},{"title":"样例说明","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　第<i>1</i>次查询正方体(<i>0, 0, 0</i>) - (<i>4, 4, 4</i>)，内部包含点(<i>1, 2, 3</i>)，(<i>1, 1, 3</i>)，(<i>0, 4, 3</i>)。<br/>\n　　第<i>2</i>次查询正方体(<i>1, 1, 2</i>) - (<i>4, 4, 5</i>)，内部包含点(<i>1, 2, 3</i>)，(<i>1, 1, 3</i>)，(<i>1, 1, 5</i>)。<br/>\n　　第<i>3</i>次查询正方体(<i>0, 2, 2</i>) - (<i>1, 3, 3</i>)，内部包含点(<i>1, 2, 3</i>)。<br/>\n　　第<i>4</i>次查询正方体(<i>1, 1, 2</i>)<i> </i>- (<i>4, 4, 5</i>)，内部包含点(<i>1, 2, 3</i>)，(<i>1, 1, 3</i>)。</div>"},{"title":"数据规模和约定","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　<i>       </i>对于<i>10%</i>的数据：<i>1 </i><i>≤</i><i> N, Q </i><i>≤</i><i> 1 000</i>。<br/>\n　　此外<i>10%</i>的数据：<i>0 </i><i>≤</i><i> x, y, z </i><i>≤</i><i> 100</i>，<i>1 </i><i>≤</i><i> r </i><i>≤</i><i> 100</i>。<i></i><br/>\n　　此外<i>30%</i>的数据：没有<i>ADD</i>操作和<i>CANCEL</i>操作。<br/>\n　　此外<i>20%</i>的数据：没有<i>CANCEL</i>操作。<i></i><br/>\n　　以上<i>70%</i>的数据：<i>1 </i><i>≤</i><i> N, Q </i><i>≤</i><i> 50 000</i><i>。</i><i></i><br/>\n　　对于<i>100%</i>的数据：<i>1 ≤ N + Q ≤ 100 000</i>，<i> 0 ≤ x, y, z, r ≤ 10<sup>7</sup></i>。<i>r</i> 为正整数。所有的<i>CANCEL</i>操作均为有效操作。不同的点的坐标可能重合。</div>\n\n</div>\n"}]}