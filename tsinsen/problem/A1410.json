{"title":"Hercule Poirot Problem","time_limit":3000,"memory_limit":256,"url":"http://www.tsinsen.com/A1410","statement":[{"title":"","format":"html","require":["katex"],"content":"\n<div id=\"pcont1\" style=\"margin-top:20px; display:block;\">\n"},{"title":"# 题目背景","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　今天你要去处理一个连著名的Hercule Poirot也无法应对的问题！正因为Hercule Poirot也无法应对，这起案件的真相仍未水落石出，这个故事也从没被纳入过Agatha Christie的侦探故事书。</div>"},{"title":"# 问题描述","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　你并不知道到底发生了什么、具体在哪里发生、更不可能知道尸体在哪里。我们只知道案件发生在一个房子里，房子里有n个房间，有m扇门，每扇门连接两个房间。房子里的的居民非常可疑，所以所有的门都有钥匙、而所有的钥匙都互不相同。根据星期四晚上目击证人提供的证据可知：房子里所有的门都是关着的，而且还知道那时居民所在的房间以及他们各自拥有哪些门的钥匙。同样，星期五晚上的情况也被告知，而且门也是关着的。<br/>\n　　星期五那天下着大雨，所有没有其他人从外面进入房子，也没有人从房子里出去。在这一天里，居民们可以不限次数地进行以下操作：<br/>\n　　1.如果他有对应的钥匙，打开或者关闭他所在房间到隔壁房间的门（每扇门可以从两边打开或关闭）；<br/>\n　　2.如果门是开着的，从一个房间走到相邻的房间；<br/>\n　　3.将任意数量的钥匙交给在同一个房间里的其他居民；<br/>\n　　被称为&#34;Little grey matter&#34;的Hercule Poirot不能一次性处理这么多信息。要求你根据星期四晚上居民的位置和居民拥有的钥匙情况判断星期五晚上的情况是否是符合实际的，否则就是某个目击证人撒了谎。</div>"},{"title":"# 输入格式","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　第一行包含3个用空格隔开正整数n, m, k (1 ≤ n, m, k ≤ 1000) ,分别表示房间、门、居民的数量。<br/>\n　　接下来m行，每行两个正整数a、b，表示有一扇门连接a、b两个房间，房间由1到n编号；数据保证两个房间之间最多只有一扇门，并且不会有房间与自己相连。<br/>\n　　接下来k行，每行描述了星期四晚上一个居民的信息。每行开始有一个仅由大小写字母组成的字符串（字符串长度不超过10，区分大小写），接下来一个数表示居民所在的房间编号，再接下来一个数表示他拥有的钥匙数num，最后num个数表示居民拥有哪些门的钥匙，门按照读入顺序从1到m编号；字符串、数字之间用一个空格隔开；数据保证不会有两个人名字相同，而且所有门的钥匙有且仅有一把；输入没有多余的空格和换行符。<br/>\n　　接下来k行，每行描述了星期五晚上一个居民的信息。格式与星期四晚上的描述一致，数据保证星期四描述的居民恰好被描述一次，但顺序可能不同，同样，所有门的钥匙有且仅有一把。</div>"},{"title":"# 输出格式","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　如果根据星期四晚上居民的位置和居民拥有的钥匙情况判断星期五晚上的情况是符合实际的则输出&#34;YES&#34;（不含引号），否则输出&#34;NO&#34;（不含引号）。</div>"},{"title":"# 样例输入","format":"html","require":["katex"],"content":"\n<div class=\"pddata\">2 1 2<br/>\n1 2<br/>\nDmitry 1 1 1<br/>\nNatalia 2 0<br/>\nNatalia 1 1 1<br/>\nDmitry 2 0</div>"},{"title":"# 样例输出","format":"html","require":["katex"],"content":"\n<div class=\"pddata\">YES</div>"},{"title":"# 样例输入","format":"html","require":["katex"],"content":"\n<div class=\"pddata\">4 4 3<br/>\n1 3<br/>\n1 2<br/>\n2 3<br/>\n3 4<br/>\nArtem 1 1 4<br/>\nDmitry 1 1 2<br/>\nEdvard 4 2 1 3<br/>\nArtem 2 0<br/>\nDmitry 1 0<br/>\nEdvard 4 4 1 2 3 4</div>"},{"title":"# 样例输出","format":"html","require":["katex"],"content":"\n<div class=\"pddata\">NO</div>"},{"title":"# 样例输入","format":"html","require":["katex"],"content":"\n<div class=\"pddata\">5 3 1<br/>\n1 2<br/>\n2 4<br/>\n4 5<br/>\nAddf 1 1 2 3<br/>\nAddf 3 1 2 3</div>"},{"title":"# 样例输出","format":"html","require":["katex"],"content":"\n<div class=\"pddata\">NO</div>"},{"title":"# 数据规模和约定","format":"html","require":["katex"],"content":"\n<div class=\"pdcont\">　　对于10%的数据1 ≤ n, m, k ≤ 5；<br/>\n　　对于20%的数据1 ≤ n, m, k ≤ 20；<br/>\n　　对于40%的数据1 ≤ n, m, k ≤ 100；<br/>\n　　对于60%的数据1 ≤ n, m, k ≤ 300；<br/>\n　　对于100%的数据1 ≤ n, m, k ≤ 1000；</div>\n\n</div>\n"}]}