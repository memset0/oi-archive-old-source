{"title":"「余姚中学 2019 联测 Day 3」商店                              ","time_limit":1000,"memory_limit":512,"url":"https://guoj.icu/problem/1083","statement":[{"title":"# 题目描述","format":"markdown","require":["katex"],"content":"\n你在经营一家商店。\r\n\r\n商店里有 $N$ 件商品，标号为 $0..N-1$，商品 $i$ 的价格也是 $i$ 单位。\r\n\r\n商品的放置可以用一棵树来描述，其中 $0$ 为根，商品 $i$ 的父亲为 $P_i$。\r\n\r\n已知今天有 $M$ 位顾客要来买东西，其中第 $i$ 位顾客只愿意购买以 $C_i$ 为根的子树里的商品(包括 $C_i$)。\r\n\r\n一位顾客只愿意买至多一件商品，同时一件商品也只能卖给至多一位顾客。\r\n\r\n请问你卖出的商品的价格之和最大的多少？\n"},{"title":"# 输入格式","format":"markdown","require":["katex"],"content":"\n第一行两个整数 $N,M$。\r\n\r\n第二行 $N-1$ 个数表示 $P_{1..N-1}$。\r\n\r\n第三行 $M$ 个数表示 $C_{1..M}$。\n"},{"title":"# 输出格式","format":"markdown","require":["katex"],"content":"\n一个数表示答案。\n"},{"title":"# 样例","format":"markdown","require":["katex"],"content":"\n#### 样例输入\r\n```plain\r\n4 3\r\n3 0 0\r\n2 0 2\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n5\r\n```\r\n#### 样例解释\r\n你可以将商品 $2$ 卖给顾客 $1$，商品 $3$ 卖给顾客 $2$，不卖任何商品给顾客 $3$。此时可以取到最大值 $2+3=5$。\r\n\n"},{"title":"# 数据范围与提示","format":"markdown","require":["katex"],"content":"\n- 对于所有数据，$1 \\leq N \\leq 3 \\times 10^6,1\\leq M \\leq 3 \\times 10^6,0\\leq P_i,C_i <N$，保证 $P_i$ 描述了一棵以 $0$ 根的树。\r\n- subtask1(10pts):$N \\leq 2000$\r\n- subtask2(20pts):$N \\leq 10^5$\r\n- subtask3(30pts):$N \\leq 5 \\times 10^5$\r\n- subtask4(40pts):无额外限制。\r\n\r\n命题人：kcz\n\n\n"}]}