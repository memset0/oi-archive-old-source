{"title":"「NOI2002」银河英雄传说                              ","time_limit":1000,"memory_limit":128,"url":"https://guoj.icu/problem/1223","statement":[{"title":"题目描述","format":"markdown","require":["katex"],"content":"\n公元五八○一年，地球居民迁移至金牛座 $\\alpha$ 第二行星，在那里发表银河联邦创立宣言，同年改元为宇宙历元年，并开始向银河系深处拓展。\r\n\r\n宇宙历七九九年，银河系的两大军事集团在巴米利恩星域爆发战争。泰山压顶集团派宇宙舰队司令莱因哈特率领十万余艘战舰出征，气吞山河集团点名将*杨威利*组织麾下三万艘战舰迎敌。\r\n\r\n杨威利擅长排兵布阵，巧妙运用各种战术屡次以少胜多，难免恣生骄气。在这次决战中，他将巴米利恩星域战场划分成 $30000$ 列，每列依次编号为 $1, 2,\\ldots,30000$。之后，他把自己的战舰也依次编号为 $1, 2,\\ldots,30000$，让第 $i$ 号战舰处于第 $i$ 列 $(i=1,2,\\ldots,30000)$，形成“一字长蛇阵”，诱敌深入。这是初始阵形。当进犯之敌到达时，杨威利会多次发布合并指令，将大部分战舰集中在某几列上，实施密集攻击。合并指令为 `M i j`，含义为让第 $i$ 号战舰所在的整个战舰队列，作为一个整体（头在前尾在后）接至第 $j$ 号战舰所在的战舰队列的尾部。显然战舰队列是由处于同一列的一个或多个战舰组成的。合并指令的执行结果会使队列增大。\r\n\r\n然而，老谋深算的莱因哈特早已在战略上取得了主动。在交战中，他可以通过庞大的情报网络随时监听杨威利的舰队调动指令。\r\n\r\n在杨威利发布指令调动舰队的同时，莱因哈特为了及时了解当前杨威利的战舰分布情况，也会发出一些询问指令：`C i j`。该指令意思是，<u><i>询问电脑，杨威利的第 $i$ 号战舰与第 $j$ 号战舰当前是否在同一列中，如果在同一列中，那么它们之间布置有多少战舰。</i></u>\r\n\r\n作为一个资深的高级程序设计员，你被要求编写程序分析杨威利的指令，以及回答莱因哈特的询问。\r\n\r\n最终的决战已经展开，银河的历史又翻过了一页……\n"},{"title":"输入格式","format":"markdown","require":["katex"],"content":"\n输入数据的第一行有一个整数 $T$，表示总共有 $T$ 条指令。\r\n\r\n以下有 $T$ 行，每行有一条指令。指令有两种格式：\r\n\r\n1. `M i j`：$i$ 和 $j$ 是两个整数，表示指令涉及的战舰编号。该指令是莱因哈特窃听到的杨威利发布的舰队调动指令，并且保证第 $i$ 号战舰与第 $j$ 号战舰不在同一列。\r\n2. `C i j`：$i$ 和 $j$ 是两个整数，表示指令涉及的战舰编号。该指令是莱因哈特发布的询问指令。\n"},{"title":"输出格式","format":"markdown","require":["katex"],"content":"\n你的程序应当依次对输入的每一条指令进行分析和处理：\r\n\r\n如果是杨威利发布的舰队调动指令，则表示舰队排列发生了变化，你的程序要注意到这一点，但是不要输出任何信息；\r\n\r\n如果是莱因哈特发布的询问指令，你的程序要输出一行，仅包含一个整数，表示在同一列上，第 $i$ 号战舰与第 $j$ 号战舰之间布置的战舰数目。如果第 $i$ 号战舰与第 $j$ 号战舰当前不在同一列上，则输出 $-1$。\n"},{"title":"样例","format":"markdown","require":["katex"],"content":"\n#### 样例输入\r\n```plain\r\n4\r\nM 2 3\r\nC 1 2\r\nM 2 4\r\nC 4 2\r\n```\r\n#### 样例输出\r\n```plain\r\n-1\r\n1\r\n```\r\n#### 样例解释\r\n||第一列|第二列|第三列|第四列|……|\r\n|:-:|:-:|:-:|:-:|:-:|:-:|\r\n|初始时|$1$<!---->|$2$|$3$|$4$|……|\r\n|`M 2 3`|$1$||$3\\\\2$|$4$<!---->|……<!---->|\r\n|`C 1 2`|$1$ 号战舰与 $2$ 号战舰不在同一列，因此输出 $-1$|$1$ 号战舰与 $2$ 号战舰不在同一列，因此输出 $-1$|$1$ 号战舰与 $2$ 号战舰不在同一列，因此输出 $-1$|$1$ 号战舰与 $2$ 号战舰不在同一列，因此输出 $-1$|$1$ 号战舰与 $2$ 号战舰不在同一列，因此输出 $-1$|\r\n|`M 2 4`|$1$||<!---->|$4\\\\3\\\\2$|……|\r\n|`C 4 2`|$4$ 号战舰与 $2$ 号战舰之间仅布置了一艘战舰，编号为 $3$，输出 $1$|$4$ 号战舰与 $2$ 号战舰之间仅布置了一艘战舰，编号为 $3$，输出 $1$|$4$ 号战舰与 $2$ 号战舰之间仅布置了一艘战舰，编号为 $3$，输出 $1$|$4$ 号战舰与 $2$ 号战舰之间仅布置了一艘战舰，编号为 $3$，输出 $1$|$4$ 号战舰与 $2$ 号战舰之间仅布置了一艘战舰，编号为 $3$，输出 $1$|\n"},{"title":"数据范围与提示","format":"markdown","require":["katex"],"content":"\n对于所有数据，$1\\le T\\le 500,000$，在所有指令中，$1\\le i,j\\le 30000$。\n\n\n"}]}