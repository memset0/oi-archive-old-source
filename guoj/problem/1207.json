{"title":"「WC2018」通道                              ","time_limit":4000,"memory_limit":1024,"url":"https://guoj.icu/problem/1207","statement":[{"title":"# 题目描述","format":"markdown","require":["katex"],"content":"\n11328 年，C 国的科学家们研发了一种高速传送通道，可以在很短的时间内把居民从通道的一端送往另一端，这些通道都是**双向**的。\r\n\r\n美中不足的是，这种传送通道需要进行大量的维护和检修。经过规划，C 国总统决定在 M 城中新建这种通道，在 M 城中，建立了 $n$ 个传送站和 $3\\times (n-1)$ 条传送通道，这些传送通道被分为 3 组，每一组都包含了 $(n-1)$ 条通道。\r\n\r\n当任意一组通道运行时，居民都可以通过这组通道从任意一个传送站前往任意的另一个传送站。也就是说，所有的传送站都会被通道所连通。\r\n\r\n三组通道按照 1、2、3 的顺序轮流运行，循环反复。在任意一个时刻，都有且只有一组传送通道可以使用。形式化地，在第 $i$ 天中，有且只有第 $((i-1) \\bmod 3 + 1)$ 组通道运行。\r\n\r\nC 国著名科学家 Access Globe 正在进行一项社会调查实验：调查两个传送站之间的传送通道使用者的信息。Access Globe 的计划是这样的：\r\n\r\n- 选定两个传送站 $a$、$b$\r\n- 第一天，他从 $a$ 出发，使用正在运行的这组通道沿最短路径到达 $b$，并调查经过的所有通道上使用者的信息\r\n- 第二天，他从 $b$ 出发，使用正在运行的这组通道沿最短路径到达 $a$，并调查经过的所有通道上使用者的信息\r\n- 第三天，他从 $a$ 出发，使用正在运行的这组通道沿最短路径到达 $b$，并调查经过的所有通道上使用者的信息\r\n\r\nAccess Globe 知道每一条传输线路在运行时的使用者人数。他希望找出一对 $a$、$b$，使得在整个实验过程中所有经过的通道的使用者数量之和最大。Access Globe 希望参加 CCF NOI 2018 冬令营的你帮他解决这个简单的小问题。如果你成功地解决了这个问题，Access Globe 会送你一份小礼物——100 分！\r\n\r\n**新加 Hack 数据两组，可能会卡掉一些错误算法。**\n"},{"title":"# 输入格式","format":"markdown","require":["katex"],"content":"\n从标准输入读入数据。\r\n\r\n输入文件的第 $1$ 行包含一个正整数 $n$，表示传送站的个数，传送站从 $1$ 到 $n$ 编号；\r\n\r\n输入文件的第 $2$ 到第 $n$ 行，每行包含 $3$ 个数 $u,v,w$，表示第一组通道中有一条连接 $u,v$ 的通道，其运行时使用者数量为 $w$ 人；\r\n\r\n输入文件的第 $(n+1)$ 到第 $(2n-1)$ 行，每行包含 $3$ 个数 $u,v,w$，表示第二组通道中有一条连接 $u,v$ 的通道，其运行时使用者数量为 $w$ 人；\r\n\r\n输入文件的第 $2n$ 到第 $(3n-2)$ 行，每行包含 $3$ 个数 $u,v,w$，表示第三组通道中有一条连接 $u,v$ 的通道，其运行时使用者数量为 $w$ 人。\n"},{"title":"# 输出格式","format":"markdown","require":["katex"],"content":"\n输出到标准输出。\r\n\r\n输出文件共 $1$ 行，包含一个整数，表示最大的使用者数量之和。\n"},{"title":"# 样例","format":"markdown","require":["katex"],"content":"\n#### 样例输入 1\r\n\r\n```plain\r\n5\r\n1 2 2\r\n1 3 0\r\n1 4 1\r\n4 5 7\r\n1 2 0\r\n2 3 1\r\n2 4 1\r\n2 5 3\r\n1 5 2\r\n2 3 8\r\n3 4 5\r\n4 5 1\r\n```\r\n\r\n\r\n\r\n#### 样例输出 1\r\n\r\n```plain\r\n27\r\n```\r\n\r\n#### 解释\r\n一种可行的方案是选择 $a=2,b=5$，这样的使用者数量之和为 $(3)+(8+5+1)+(2+1+7)=27$。\r\n\n"},{"title":"# 数据范围与提示","format":"markdown","require":["katex"],"content":"\n#### 子任务\r\n\r\n对于所有数据，$2\\le n\\le 10^{5}, 0\\le w\\le 10^{12}$。\r\n\r\n特殊性质 0：任意两组通道构成完全相同。\r\n\r\n特殊性质 1：第二组通道和第三组通道构成完全相同。\r\n\r\n特殊性质 2：对于第二组的每一个传送站，最多只有两个通道可以到达它，且编号为 $x,y$ 的传送站之间通过**一条**通道直接连接充要条件是 $|x-y|=1$。\r\n\r\n特殊性质 3：对于第三组的每一个传送站，最多只有两个通道可以到达它。\r\n\r\n特殊性质 4：$n \\le 3000$。\r\n\r\n| 读入文件名   |  特殊性质   |\r\n| :--: |  :-----: |\r\n|  0.*.in   |     4    |\r\n|  1.*.in   |  0,1,2,3 |\r\n|  2.*.in   |     0,1   |\r\n|  3.*.in   |   1,2,3  |\r\n|  4.*.in   |      1    |\r\n|  5.*.in   |     2,3   |\r\n|  6.*.in   |    3    |\r\n|  7.*.in   |    没有的哦   |\r\n\r\n\r\n\r\n\r\n#### 提示\r\n\r\n- 在两组通道中，可能都包含了连接传送站 $x,y$ 的通道，此时我们认为这两条通道是**不同**的。\r\n\r\n- 特殊性质中，A 组通道和 B 组通道的“构成完全相同”是指：如果在 A 组中 $u,v$ 之间存在一条使用人数为 $w$ 的通道，那么在 B 组中 $u,v$ 之间一定也存在一条使用人数为 $w$ 的通道。是否相同**与描述方式与描述顺序均无关**。即在构成完全相同的两组通道 A 和 B中，**通道输入的顺序不一定相同，每条通道的端点的输入顺序也不一定相同**（对于 A、B 组中一条连接 $u,v$ 的使用人数为 $w$ 的通道，一种可能出现的输入为：A 组通道中输入 $u$ $v$ $w$，而 B 组通道中输入 $v$ $u$ $w$）。\n\n\n"}]}