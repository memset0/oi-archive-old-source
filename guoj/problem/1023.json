{"title":"「模板」二逼平衡树                              ","time_limit":4000,"memory_limit":512,"url":"https://guoj.icu/problem/1023","statement":[{"title":"题目描述","format":"markdown","require":["katex"],"content":"\n这是一道模板题。\r\n\r\n您需要写一种数据结构（可参考题目标题），来维护一个有序数列，其中需要提供以下操作：\r\n\r\n1. 查询 $ x $ 在区间内的排名；\r\n2. 查询区间内排名为 $ k $ 的值；\r\n3. 修改某一位置上的数值；\r\n4. 查询 $ x $ 在区间内的前趋（前趋定义为小于 $ x $，且最大的数）；\r\n5. 查询 $ x $ 在区间内的后继（后继定义为大于 $ x $，且最小的数）。\n"},{"title":"输入格式","format":"markdown","require":["katex"],"content":"\n第一行两个数 $ n, m $，表示长度为 $ n $ 的有序序列和 $ m $ 个操作。  \r\n第二行有 $ n $ 个数，表示有序序列。  \r\n\r\n下面有 $ m $ 行，每行第一个数表示操作类型：\r\n\r\n1. 之后有三个数 $ l, r, x $ 表示查询 $ x $ 在区间 $ [l, r] $ 的排名；\r\n2. 之后有三个数 $ l, r, k $ 表示查询区间 $ [l, r] $ 内排名为 $ k $ 的数；\r\n3. 之后有两个数 $ \\mathrm{pos}, x $ 表示将 $ \\mathrm{pos} $ 位置的数修改为 $ x $；\r\n4. 之后有三个数 $ l, r, x $ 表示查询区间 $ [l, r] $ 内 $ x $ 的前趋；\r\n5. 之后有三个数 $ l, r, x $ 表示查询区间 $ [l, r] $ 内 $ x $ 的后继。\n"},{"title":"输出格式","format":"markdown","require":["katex"],"content":"\n对于操作 $ 1, 2, 4, 5 $ 各输出一行，表示查询结果。\n"},{"title":"样例","format":"markdown","require":["katex"],"content":"\n#### 样例输入\r\n```plain\r\n9 6\r\n4 2 2 1 9 4 0 1 1\r\n2 1 4 3\r\n3 4 10\r\n2 1 4 3\r\n1 2 5 9\r\n4 3 9 5\r\n5 2 8 5\r\n```\r\n\r\n#### 样例输出\r\n```plain\r\n2\r\n4\r\n3\r\n4\r\n9\r\n```\n"},{"title":"数据范围与提示","format":"markdown","require":["katex"],"content":"\n$ 1 \\leq n, m \\leq 5 \\times 10 ^ 4, -10 ^ 8 \\leq k, x \\leq 10 ^ 8 $\n\n\n"}]}