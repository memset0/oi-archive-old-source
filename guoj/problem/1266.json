{"title":"「模板」基础二维计算几何                              ","time_limit":3000,"memory_limit":512,"url":"https://guoj.icu/problem/1266","statement":[{"title":"# 题目描述","format":"markdown","require":["katex"],"content":"\n因为不知道如何处理精度问题并且出题人退役了，所以鸽了\r\n\r\n这是一道模板题。\r\n\r\n你将得到 $n$ 个询问，每个询问的格式如下\r\n\r\n特别的，为了方便，我们把询问分成了三大类\r\n\r\n- 类型 $1$\r\n\r\n  询问与**向量**有关的操作，询问格式如下\r\n\r\n  <code>1 op vec<sub>1</sub> (vec<sub>2</sub>) θ...</code> 其中 $1$ 表示类型 $1$ ，$op$ 表示类型 $1$ 的询问类型标号，$vec_1,vec_2,\\theta,\\dots$ 表示对相关操作的描述，相关操作如下\r\n\r\n  - 向量正交(垂直)  \r\n    <code>1 1 x<sub>1</sub> y<sub>1</sub> x<sub>2</sub> y<sub>2</sub></code>  \r\n    其中 $(x_1,y_1)$ ，$(x_2,y_2)$ 是以坐标形式给出的两个向量，若这两个向量垂直，输出 $1$ ，否则输出 $0$  \r\n    \r\n  - 向量平行  \r\n  <code>1 2 x<sub>1</sub> y<sub>1</sub> x<sub>2</sub> y<sub>2</sub></code>  \r\n    其中 $(x_1,y_1)$ ，$(x_2,y_2)$ 是以坐标形式给出的两个向量，若这两个向量平行，输出 $1$ ，否则输出 $0$\r\n    \r\n  - 向量夹角  \r\n    <code>1 3 x<sub>1</sub> y<sub>1</sub> x<sub>2</sub> y<sub>2</sub></code>  \r\n  其中 $(x_1,y_1)$ ，$(x_2,y_2)$ 是以坐标形式给出的两个向量，你需要以弧度制输出两个向量的夹角\r\n    \r\n  - 旋转向量  \r\n    <code>1 4 x<sub>1</sub> y<sub>1</sub> θ</code>  \r\n    其中 $(x_1,y_1)$ 是以坐标形式给出的一个向量，$\\theta$ 是以角度制下给出的一个角，你需要输出此向量**逆**时针旋转角度 $\\theta$ 后的向量\r\n    \r\n  - 单位法向量  \r\n    <code>1 5 x<sub>1</sub> y<sub>1</sub></code>  \r\n    其中 $(x_1,y_1)$ 是以坐标形式给出的一个向量，你需要输出在此向量左侧，与此向量垂直且模长为 $1$ 的法向量\r\n  \r\n- 类型 $2$\r\n\r\n  询问与**点，直线，线段**有关的操作，询问格式如下\r\n\r\n  `2 op (point) line (line) typ` 其中 $2$ 表示类型 $2$ ，$op$ 表示类型 $2$ 的询问类型标号，$point,line,typ$ 表示对相关操作的描述，相关操作如下\r\n\r\n  - 点在直线/线段上  \r\n    <code>2 1 x<sub>1</sub> y<sub>1</sub> x<sub>2</sub> y<sub>2</sub> x<sub>3</sub> y<sub>3</sub> 0/1</code>  \r\n    其中 $(x_1,y_1)$ 是以坐标形式给出的一个点，$(x_2,y_2),(x_3,y_3)$ 是以端点形式给出的直线或线段，若最后类型为 $0$ ，表示给出的是一条直线，若最后类型为 $1$ ，表示给出的是一条线段\r\n    你需要回答点是否在直线/线段上，若在，输出 $1$ ，否则输出 $0$\r\n    \r\n  - 点到直线/线段距离  \r\n    <code>2 2 x<sub>1</sub> y<sub>1</sub> x<sub>2</sub> y<sub>2</sub> x<sub>3</sub> y<sub>3</sub> 0/1</code>  \r\n    其中 $(x_1,y_1)$ 是以坐标形式给出的一个点，$(x_2,y_2),(x_3,y_3)$ 是以端点形式给出的直线或线段，若最后类型为 $0$ ，表示给出的是一条直线，若最后类型为 $1$ ，表示给出的是一条线段\r\n    你需要输出点离直线/线段的距离\r\n    \r\n  - 直线/线段的交点  \r\n    <code>2 3 x<sub>1</sub> y<sub>1</sub> x<sub>2</sub> y<sub>2</sub> x<sub>3</sub> y<sub>3</sub> x<sub>4</sub> y<sub>4</sub> 0/1</code>  \r\n    其中 $(x_1,y_1),(x_2,y_2)$ 和 $(x_3,y_3),(x_4,y_4)$ 是以端点形式给出的直线或线段，若最后类型为 $0$ ，表示给出的**全**是直线，若最后类型为 $0$ ，表示给出的**全**为线段  \r\n    你需要输出直线/线段的交点，特别的，若无交点，输出 `No solution`\r\n  \r\n- 类型 $3$\r\n\r\n  询问与**直线，圆**有关的操作，询问格式如下\r\n\r\n  `3 op (point) (line) crc crc`  其中 $3$ 表示类型 $3$ ，$op$ 表示类型 $3$ 的询问类型标号，$point,line,crc$ 表示对相关操作的描述，相关操作如下\r\n\r\n  - 直线与圆的关系  \r\n    <code>3 1 x<sub>1</sub> y<sub>1</sub> x<sub>2</sub> y<sub>2</sub> x<sub>3</sub> y<sub>3</sub> r</code>  \r\n    其中 $(x_1,y_1),(x_2,y_2)$ 是以端点形式给出的直线，$(x_3,y_3),r$ 是以圆心和半径的形式给出的圆，你需要输出它们之间的 $0$ 到 $2$ 个交点坐标\r\n  - 圆和圆和位置关系  \r\n    <code>3 2 x<sub>1</sub> y<sub>1</sub> r<sub>1</sub> x<sub>2</sub> y<sub>2</sub> r<sub>2</sub></code>  \r\n    $(x_1,y_1),r_1$ 和 $(x_2,y_2),r_2$ 是以圆心和半径的形式给出的圆，你需要输出它们之间的 $0$ 到 $2$ 个交点坐标  \r\n  - 点到圆的切线  \r\n    <code>3 3 x<sub>1</sub> y<sub>1</sub> x<sub>2</sub> y<sub>2</sub> r</code>  \r\n    其中 $(x_1,y_1)$ 是以坐标形成给出的点，$(x_2,y_2),r$ 是以圆心和半径的形式给出的圆，你需要输出 $0$ 到 $2$ 个直线来描述这个点到圆的切线\r\n  - 两个圆的公切线  \r\n    <code>3 4 x<sub>1</sub> y<sub>1</sub> r<sub>1</sub> x<sub>2</sub> y<sub>2</sub> r<sub>2</sub></code>  \r\n    $(x_1,y_1),r_1$ 和 $(x_2,y_2),r_2$ 是以圆心和半径的形式给出的圆，你需要输出 $0$ 到 $4$ 个直线来描述两个圆的公切线  \r\n  \r\n  对于每一个输出，你需要首先输出一行一个整数，表示合法的点/直线的个数\r\n  \r\n  接下来的若干行，每行输出一个点/直线\r\n  \r\n  其中点以坐标的形式给出，直线以直线上任意两个不同点的形式给出\n"},{"title":"# 输入格式","format":"markdown","require":["katex"],"content":"\n第一行一个整数 $n$ 表示询问个数\r\n\r\n剩下 $n$ 行按照题目描述中给出\n"},{"title":"# 输出格式","format":"markdown","require":["katex"],"content":"\n对于每个询问，按题目描述中输出\n"},{"title":"# 样例","format":"markdown","require":["katex"],"content":"\n**样例 1 输入**\r\n```plain\r\n5\r\n1 1 2 1 -1 2\r\n1 2 1 3 -2 -6\r\n1 3 2 1 1 3\r\n1 4 2 0 60\r\n1 5 2 2\r\n```\r\n\r\n**样例 1 输出**\r\n```plain\r\n1\r\n1\r\n0.78539816\r\n1.00000000 1.73205080\r\n-0.70710678 -0.70710678\r\n```\r\n\r\n**样例 2 输入**\r\n```plain\r\n8\r\n2 1 0 2 6 5 4 4 0\r\n2 1 13 0 10 2 7 4 1\r\n2 2 7 5 9 2 3 4 0\r\n2 2 5 4 2 1 3 4 1\r\n2 3 2 1 3 4 7 1 5 4 0\r\n2 3 2 1 3 4 7 1 5 4 1\r\n2 3 0 -4 6 -2 2 -2 4 -4 1\r\n2 3 0 2 6 4 4 1 7 2 1\r\n```\r\n\r\n**样例 2 输出**\r\n```plain\r\n1\r\n0\r\n2.21359436\r\n2.00000000\r\n3.66666667 6.00000000\r\nNo solution\r\n3.00000000 -3.00000000\r\nNo solution\r\n```\r\n\r\n**样例 3 输入**\r\n```plain\r\n11\r\n3 2 -1 0 2 2 2 3\r\n3 2 0 0 3 1 0 2\r\n3 2 10 0 12 2 2 2\r\n3 1 0 6 5 0 1 2 3\r\n3 1 1 0 1 5 -1 0 2\r\n3 3 4 2 2 4 2\r\n3 3 3 4 0 0 5\r\n3 4 0 2 4 2 2 2\r\n3 4 0 0 3 5 0 2\r\n3 4 1 2 2 4 2 2\r\n3 4 1 0 2 7 0 3\r\n```\r\n\r\n**样例 3 输出**\r\n```plain\r\n2\r\n0.84615385 -0.76923077\r\n-1.00000000 2.00000000\r\n1\r\n3.00000000 0.00000000\r\n0\r\n2\r\n3.91707330 1.29951204\r\n0.83702506 4.99556992\r\n1 \r\n1.00000000 0.00000000\r\n2\r\n4.00000000 2.00000000 1.00000000 2.00000000\r\n4.00000000 2.00000000 4.00000000 5.00000000\r\n1 \r\n3.00000000 4.00000000 2.20000000 4.60000000\r\n1\r\n4.00000000 2.00000000 4.00000000 3.00000000\r\n3\r\n5.40000000 -1.95959179 0.50102051 -2.95959179\r\n5.40000000 1.95959179 0.50102051 2.95959179\r\n3.00000000 0.00000000 3.00000000 1.00000000\r\n2\r\n4.00000000 0.00000000 1.00000000 0.00000000\r\n4.00000000 4.00000000 1.00000000 4.00000000\r\n4\r\n0.66666667 1.97202659 6.58274645 2.97202659\r\n0.66666667 -1.97202659 6.58274645 -2.97202659\r\n4.50000000 1.65831240 7.81662479 6.65831240\r\n4.50000000 -1.65831240 7.81662479 -6.65831240\r\n```\n"},{"title":"# 数据范围与提示","format":"markdown","require":["katex"],"content":"\n$1\\le n\\le 10^5$\r\n\r\n保证所有输入是整数，且满足 $\\le |10^8|$\r\n\r\n输入中的角度 $\\theta$ 为角度制且满足 $\\in[0,360)^{\\circ}$\r\n\r\n你的答案与标准答案的绝对误差不超过 $10^{-5}$ 算作正确\r\n\r\n|测试点编号|$op\\in$|$n$|\r\n|:-:|:-:|:-:|\r\n|$1$|$\\{1\\}$|$20$|\r\n|$2$|$\\{1\\}$|$2000$|\r\n|$3$|$\\{1\\}$|$10^5$|\r\n|$4$|$\\{2\\}$|$20$|\r\n|$5$|$\\{2\\}$|$2000$|\r\n|$6$|$\\{2\\}$|$10^5$|\r\n|$7$|$\\{3\\}$|$20$|\r\n|$8$|$\\{3\\}$|$2000$|\r\n|$9$|$\\{3\\}$|$10^5$<!---->|\r\n|$10$|$\\{1,2,3\\}$|$10^5$|\n\n\n"}]}