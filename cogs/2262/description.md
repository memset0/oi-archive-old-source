# 题目描述


<h3>
【题目描述】
</h3>
<p>
曾经想征服全世界，到最后回首才发现，这世界滴滴点点全部都是你 ---序言
</p>
<p>
在阿凯蒂王子的布局下，全国的各个城市都混入了他的耳目，反攻就在眼前
</p>
<p>
但是他的叔父也有所察觉，在城市之间秘密的建立了城市联盟
</p>
<p>
整个国家是一棵树，每个城市就是树上的一个节点，根节点是1也就是首都
</p>
<p>
如果城市i和城市j要建立城市联盟，那么首先要满足i&lt;j且i到根节点的距离不能超过j到根节点的距离
</p>
<p>
而且为了城市之间不产生矛盾，i的军队数量还要不能超过j的军队数量
</p>
<p>
知己知彼方能百战不殆，阿凯蒂王子希望能知道他的叔父最多能在多少对城市间建立联盟
</p>
<p>
<br/>
</p>
<h3>
【输入格式】
</h3>
<p>
第一行n表示城市数目
</p>
<p>
以下有n个正整数分别表示每个城市的军队数量ai
</p>
<p>
以下有n-1行，每行u，v描述一条边的端点，w描述一条边的边权
</p>
<h3>
【输出格式】
</h3>
<p>
输出最多建立的城市联盟的数量
</p>
<h3>
【样例输入】
</h3>
<p>
<br/>
</p>
<p>
5
</p>
<p>
1 3 1 1 3
</p>
<p>
2 1 115
</p>
<p>
3 1 265
</p>
<p>
4 3 712
</p>
<p>
5 4 548
</p>
<p>
<br/>
</p>
<h3>
【样例输出】
</h3>
<p>
8
</p>
<h3>
【提示】
</h3>
<p>
n&lt;=200000,ai&lt;=n
</p>
<p>
边权&lt;=1000
</p>
<p>
注:反攻前夜，阿凯蒂王子辗转反侧
</p>
<p>
脑子里浮现着三年前的血与火
</p>
<p>
复仇是为了更好的守护
</p>
<p>
守护自己征服天下的梦想，更要守护那个在地牢里生死未卜的那个她
</p>
<p>
(对序言的强行解释）
</p>
<p>
<br/>
</p>
<h3>
【来源】
</h3>
<p>
原创
</p>
