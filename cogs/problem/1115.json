{"title":"[郑州培训2012] 传送门","time_limit":10000,"memory_limit":128,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vzNiSkkkg","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<h2 style=\"text-align:left;\" align=\"left\">\n\t【问题描述】\n</h2>\n<p>\n\t<span>       </span><a name=\"OLE_LINK1\"></a><a name=\"OLE_LINK2\"></a>传送门是一个非常有趣的解谜游戏，你位于一个N行M列的迷宫中，这个迷宫有一个宝藏，你希望用尽可能少的移动得到宝藏。\n</p>\n<p>\n\t       你可以移动到相邻的四个格子中的空格，或者利用传送门来移动。具体来说，你有一把激光枪，它可以创造两种传送门，黄色传送门和蓝色传送门。每次你可以朝东南西北中的某个方向发射一个能量球，当它击中第一个障碍时会消失并在被击中处形成一个传送门（能量球击中宝藏会直接穿过去）。\n</p>\n<p>\n\t       <a name=\"OLE_LINK4\"></a><a name=\"OLE_LINK3\"></a>当且仅当创造了黄色传送门和蓝色传送门之后，你可以进入其中任意一个传送门然后从另一个传送门出来。\n</p>\n<p>\n\t       考虑下面的迷宫（灰色格子表障碍，白色格子表空格，红点是你的位置）：\n</p>\n<p>\n\t<img src=\"/cogs/include../../../../../upload/image/20121007/20121007155133_46743.png\" alt=\"\"/> \n</p>\n<p style=\"text-indent:21.0pt;\">\n\t假设你向东发射蓝色传送门：\n</p>\n<p style=\"text-indent:21.0pt;\">\n\t<img src=\"/cogs/include../../../../../upload/image/20121007/20121007155133_54285.png\" alt=\"\"/> \n</p>\n<p>\n\t       然后向南发射黄色传送门：\n</p>\n<p>\n\t<img src=\"/cogs/include../../../../../upload/image/20121007/20121007155133_44879.png\" alt=\"\"/> \n</p>\n<p>\n\t       然后向南移动一步：\n</p>\n<p>\n\t<img src=\"/cogs/include../../../../../upload/image/20121007/20121007155133_39850.png\" alt=\"\"/> \n</p>\n<p>\n\t       现在是最有意思的部分，如果你再向南移动一步，那么你会穿过黄色传送门而到达蓝色传送门！\n</p>\n<p>\n\t<img src=\"/cogs/include../../../../../upload/image/20121007/20121007155133_22498.png\" alt=\"\"/> \n</p>\n<p>\n\t       当且仅当另一个同色传送门形成时，前一个传送门会消失，譬如你向西边发射一个蓝色传送门，旧的蓝色传送门便会消失：\n</p>\n<p>\n\t<img src=\"/cogs/include../../../../../upload/image/20121007/20121007155133_31613.png\" alt=\"\"/> \n</p>\n<p>\n\t       请注意，传送门是位于障碍的某一侧。如果一个障碍的西侧有一个传送门，那么你必须从西边进入这个传送门，否则你就是在撞墙……\n</p>\n<p>\n\t       <a name=\"OLE_LINK6\"></a><a name=\"OLE_LINK5\"></a>最后，两个传送门不允许叠在一起，否则它们都会因为能量冲突而消失。\n</p>\n<p>\n\t       现在，给你迷宫的地图，你的初始位置，宝藏的位置，请你用尽可能少的移动得到宝藏。注意，发射传送门不计入移动。\n</p>\n<h2 style=\"text-align:left;\" align=\"left\">\n\t【输入文件】\n</h2>\n<p style=\"text-align:left;\" align=\"left\">\n\t       第一行T表示数据组数，每组数据按如下格式：\n</p>\n<div align=\"center\">\n\t<table style=\"border:none;\" border=\"1\" cellpadding=\"0\" cellspacing=\"0\">\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"449\">\n\t\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t\t<span>N M</span> \n\t\t\t\t\t</p>\n\t\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t\t<span style=\"font-family:;\"></span><span style=\"font-family:;\">C</span><span style=\"font-family:;\">11</span><span style=\"font-family:;\"></span><span style=\"font-family:;\"></span><span style=\"font-family:;\">C</span><span style=\"font-family:;\">12</span><span style=\"font-family:;\"></span><span style=\"font-family:;\"></span><span style=\"font-family:;\">C</span><span style=\"font-family:;\">13</span><span style=\"font-family:;\">⋯⋯</span><span style=\"font-family:;\"></span><span style=\"font-family:;\">C</span><span style=\"font-family:;\">1m</span><span style=\"font-size:10.5pt;font-family:;\"></span><span style=\"font-family:宋体;\"> </span> \n\t\t\t\t\t</p>\n\t\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t\t<span style=\"font-family:;\"></span><span style=\"font-family:;\">C</span><span style=\"font-family:;\">21</span><span style=\"font-family:;\"></span><span style=\"font-family:;\"></span><span style=\"font-family:;\">C</span><span style=\"font-family:;\">22</span><span style=\"font-family:;\"></span><span style=\"font-family:;\"></span><span style=\"font-family:;\">C</span><span style=\"font-family:;\">23</span><span style=\"font-family:;\">⋯⋯</span><span style=\"font-family:;\"></span><span style=\"font-family:;\">C</span><span style=\"font-family:;\">2m</span><span style=\"font-size:10.5pt;font-family:;\"></span><span style=\"font-family:宋体;\"> </span> \n\t\t\t\t\t</p>\n\t\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t\t<span style=\"font-family:;\">⋯⋯</span><span style=\"font-size:10.5pt;font-family:;\"></span><span style=\"font-family:宋体;\"> </span> \n\t\t\t\t\t</p>\n\t\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t\t<span style=\"font-family:;\"></span><span style=\"font-family:;\">C</span><span style=\"font-family:;\">n1</span><span style=\"font-family:;\"></span><span style=\"font-family:;\"></span><span style=\"font-family:;\">C</span><span style=\"font-family:;\">n2</span><span style=\"font-family:;\"></span><span style=\"font-family:;\"></span><span style=\"font-family:;\">C</span><span style=\"font-family:;\">n3</span><span style=\"font-family:;\">⋯⋯</span><span style=\"font-family:;\"></span><span style=\"font-family:;\">C</span><span style=\"font-family:;\">nm</span><span style=\"font-size:10.5pt;font-family:;\"></span><span style=\"font-family:宋体;\"> </span> \n\t\t\t\t\t</p>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n<p>\n\t<span>       </span>C<sub>i,j</sub>用来描述每个格子：\n</p>\n<p style=\"margin-left:39.0pt;text-indent:-18.0pt;\">\n\t1.  . 表示一个空格。\n</p>\n<p style=\"margin-left:39.0pt;text-indent:-18.0pt;\">\n\t2.  # 表示一个障碍。<span></span> \n</p>\n<p style=\"margin-left:39.0pt;text-indent:-18.0pt;\">\n\t3.  O 表示你的初始位置。<span></span> \n</p>\n<p style=\"margin-left:39.0pt;text-indent:-18.0pt;\">\n\t4.  X 表示宝藏的位置。<span></span> \n</p>\n<p style=\"text-indent:21.0pt;\">\n\t<a name=\"OLE_LINK7\"></a>保证每组数据中O和X(均为大写)出现且只出现一次。你可以认为迷宫之外的部分都是障碍并且可以用来创造传送门。<span></span> \n</p>\n<h2 style=\"text-align:left;\" align=\"left\">\n\t【输出文件】\n</h2>\n<p style=\"text-align:left;\" align=\"left\">\n\t       T行，每组数据一行。\n</p>\n<p style=\"text-align:left;text-indent:21.0pt;\" align=\"left\">\n\t对于每组数据，如果无法得到宝藏则输出：\n</p>\n<div align=\"center\">\n\t<table style=\"border:none;\" border=\"1\" cellpadding=\"0\" cellspacing=\"0\">\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"449\">\n\t\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t\t<span>No</span> \n\t\t\t\t\t</p>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n<p style=\"text-align:left;text-indent:21.0pt;\" align=\"left\">\n\t否则按如下格式输出S表示最少的移动次数：\n</p>\n<div align=\"center\">\n\t<table style=\"border:none;\" border=\"1\" cellpadding=\"0\" cellspacing=\"0\">\n\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"449\">\n\t\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t\t<span>S</span> \n\t\t\t\t\t</p>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n<h2 style=\"text-align:left;\" align=\"left\">\n\t【输入样例】\n</h2>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\t3\n</p>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\t4 7\n</p>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\t<a name=\"OLE_LINK9\"></a><a name=\"OLE_LINK8\"></a>.O..##.\n</p>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\t.#.....\n</p>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\t.#.####\n</p>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\t.#...X.\n</p>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\t4 5\n</p>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\tO....\n</p>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\t.....\n</p>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\t.....\n</p>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\t....X\n</p>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\t1 3\n</p>\n<p style=\"margin-left:21.0pt;text-align:left;\" align=\"left\">\n\tO#X\n</p>\n<h2 style=\"text-align:left;\" align=\"left\">\n\t【输出样例】\n</h2>\n<p style=\"text-align:left;text-indent:21.0pt;\" align=\"left\">\n\t4\n</p>\n<p style=\"text-align:left;text-indent:21.0pt;\" align=\"left\">\n\t2\n</p>\n<p style=\"text-align:left;text-indent:21.0pt;\" align=\"left\">\n\tNo\n</p>\n<h2 style=\"text-align:left;\" align=\"left\">\n\t【样例解释】\n</h2>\n<p style=\"text-align:left;\" align=\"left\">\n\t   下面是第一个样例的一种最优方案：\n</p>\n<p style=\"margin-left:39.0pt;text-align:left;text-indent:-18.0pt;\" align=\"left\">\n\t1.\n向东移动一步。\n</p>\n<p style=\"margin-left:39.0pt;text-align:left;text-indent:-18.0pt;\" align=\"left\">\n\t2.\n向北发射蓝色传送门。\n</p>\n<p style=\"margin-left:39.0pt;text-align:left;text-indent:-18.0pt;\" align=\"left\">\n\t3.\n向南发射黄色传送门。\n</p>\n<p style=\"margin-left:39.0pt;text-align:left;text-indent:-18.0pt;\" align=\"left\">\n\t4.\n向北移动一步。（进入蓝色传送门并发生传送）\n</p>\n<p style=\"margin-left:39.0pt;text-align:left;text-indent:-18.0pt;\" align=\"left\">\n\t5.\n向东发射蓝色传送门。（旧的蓝色传送门消失）\n</p>\n<p style=\"margin-left:39.0pt;text-align:left;text-indent:-18.0pt;\" align=\"left\">\n\t6.\n向南移动一步。（进入黄色传送门并发生传送）\n</p>\n<p style=\"margin-left:39.0pt;text-align:left;text-indent:-18.0pt;\" align=\"left\">\n\t7.\n向西移动一步。（得到宝藏）\n</p>\n<h2 style=\"text-align:left;\" align=\"left\">\n\t【数据规模】\n</h2>\n<p style=\"text-align:left;\" align=\"left\">\n\t<span>       </span>两个测试点\n</p>\n<table style=\"border:none;\" border=\"1\" cellpadding=\"0\" cellspacing=\"0\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"54\">\n\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t<span style=\"font-family:宋体;\">编号</span><span style=\"font-family:;\"></span> \n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"57\">\n\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t<span style=\"font-family:宋体;\">分值</span><span style=\"font-family:;\"></span> \n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"57\">\n\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t<span style=\"font-family:宋体;\">时限</span><span style=\"font-family:;\"></span> \n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"400\">\n\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t<span style=\"font-family:宋体;\">描述</span><span style=\"font-family:;\"></span> \n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"54\">\n\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t<span style=\"font-family:;\">1</span> \n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"57\">\n\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t<span style=\"font-family:;\">40</span> \n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"57\">\n\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t<span style=\"font-family:;\">10s</span> \n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"400\">\n\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t<span style=\"font-family:;\">T&lt;=200   N,M&lt;=8</span> \n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"54\">\n\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t<span style=\"font-family:;\">2</span> \n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"57\">\n\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t<span style=\"font-family:;\">60</span> \n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"57\">\n\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t<span style=\"font-family:;\">1s</span> \n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td style=\"border:solid windowtext 1.0pt;\" valign=\"top\" width=\"400\">\n\t\t\t\t<p style=\"text-align:left;\" align=\"left\">\n\t\t\t\t\t<span style=\"font-family:;\">T&lt;=100  \n  N,M&lt;=50</span> \n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n<p>\n\t<br/>\n</p>\n\n"}]}