{"title":"[NOI 2007] 追捕盗贼","time_limit":1000,"memory_limit":128,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=lxxmmQikP","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n<span style=\"font-family:sans-serif;font-size:20px;font-weight:bold;background-color:aliceblue;\">【题目描述】</span> \n</h3>\n<p>\n魔法国度Magic Land里最近出现了一个大盗Frank，他在Magic Land四处作案，专门窃取政府机关的机密文件（因而有人怀疑Frank是敌国派来的间谍）。<br/>\n为了捉住Frank，Magic Land的安全局重拳出击！<br/>\nMagic Land由N个城市组成，并且这N个城市又由恰好N-1条公路彼此连接起来，使得任意两个城市间都可以通过若干条公路互达。从数据结构的角度我们也可以说，这N个城市和N-1条公路形成了一棵树。<br/>\n例如，下图就是Magic Land的一个可能格局（4个城市用数字编号，3条公路用字母编号）：\n</p>\n<p align=\"center\">\n<img src=\"/upload/image/20120925/20120925162957_31792.jpg\" alt=\"\"/> \n</p>\n<p>\n大盗Frank能够在公路上以任意速度移动。<br/>\n比方说，对于上图给出的格局，在0.00001秒钟内（或者任意短的一段时间内），Frank就可以从城市1经过城市2到达城市4，中间经过了两条公路。<br/>\n想要生擒Frank困难重重，所以安全局派出了经验丰富的警探，这些警探具有非凡的追捕才能：<br/>\n1. 只要有警探和Frank同处一个城市，那么就能够立刻察觉到Frank，并且将其逮捕。<br/>\n2. 虽然Frank可以在公路上以任意快的速度移动，但是如果有警探和Frank在同一条公路上相遇，那么警探也可以立刻察觉到Frank并将其逮捕。<br/>\n安全局完全不知道Frank躲在哪个城市，或者正在哪条公路上移动，所以需要制定一个周密的抓捕计划，计划由若干步骤组成。在每一步中，可以做如下几件事中的一个：<br/>\n1. 在某个城市空降一位警探。警探可以直接从指挥部空降到Magic               Land的任意一个城市里。此操作记为“L x”，表示在编号为x的城市里空降一位警探。耗时1秒。<br/>\n2. 把留在某个城市里的一位警探直接召回指挥部。以备在以后的步骤中再度空降到某个城市里。此操作记为“B x”。表示把编号为x的城市里的一位警探召回指挥部。耗时1秒。<br/>\n3. 让待在城市x的一位警探沿着公路移动到城市y，此操作记为“M               x y”。耗时1秒。当然，前提是城市x和城市y之间有公路。如果在警探移动的过程中，大盗Frank也在同一条公路上，那么警探就抓捕到了Frank。<br/>\n现在，由你来制定一套追捕计划，也就是给出若干个步骤，需要保证：无论大盗Frank一开始躲在哪儿，也无论Frank在整个过程中如何狡猾地移动 （Frank大盗可能会窃取到追捕行动的计划书，所以他一定会想尽办法逃避），他一定会被缉拿归案。<br/>\n希望参与的警探越少越好，因为经验丰富的警探毕竟不多。<br/>\n例如对于前面所给的那个图示格局，一个可行的计划如下：<br/>\n1. L 2 在城市2空降一位警探。注意这一步完成之后，城市2里不会有Frank，否则他将被捉住。<br/>\n2. L 2 再在城市2空降一位警探。<br/>\n3. M 2 1 让城市2的一位警探移动到城市1。注意城市2里还留有另一位警探。这一步完成之后，城市1里不会有Frank，公路A上也<br/>\n不会有Frank。也就是说，假如Frank还没有被逮捕，那么他只能是在城市3或城市4里，或者公路B或公路C上。<br/>\n4. B 1 召回城市1的一位警探。注意虽然召回了这位警探，但是由于我们始终留了一位警探在城市2把守，所以Frank仍然不可能跑到<br/>\n城市1或者是公路A上。<br/>\n5. L 3 在城市3空降一位警探。注意这一步可以空降在此之前被召回的那位警探。这一步完成之后，城市3里不会有Frank，否则他会被捉住。<br/>\n6. M 3 2 让城市3里的一位警探移动到城市2。这一步完成之后，如果Frank还没有被捉住，那他只能是在公路C上或者城市4里。注意<br/>\n这一步之后，城市2里有两位警探。<br/>\n7. M 2 4 让城市2里的一位警探移动到城市4。这一步完成之后，Frank一定会被捉住，除非他根本就没来Magic Land。<br/>\n这个计划总共需要2位警探的参与。可以证明：如果自始至终只有1名或者更少的警探参与，则Frank就会逍遥法外。<br/>\n你的任务很简单：对于一个输入的Magic Land的格局，计算S，也就是为了追捕Frank至少需要投入多少位警探，并且给出相应的追捕计划步骤。\n</p>\n<p>\n<br/>\n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n输入文件给出了Magic Land的格局。\n第一行一个整数N，代表有N个城市，城市的编号是1~N。\n接下来N-1行，每行有两个用空格分开的整数xi，yi，代表城市xi，yi之间有公路相连。保证1≤xi,yi≤N\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\n向输出文件输出你所给出的追捕计划。<br/>\n第一行请输出一个整数S，代表追捕计划需要多少位警探。<br/>\n第二行请输出一个整数T，代表追捕计划总共有多少步。<br/>\n接下来请输出T行，依次描述了追捕计划的每一步。每行必须是以下三种形式之一：<br/>\nz“L x”，其中L是大写字母，接着是一个空格，再接着是整数x，代表在城市x空降一位警探。你必须保证1≤x≤N。<br/>\nz“B x”，其中B是大写字母，接着是一个空格，再接着是整数x，代表召回城市x的一位警探。你必须保证1≤x≤N，且你的计<br/>\n划执行到这一步之前，城市x里面确实至少有一位警探。<br/>\nz“M x y”，其中M是大写字母，接着是一个空格，再接着是整数x，再跟一个空格，最后一个是整数y。代表让城市x的一位警<br/>\n探沿着公路移动到城市y。你必须保证1≤x, y≤N，且你的计划执行到这一步之前，城市x里面确实至少有一位警探，且城市x, y之前<br/>\n确实有公路。<br/>\n必须保证输出的S确实等于追捕计划中所需要的警探数目。\n</p>\n<h3>\n【输入样例】\n</h3>\n<p>\n4 <br/>\n1 2<br/>\n3 2<br/>\n2 4\n</p>\n<h3>\n【输出样例】\n</h3>\n<p>\n2 <br/>\n7<br/>\nL 2<br/>\nL 2<br/>\nM 2 1<br/>\nB 1<br/>\nL 3<br/>\nM 3 2<br/>\nM 2 4\n</p>\n<h3>\n【评分方法】\n</h3>\n<p>\n对于任何一个测试点：<br/>\n如果输出的追捕计划不合法，或者整个追捕计划的步骤数T超过了20000，或者追捕计划结束之后，不能保证捉住Frank，则不能得分。\n</p>\n<p>\n否则，用你输出的S和我们已知的标准答案S *相比较：<br/>\n1. 若S<s *，则得到120%的分。<br=\"\"> 2. 若S=S *，则得到100%的分。<br/>\n3. 若S * <s≤s *=\"\" +2，则得到60%的分。<br=\"\"> 4. 若S * +2<s≤s *=\"\" +4，则得到40%的分。<br=\"\"> 5. 若S * +4<s≤s *=\"\" +8，则得到20%的分。<br=\"\"> 6. 若S&gt;S * +8，则得到10%的分。</s≤s></s≤s></s≤s></s> \n</p>\n<p>\n<s *，则得到120%的分。<br=\"\">【数据规模】</s> \n</p>\n<p>\n<s *，则得到120%的分。<br=\"\">输入保证描述了一棵连通的N结点树，1≤N≤1 000。</s> \n</p>\n\n"}]}