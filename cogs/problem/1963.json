{"title":"[HAOI 2015] 树上操作","time_limit":1000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vxzQmkPej","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<p>\n有一棵点数为N的树，以点1为根，且树点有权值。然后有M个操作，分为三种：\n</p>\n<p>\n操作1：把某个节点x的点权增加a。\n</p>\n<p>\n操作2：把某个节点x为根的子树中所有点的点权都增加a。\n</p>\n<p>\n操作3：询问某个节点x到根的路径中所有点的点权和。\n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n第一行两个整数N,M，表示点数和操作数。\n</p>\n<p>\n接下来一行N个整数，表示树中节点的初始权值。\n</p>\n<p>\n接下来N-1行每行两个正整数fr,to，表示该树中存在一条边(fr,to)。\n</p>\n<p>\n再接下来M行，每行分别表示一次操作。其中第一个数表示该操作的种类（1~3），之后接这个操作的参数（x或者x a）。\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\n对于每个询问操作，输出该询问的答案。答案之间用换行隔开。\n</p>\n<h3>\n【样例输入】\n</h3>\n<p>\n5 5\n</p>\n<p>\n1 2 3 4 5\n</p>\n<p>\n1 2\n</p>\n<p>\n1 4\n</p>\n<p>\n2 3\n</p>\n<p>\n2 5\n</p>\n<p>\n3 3\n</p>\n<p>\n1 2 1\n</p>\n<p>\n3 5\n</p>\n<p>\n2 1 2\n</p>\n<p>\n3 3\n</p>\n<h3>\n【样例输出】\n</h3>\n<p>\n6\n</p>\n<p>\n9\n</p>\n<p>\n13\n</p>\n<h3>\n【提示】\n</h3>\n<p>\n对于30%的数据，N,M&lt;=1000\n</p>\n<p>\n对于50%的数据，N,M&lt;=100000且数据随机。\n</p>\n<p>\n对于100%的数据，N,M&lt;=100000，且所有输入数据的绝对值都不会超过10^6。\n</p>\n\n"}]}