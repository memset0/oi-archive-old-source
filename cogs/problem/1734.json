{"title":"[CF 123E]树状迷宫","time_limit":1000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vyXmzkWjq","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<p>\n一个迷宫是一棵树（即一张无向图，其中任意两点之间仅有一条路径）。迷宫的起点和终点都按照某种概率随机选取。人们会在迷宫中用深度优先搜索的方法搜寻终点。如果有许多条可能的路径，会等概率地选取一条。考虑如下伪代码：\n</p>\n<p>\n<br/>\n</p>\n<pre class=\"prettyprint lang-cpp\">DFS(x)\n    if x == exit vertex then\n        finish search\n    flag[x] &lt;- TRUE\n    random shuffle the vertices&#39; order in V(x) // here all permutations have equal probability to be chosen\n    for i &lt;- 1 to length[V] do\n        if flag[V[i]] = FALSE then\n            count++;\n            DFS(y);\n    count++;</pre>\n<p>\nV(x)是和x相邻的顶点列表。最初flag数组的值均为false。第一次DFS的参数是迷宫的入口节点。当搜索终止，变量count的值就是在迷宫中走的步数。\n</p>\n<p>\n你的任务是计算在迷宫中从入口到出口，所走的期望步数。\n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n输入文件的第一行是图的顶点数n（1&lt;=n&lt;=10^5）。接下来n-1行每行有一对整数ai和bi，代表顶点ai和bi之间有一条边（1&lt;=ai,bi&lt;=n）。保证所给的图是一棵树。\n</p>\n<p>\n接下来的n行每行有两个非负整数xi,yi，起点i被选为入口的概率是xi/∑xi，被选为出口的概率是yi/∑yi。∑xi和∑yi都不超过10^6.\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\n输出一行一个实数，即步数的期望值。你程序输出与标准输出的相对误差不能超过10^-9。\n</p>\n<h3>\n【样例输入】\n</h3>\n<h4>\n样例输入1：\n</h4>\n<p>\n2\n</p>\n<p>\n1 2\n</p>\n<p>\n0 1\n</p>\n<p>\n1 0\n</p>\n<p>\n<br/>\n</p>\n<h4>\n样例输入2：\n</h4>\n<p>\n3\n</p>\n<p>\n1 2\n</p>\n<p>\n1 3\n</p>\n<p>\n1 0\n</p>\n<p>\n0 2\n</p>\n<p>\n0 3\n</p>\n<p>\n<br/>\n</p>\n<h4>\n样例输入3：\n</h4>\n<p>\n7\n</p>\n<p>\n1 2\n</p>\n<p>\n1 3\n</p>\n<p>\n2 4\n</p>\n<p>\n2 5\n</p>\n<p>\n3 6\n</p>\n<p>\n3 7\n</p>\n<p>\n1 1\n</p>\n<p>\n1 1\n</p>\n<p>\n1 1\n</p>\n<p>\n1 1\n</p>\n<p>\n1 1\n</p>\n<p>\n1 1\n</p>\n<p>\n1 1\n</p>\n<p>\n<br/>\n</p>\n<h3>\n【样例输出】\n</h3>\n<h4>\n样例输出1：\n</h4>\n<p>\n1.00000000000000000000\n</p>\n<p>\n<br/>\n</p>\n<h4>\n样例输出2：\n</h4>\n<p>\n2.00000000000000000000\n</p>\n<p>\n<br/>\n</p>\n<h4>\n样例输出3：\n</h4>\n<p>\n4.04081632653\n</p>\n<h3>\n【提示】\n</h3>\n<p>\n在第一组样例中，入口总是1，出口总是2.\n</p>\n<p>\n在第二组样例中，入口总是1，出口有2/5的可能性是1，有3/5的可能性是3.无论出口是2或3，步数的期望值都是相等的（因为图是对称的）。第一步有0.5的概率走到出口，有0.5的概率走到另一个节点。对于第一种情况，步数是1，对于第二种情况步数是3.因此步数的数学期望就是2/5*(1*0.5+3*0.5)+3/5*(1*0.5+3*0.5)。\n</p>\n<h3>\n【来源】\n</h3>\n<p>\n<a href=\"http://codeforces.com/problemset/problem/123/E\" target=\"_blank\">CODEFORCES 123E</a> \n</p>\n\n"}]}