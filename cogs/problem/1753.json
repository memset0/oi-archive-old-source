{"title":"[HZOI 2014] 天使的小纸条","time_limit":2000,"memory_limit":128,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=viSzikWgj","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<p>\n</p><table style=\"border:currentColor;width:524.5pt;border-collapse:collapse;\" class=\"MsoTableMediumGrid3Accent1\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\" width=\"699\">\n<tbody>\n<tr>\n<td style=\"background:#4F81BD;border:1pt solid windowtext;\" valign=\"top\" width=\"151\">\n<p class=\"MsoNormal\" align=\"left\">\n<b><span style=\"color:white;font-family:华文细黑;font-size:12pt;\">题目</span></b><b><span style=\"font-family:&#34;color:white;font-size:12pt;\"></span></b> \n</p>\n</td>\n<td style=\"background:#4F81BD;border:1pt solid windowtext;\" valign=\"top\" width=\"548\">\n<p style=\"text-align:center;\" class=\"MsoNormal\" align=\"center\">\n<b><span style=\"color:white;font-family:华文细黑;font-size:12pt;\">天使的小纸条（</span></b><b><span style=\"font-family:&#34;color:white;font-size:12pt;\">luvletter</span></b><b><span style=\"color:white;font-family:华文细黑;font-size:12pt;\">）</span></b><b><span style=\"font-family:&#34;color:white;font-size:12pt;\"></span></b> \n</p>\n</td>\n</tr>\n<tr>\n<td style=\"background:#4F81BD;border:1pt solid windowtext;\" valign=\"top\" width=\"151\">\n<p class=\"MsoNormal\" align=\"left\">\n<b><span style=\"color:white;font-family:华文细黑;font-size:12pt;\">背景</span></b><b><span style=\"font-family:&#34;color:white;font-size:12pt;\"></span></b> \n</p>\n</td>\n<td style=\"background:#A7BFDE;border:1pt solid windowtext;\" valign=\"top\" width=\"548\">\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\">“</span><span style=\"font-family:华文细黑;font-size:12pt;\">我们都是小怪兽，总有一天会被正义的奥特曼消灭。</span><span style=\"font-family:&#34;font-size:12pt;\">”</span> \n</p>\n<p style=\"text-align:right;\" class=\"MsoNormal\" align=\"right\">\n<span style=\"font-family:&#34;font-size:12pt;\">——</span><span style=\"font-family:华文细黑;font-size:12pt;\">上杉绘梨衣</span><span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n</td>\n</tr>\n<tr>\n<td style=\"background:#4F81BD;border:1pt solid windowtext;\" valign=\"top\" width=\"151\">\n<p class=\"MsoNormal\" align=\"left\">\n<b><span style=\"color:white;font-family:华文细黑;font-size:12pt;\">题目描述</span></b><b><span style=\"font-family:&#34;color:white;font-size:12pt;\"></span></b> \n</p>\n</td>\n<td style=\"background:#D3DFEE;border:1pt solid windowtext;\" valign=\"top\" width=\"548\">\n<p style=\"text-indent:24pt;\" class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">某夜</span><span style=\"font-family:&#34;font-size:12pt;\">,</span><span style=\"font-family:华文细黑;font-size:12pt;\">天使大人在看《龙族》时，窗外传来一阵幽香，让熬夜看书的天使大人昏昏欲睡。不久，便进入了梦乡。</span><span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n<p style=\"text-indent:24pt;\" class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">梦中，天使大人变成了废柴路鸣非，而时间恰好在路鸣非</span><span style=\"font-family:&#34;font-size:12pt;\">“</span><span style=\"font-family:华文细黑;font-size:12pt;\">拐走</span><span style=\"font-family:&#34;font-size:12pt;\">”</span><span style=\"font-family:华文细黑;font-size:12pt;\">绘梨衣时开始流动，一切都像小说中那么顺利，每天仍就只是两双眼睛的对视和传来传去的小纸条，还有在酒德麻衣精心编织的爱情剧本中毫无察觉。</span><span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n<p style=\"text-indent:24pt;\" class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">只是，绘梨衣每天缠着天使大人玩游戏。怎奈何</span><span style=\"font-family:&#34;font-size:12pt;\">,</span><span style=\"font-family:华文细黑;font-size:12pt;\">他每次都被绘梨衣虐的很惨。这让我们的小公主很生气</span><span style=\"font-family:&#34;font-size:12pt;\">,</span><span style=\"font-family:华文细黑;font-size:12pt;\">认为天使大人心不在焉。于是，在小纸条上下了最后通牒，如果天使大人再不认真陪她玩，她就要离开。最后，她给了天使大人写着规则的小纸条，便不再理他。</span><span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n<p style=\"text-indent:24pt;\" class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">这让我们的天使大人很头痛，因为他知道旁边这个小公主的力量，可以在</span><span style=\"font-family:&#34;font-size:12pt;\">30</span><span style=\"font-family:华文细黑;font-size:12pt;\">分钟内毁灭整个东京城。而且，作为一个男人</span><span style=\"font-family:&#34;font-size:12pt;\">(</span><span style=\"font-family:华文细黑;font-size:12pt;\">尽管是废柴</span><span style=\"font-family:&#34;font-size:12pt;\">),</span><span style=\"font-family:华文细黑;font-size:12pt;\">也不能被一个女生瞧不起，于是，他去求助路子航和凯撒，可作为整个牛郎店的红人，他们实在脱不开身。小魔鬼路明泽还在度假，于是他只能求助作为</span><span style=\"font-family:&#34;font-size:12pt;\">Oier</span><span style=\"font-family:华文细黑;font-size:12pt;\">的你。</span><span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n<p style=\"text-indent:24pt;\" class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">绘梨衣的纸条上写着一个简单的游戏：数颜色</span><span style=\"font-family:&#34;font-size:12pt;\">…</span> \n</p>\n<p style=\"text-indent:24pt;\" class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">乍一看，好像很简单，可是接下来的操作让天使大人眼花缭乱。唉，</span><span style=\"font-family:&#34;font-size:12pt;\">S</span><span style=\"font-family:华文细黑;font-size:12pt;\">级的血统还是比不上白王血裔的皇。天使大人叹了口气，无奈的摇了摇头</span><span style=\"font-family:&#34;font-size:12pt;\">…</span><span style=\"font-family:华文细黑;font-size:12pt;\">剩下的就交给你了。</span><span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n<p style=\"text-indent:24pt;\" class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">纸条的一边写着一个</span><span style=\"font-family:&#34;font-size:12pt;\">N*M </span><span style=\"font-family:华文细黑;font-size:12pt;\">的矩阵，每个位置都有一种颜色，绘梨衣可以对该矩阵不断进行操作，有时会改变某一位置的颜色，还不时让天使大人计算出一个矩形内特定颜色的个数。</span><span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n<p style=\"text-indent:24pt;\" class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">这次绘梨衣很生气，为了知道天使大人是不是真的很认真的在玩。所以，她做了很多次操作，使整个游戏变得异常复杂，但是，这次天使大人已经毫无退路，所以你一定要算出来！！</span><span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n</td>\n</tr>\n<tr>\n<td style=\"background:#4F81BD;border:1pt solid windowtext;\" valign=\"top\" width=\"151\">\n<p class=\"MsoNormal\" align=\"left\">\n<b><span style=\"color:white;font-family:华文细黑;font-size:12pt;\">输入数据</span></b><b><span style=\"font-family:&#34;color:white;font-size:12pt;\"></span></b> \n</p>\n</td>\n<td style=\"background:#A7BFDE;border:1pt solid windowtext;\" valign=\"top\" width=\"548\">\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">第一行有两个数字</span><span style=\"font-family:&#34;font-size:12pt;\">M,N</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">接下来</span><span style=\"font-family:&#34;font-size:12pt;\">N </span><span style=\"font-family:华文细黑;font-size:12pt;\">行，每行</span><span style=\"font-family:&#34;font-size:12pt;\">M </span><span style=\"font-family:华文细黑;font-size:12pt;\">个数，第</span><span style=\"font-family:&#34;font-size:12pt;\">i+1 </span><span style=\"font-family:华文细黑;font-size:12pt;\">行第</span><span style=\"font-family:&#34;font-size:12pt;\">j </span><span style=\"font-family:华文细黑;font-size:12pt;\">个数表示格子（</span><span style=\"font-family:&#34;font-size:12pt;\">i</span><span style=\"font-family:华文细黑;font-size:12pt;\">，</span><span style=\"font-family:&#34;font-size:12pt;\">j</span><span style=\"font-family:华文细黑;font-size:12pt;\">）的初始值。</span><span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">接下来一个整数</span><span style=\"font-family:&#34;font-size:12pt;\">Q</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">接下来</span><span style=\"font-family:&#34;font-size:12pt;\">Q </span><span style=\"font-family:华文细黑;font-size:12pt;\">行，每行描述一个操作</span><span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">操作</span><span style=\"font-family:&#34;font-size:12pt;\">1</span><span style=\"font-family:华文细黑;font-size:12pt;\">：</span><span style=\"font-family:&#34;font-size:12pt;\">“1 X Y C”(</span><span style=\"font-family:华文细黑;font-size:12pt;\">不含引号</span><span style=\"font-family:&#34;font-size:12pt;\">),</span><span style=\"font-family:华文细黑;font-size:12pt;\">表示将格子</span><span style=\"font-family:&#34;font-size:12pt;\">(X,Y)</span><span style=\"font-family:华文细黑;font-size:12pt;\">的权值改为</span><span style=\"font-family:&#34;font-size:12pt;\">C</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">操作</span><span style=\"font-family:&#34;font-size:12pt;\">2</span><span style=\"font-family:华文细黑;font-size:12pt;\">：</span><span style=\"font-family:&#34;font-size:12pt;\">“2 X1 X2 Y1 Y2 C”(</span><span style=\"font-family:华文细黑;font-size:12pt;\">不含引号</span><span style=\"font-family:&#34;font-size:12pt;\">)</span><span style=\"font-family:华文细黑;font-size:12pt;\">，表示询问矩形内有多少个位置的权值为</span><span style=\"font-family:&#34;font-size:12pt;\">C</span><span style=\"font-family:华文细黑;font-size:12pt;\">。</span><span style=\"font-family:&#34;font-size:12pt;\">X1,X2 </span><span style=\"font-family:华文细黑;font-size:12pt;\">分别为矩形中的两个横坐标，</span><span style=\"font-family:&#34;font-size:12pt;\">Y1,Y2 </span><span style=\"font-family:华文细黑;font-size:12pt;\">为矩形中的两个纵坐标。</span><span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n</td>\n</tr>\n<tr>\n<td style=\"background:#4F81BD;border:1pt solid windowtext;\" valign=\"top\" width=\"151\">\n<p class=\"MsoNormal\" align=\"left\">\n<b><span style=\"color:white;font-family:华文细黑;font-size:12pt;\">输出数据</span></b><b><span style=\"font-family:&#34;color:white;font-size:12pt;\"></span></b> \n</p>\n</td>\n<td style=\"background:#D3DFEE;border:1pt solid windowtext;\" valign=\"top\" width=\"548\">\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">对于每一个操作</span><span style=\"font-family:&#34;font-size:12pt;\">2</span><span style=\"font-family:华文细黑;font-size:12pt;\">，输出一个整数表示答案，每数一行。</span><span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n</td>\n</tr>\n<tr>\n<td style=\"background:#4F81BD;border:1pt solid windowtext;\" valign=\"top\" width=\"151\">\n<p class=\"MsoNormal\" align=\"left\">\n<b><span style=\"color:white;font-family:华文细黑;font-size:12pt;\">输入样例</span></b><b><span style=\"font-family:&#34;color:white;font-size:12pt;\"></span></b> \n</p>\n</td>\n<td style=\"background:#A7BFDE;border:1pt solid windowtext;\" valign=\"top\" width=\"548\">\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\">3 3</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\">1 2 3</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\">3 2 1</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\">2 1 3</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\">3</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\">2 1 2 1 2 1</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\">1 2 3 2</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\">2 2 3 2 3 2</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n</td>\n</tr>\n<tr>\n<td style=\"background:#4F81BD;border:1pt solid windowtext;\" valign=\"top\" width=\"151\">\n<p class=\"MsoNormal\" align=\"left\">\n<b><span style=\"color:white;font-family:华文细黑;font-size:12pt;\">输出样例</span></b><b><span style=\"font-family:&#34;color:white;font-size:12pt;\"></span></b> \n</p>\n</td>\n<td style=\"background:#D3DFEE;border:1pt solid windowtext;\" valign=\"top\" width=\"548\">\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\">1</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\">2</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n</td>\n</tr>\n<tr>\n<td style=\"background:#4F81BD;border:1pt solid windowtext;\" valign=\"top\" width=\"151\">\n<p class=\"MsoNormal\" align=\"left\">\n<b><span style=\"color:white;font-family:华文细黑;font-size:12pt;\">数据范围</span></b><b><span style=\"font-family:&#34;color:white;font-size:12pt;\"></span></b> \n</p>\n</td>\n<td style=\"background:#A7BFDE;border:1pt solid windowtext;\" valign=\"top\" width=\"548\">\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">对于</span><span style=\"font-family:&#34;font-size:12pt;\">30%</span><span style=\"font-family:华文细黑;font-size:12pt;\">的数据：</span><span style=\"font-family:&#34;font-size:12pt;\">1&lt;=N,M&lt;=30,Q&lt;=50000</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">对于</span><span style=\"font-family:&#34;font-size:12pt;\">100%</span><span style=\"font-family:华文细黑;font-size:12pt;\">的数据：</span><span style=\"font-family:&#34;font-size:12pt;\">1&lt;=N,M&lt;=300,Q&lt;=200000,C&lt;=100,</span> \n</p>\n<p class=\"MsoNormal\" align=\"left\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">对于所有操作</span><span style=\"font-family:&#34;font-size:12pt;\">1</span><span style=\"font-family:华文细黑;font-size:12pt;\">：</span><span style=\"font-family:&#34;font-size:12pt;\">1&lt;=X&lt;=N,1&lt;=Y&lt;=M</span> \n</p>\n<p class=\"MsoNormal\">\n<span style=\"font-family:华文细黑;font-size:12pt;\">对于所有操作</span><span style=\"font-family:&#34;font-size:12pt;\">2</span><span style=\"font-family:华文细黑;font-size:12pt;\">：</span><span style=\"font-family:&#34;font-size:12pt;\">1&lt;=X1&lt;=X2&lt;=N,1&lt;=Y1&lt;=Y2&lt;=M.</span> \n</p>\n<p class=\"MsoNormal\">\n<span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n</td>\n</tr>\n<tr>\n<td style=\"background:#4F81BD;border:1pt solid windowtext;\" valign=\"top\" width=\"151\">\n<p class=\"MsoNormal\" align=\"left\">\n<b><span style=\"color:white;font-family:华文细黑;font-size:12pt;\">来源</span></b><b><span style=\"font-family:&#34;color:white;font-size:12pt;\"></span></b> \n</p>\n</td>\n<td style=\"background:#D3DFEE;border:1pt solid windowtext;\" valign=\"top\" width=\"548\">\n<p class=\"MsoNormal\">\n<span style=\"font-family:&#34;font-size:12pt;\">Hzoi2014</span> \n</p>\n<p class=\"MsoNormal\">\n<span style=\"font-family:&#34;font-size:12pt;\"></span> \n</p>\n</td>\n</tr>\n</tbody>\n</table>\n<span style=\"font-size:small;\"><span style=\"line-height:normal;\"><br/>\n</span></span> \n<p>\n<br/>\n</p>\n<p>\n<span style=\"font-size:small;\"><span style=\"line-height:normal;\"><br/>\n</span></span> \n</p>\n<p>\n<span style=\"font-size:small;\"><span style=\"line-height:normal;\"><img alt=\"\" src=\"/upload/image/20141020/20141020062450_40353.jpg\"/><br/>\n</span></span> \n</p>\n\n"}]}