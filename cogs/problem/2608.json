{"title":"[河南省队2016]无根树","time_limit":1000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vSNSyVeaU","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<p>\n【题目描述】\n</p>\n<p>\n给定一棵无根树，第i个节点的权值为v_i，要求支持两个操作：\n</p>\n<p>\n*将节点x的权值v_x修改为y\n</p>\n<p>\n*选择一个连通块（0个节点也可以），使得这个连通块包含的点点权和最大\n</p>\n<p>\n【输入格式】\n</p>\n<p>\n第一行两个整数n,m。\n</p>\n<p>\n第二行n个整数，第i个整数表示节点i的初始权值v_i。\n</p>\n<p>\n接下来n-1行，每行两个整数x_i,y_i，描述树的一条边(x_i,y_i)。\n</p>\n<p>\n接下来m行，每行描述一个操作：\n</p>\n<p>\n*如果格式为1 x y，则表示将节点x的权值v_x修改为y\n</p>\n<p>\n*如果格式为2，则表示一个询问操作，求出点权和最大的连通块的点权和\n</p>\n<p>\n【输出格式】\n</p>\n<p>\n对于每个询问操作，输出得到的点权和。\n</p>\n<p>\n【样例输入】\n</p>\n<p>\n5 7\n</p>\n<p>\n2 -1 -3 1 1\n</p>\n<p>\n1 2\n</p>\n<p>\n1 3\n</p>\n<p>\n3 4\n</p>\n<p>\n3 5\n</p>\n<p>\n2\n</p>\n<p>\n1 3 0\n</p>\n<p>\n2\n</p>\n<p>\n1 2 1\n</p>\n<p>\n2 1 1 -3\n</p>\n<p>\n2\n</p>\n<p>\n【样例输出】\n</p>\n<p>\n2\n</p>\n<p>\n4\n</p>\n<p>\n5\n</p>\n<p>\n2\n</p>\n<p>\n【提示】\n</p>\n<p>\n对于30%的数据，1 &lt;= n,m &lt;= 10^3。\n</p>\n<p>\n对于另外20%的数据，1 &lt;= n,m &lt;= 10^5，树形态为一条链。\n</p>\n<p>\n对于100%的数据，1 &lt;= n,m &lt;= 10^5，|v_i| &lt;= 1000。\n</p>\n<p>\n【来源】\n</p>\n<p>\n2016河南省队集训，数据是Mike造的，如果数据有误请联系Mike，谁有官测直接刷掉就好。\n</p>\n\n"}]}