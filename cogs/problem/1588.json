{"title":"[USACO Feb04]距离咨询","time_limit":1000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vxmxQkgUU","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<p>\n农夫约翰有N（2&lt;=N&lt;=40000）个农场，标号1到N。M（2&lt;=M&lt;=40000）条的不同的垂直或水平的道路连结着农场，道路的长度不超过1000.这些农场的分布就像下面的地图一样，图中农场用F1..F7表示：\n</p>\n<p>\n<img src=\"/upload/image/20140413/20140413210351_20586.png\" alt=\"\"/> \n</p>\n<p>\n每个农场最多能在东西南北四个方向连结4个不同的农场。此外，农场只处在道路的两端。道路不会交叉而且每对农场间有且仅有一条路径。邻居鲍伯要约翰来导航，但约翰丢了农场的地图，他只得从电脑的备份中修复率。每一条道路的信息如下：\n</p>\n<p>\n    从农场23往南经距离10到达农场17\n</p>\n<p>\n    从农场1往东经距离7到达农场17\n</p>\n<p>\n    . . .\n</p>\n<p>\n最近美国过度肥胖非常普遍。农夫约翰为了让他的奶牛多做运动，举办了奶牛马拉松。马拉松路线要尽量长。\n</p>\n<p>\n奶牛们拒绝跑马拉松，因为她们悠闲的生活无法承受约翰选择的如此长的赛道。因此约翰决心找一条更合理的赛道。他打算咨询你。读入地图之后会有K个问题，每个问题包括2个整数，就是约翰感兴趣的2个农场的编号，请尽快算出这2个农场间的距离。\n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n第1行：两个分开的整数N和M。\n</p>\n<p>\n第2到M+1行：每行包括4个分开的内容，F1,F2,L,D分别描述两个农场的编号，道路的长度，F1到F2的方向N,E,S,W。\n</p>\n<p>\n第2+M行：一个整数K（1&lt;=K&lt;=10000）.\n</p>\n<p>\n第3+M到2+M+K行：每行输入2个整数，代表2个农场。\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\n对每个问题，输出单独的一个整数，给出正确的距离。\n</p>\n<h3>\n【样例输入】\n</h3>\n<pre>7 6\n1 6 13 E\n6 3 9 E\n3 5 7 S\n4 1 3 N\n2 4 20 W\n4 7 2 S\n3\n1 6\n1 4\n2 6</pre>\n<h3>\n【样例输出】\n</h3>\n<pre>13\n3\n36</pre>\n<h3>\n【提示】\n</h3>\n<p>\n农场2到农场6有20+3+13=36的距离。\n</p>\n<h3>\n【来源】\n</h3>\n<p>\nBrian Dean,2004\n</p>\n<p>\nUSACO 2004 February Contest Green Problem 3 Distance Queries\n</p>\n<p>\nTranslate by: 庄乐\n</p>\n\n"}]}