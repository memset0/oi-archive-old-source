{"title":"快速红包变换","time_limit":1000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vSXJiVkgj","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<p>\n春节，又是一年一度发红包的时节。\n</p>\n<p>\n这天晚上，小O睡的正香，她梦见在NOI上拿了金牌，过不了多久，保送清华，进入计算机系，打入ACM，赢取金奖，走上人生巅峰，想想还有点小激动。\n</p>\n<p>\n这时，残暴的笑声吵醒了小O。\n</p>\n<p>\n“哈哈！愚蠢的人类！这种纸质的红包早就不能镇压本座了！哈哈！”\n</p>\n<p>\n“看你一脸懵逼，没错，本座就是‘祟’！愚蠢的人类！用红包镇压了本座千百年！如今！QQ微信红包当世，人类寄托在压岁钱里的信念已经冲淡了！这，正是本座重现大地的契机！哈哈！”\n</p>\n<p>\n“人类，你是本座遇到的第一个人！你来和本座玩个游戏吧！恩，就用这可恶的红包吧！哈哈！”\n</p>\n<p>\n“本座，在这里放一些红包，然后！对里面的钱数做一些变换，你，要回答本座的问题，明白的了吗！哈哈！”\n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n第一行，一个数N，表示红包的数量\n</p>\n<p>\n第二行，N个数，表示红包A[1]，A[2]……A[N]初始的钱数\n</p>\n<p>\n第三行，一个数M，表示变换和询问的个数和\n</p>\n<p>\n第4~3+M行，每行包含一条命令令，和命令的具体细节。\n</p>\n<p>\n命令如下：\n</p>\n<p>\nCadd\tl r a\t(add 从A[l]到A[r]每个红包钱数加a)\n</p>\n<p>\nCchange\tl r a\t(change 从A[l]到A[r]每个红包钱数变为a)\n</p>\n<p>\nCbmax\tl r a\t(be max 从A[l]到A[r]每个红包钱数变为max(A[i],a))\n</p>\n<p>\nCbmin\tl r a\t(be min 从A[l]到A[r]每个红包钱数变为min(A[i],a))\n</p>\n<p>\nQsum\tl r\t(sum 求从A[l]到A[r]每个红包钱数和)\n</p>\n<p>\nQwmax\tl r\t(what is max 从A[l]到A[r]每个红包钱数的最大值)\n</p>\n<p>\nQwmin\tl r\t(what is min 从A[l]到A[r]每个红包钱数的最小值)\n</p>\n<p>\nQnmax\tl r\t(number of max 从A[l]到A[r]每个红包钱数的最大值的个数)\n</p>\n<p>\nQnmin\tl r\t(number of min 从A[l]到A[r]每个红包钱数的最小值的个数)\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\n针对每个询问，输出结果，每行一个。\n</p>\n<h3>\n【样例输入1】\n</h3>\n<pre>10\n4 8 4 7 2 2 5 2 9 8\n10\nQsum 1 6\nQsum 3 4\nCadd 3 4 8\nCadd 5 6 6\nQsum 6 9\nCadd 7 8 4\nQsum 8 8\nCadd 7 8 8\nCadd 2 5 2\nCadd 7 10 1\n</pre>\n<h3>\n【样例输出1】\n</h3>\n<pre>27\n11\n24\n6\n</pre>\n<h3>\n【样例输入2】\n</h3>\n<pre>10\n7 4 4 0 8 1 1 9 3 3\n10\nCbmin 2 10 3\nQsum 2 7\nCbmax 2 8 5\nCbmin 2 4 5\nQsum 9 10\nCadd 3 6 9\nCbmin 10 10 7\nQnmax 7 7\nQnmax 4 5\nCadd 4 9 2\n</pre>\n<h3>\n【样例输出2】\n</h3>\n<pre>11\n6\n1\n2\n</pre>\n<h3>\n【提示】\n</h3>\n<p>\n各组数据N，M取值，指令种类如下\n</p>\n<p>\n10 10 Cadd Qsum\n</p>\n<p>\n1000 1000 Cadd Cchange Qsum\n</p>\n<p>\n100000 100000 Cadd Cchange Qsum\n</p>\n<p>\n100000 100000 Cadd Cchange Qsum\n</p>\n<p>\n100 100 全部\n</p>\n<p>\n10000 10000 全部\n</p>\n<p>\n10000 10000 全部\n</p>\n<p>\n100000 100000 全部\n</p>\n<p>\n100000 100000 全部\n</p>\n<p>\n100000 100000 全部\n</p>\n<p>\n题目中全部数据可用int保存\n</p>\n<h3>\n【来源】\n</h3>\n<p>\nUBWH\n</p>\n<p>\nUPD：2017.9.15新添数据一组By Mike，现在复杂度不对的算法都跪了……\n</p>\n\n"}]}