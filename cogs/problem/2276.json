{"title":"[HEOI 2016] 排序","time_limit":6000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vNmmiVVWe","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<p>\n在 2016 年，佳媛姐姐喜欢上了数字序列。因而他经常研究关于序列的一些奇奇怪怪的问题，现在他在研究一个难题，需要你来帮助他。\n</p>\n<p>\n这个难题是这样子的：给出一个 $1$ 到 $n$ 的全排列，现在对这个全排列序列进行 $m$ 次局部排序，排序分为两种：\n</p>\n<p>\n- $(0,l,r)$ 表示将区间 $[l,r]$ 的数字升序排序\n</p>\n<p>\n- $(1,l,r)$ 表示将区间 $[l,r]$ 的数字降序排序\n</p>\n<p>\n最后询问第 $q$ 个位置上的数字。\n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n输入数据的第一行喂两个整数 $n$ 和 $m$。$n$ 表示序列的长度，$m$ 表示局部排序的次数。$1≤n,m≤10^5$\n</p>\n<p>\n第二行为 $n$ 个整数，表示 $1$ 到 $n$ 的一个全排列。\n</p>\n<p>\n接下来输入 $m$ 航，每一行有三个整数 $op,l,r$，$op$ 为 $0$ 代表升序排序，$op$ 为 $1$ 代表降序排序，$l,r$ 表示排序的区间。\n</p>\n<p>\n最后输入一个整数 $q$，$q$ 表示排序完之后询问的位置，$1≤q≤n$。\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\n输出数据仅有一行，一个整数 ，表示按照顺序将全部的部分排序结束后第 $q$ 位置上的数字。\n</p>\n<h3>\n【样例输入】\n</h3>\n<pre>6 3\n1 6 2 5 3 4\n0 1 4\n1 3 6\n0 2 4\n3\n</pre>\n<h3>\n【样例输出】\n</h3>\n<pre>5\n</pre>\n<h3>\n【数据范围】\n</h3>\n<p>\n对于30%的数据，$1≤n≤100$，$1≤m≤100$\n</p>\n<p>\n对于100%的数据，$1≤n≤10^5$，$1≤m≤10^5$\n</p>\n<p>\n<img src=\"/upload/image/20160424/20160424201225_94802.png\" alt=\"\"/> \n</p>\n<p>\n<img src=\"/upload/image/20160424/20160424201232_17799.png\" alt=\"\"/> \n</p>\n<p>\n<img src=\"/upload/image/20160424/20160424201240_36129.png\" alt=\"\"/> \n</p>\n\n"}]}