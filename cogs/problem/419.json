{"title":"[IOI2009]区域发展","time_limit":8000,"memory_limit":512,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=pSQJQxqkP","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<p>\n联合国区域发展署（UNRDA）有非常清晰的组织结构。它雇佣了总共N个人，每个人都来自世界上R个不同的地区之一。员工们按照资历从1到N编号（含1，N），其中1号员工即主席有着最高的资历。R个地区被任意地从1到R编号。除主席之外的每一位员工都有一名直接上司。直接上司的资历总是比他/她手下的员工高。\n</p>\n<p>\n我们称员工A是员工B的管理者，当且仅当A是B的直接上司，或A是B的直接上司的管理者。例如，可以发现主席是所有其他员工的管理者。并且，显然没有两名员工互为管理者。\n</p>\n<p>\n不幸的是，联合国调查局（UNBI）最近接到了一些投诉，声称区域发展署的组织结构是不平衡的，因而会偏袒某些地区。为了调查这些指责，调查局希望建立一个计算机系统，使得给出发展署的组织结构后，能够回答一些如下格式的询问：给定两个不同的地区r1和r2，问发展署中有多少对员工e1和e2，使得e1来自地区r1，e2来自地区r2，并且e1是e2的管理者。每个询问都有两个参数：地区r1和r2，而其结果是一个整数：满足上述要求的不同(e1,e2)有多少对。\n</p>\n<p>\n写一个程序，在给定发展署所有员工来自的地区，以及每一名员工的直接上司后，回答上述询问。\n</p>\n<h3>\n【数据规模】\n</h3>\n<p>\n1&lt;=N&lt;=200000 —— 雇员人数\n</p>\n<p>\n1&lt;=R&lt;=25000 ——地区数量\n</p>\n<p>\n1&lt;=Q&lt;=200000 —— 询问总数\n</p>\n<p>\n1&lt;=Hk&lt;=R —— k号员工所来自地区（1&lt;=k&lt;=N）\n</p>\n<p>\n1&lt;=Sk&lt;k —— k号员工的直接上司（2&lt;=k&lt;=N）\n</p>\n<p>\n1&lt;=r1，r2&lt;=R —— 询问中的两个地区\n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n第一行三个整数：N，R，Q，用空格隔开。\n</p>\n<p>\n接下来N行按资历顺序描述了发展署中的N名员工。N行中的第k行描述了编号为k的员工。N行中的第一行（即对于主席的描述）包含一个整数：来自地区H1.其余N-1行包含两个空格隔开的整数：直接上司Sk，来自地区Hk。\n</p>\n<p>\n接下来的Q行包含了Q个询问，每个询问一行，两个整数r1,r2.\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\nQ行Q个整数，即Q个询问的答案。\n</p>\n<h3>\n【输入样例】\n</h3>\n<p>\n6 3 4\n</p>\n<p>\n1\n</p>\n<p>\n1 2\n</p>\n<p>\n1 3\n</p>\n<p>\n2 3\n</p>\n<p>\n2 3\n</p>\n<p>\n5 1\n</p>\n<p>\n1 2\n</p>\n<p>\n1 3\n</p>\n<p>\n2 3\n</p>\n<p>\n3 1\n</p>\n<h3>\n【输出样例】\n</h3>\n<p>\n1\n</p>\n<p>\n3\n</p>\n<p>\n2\n</p>\n<p>\n1\n</p>\n<h3>\n【提示】\n</h3>\n<p>\n有30%的数据，R不超过500.\n</p>\n<p>\n有55%的数据，员工数不超过500.\n</p>\n<p>\n有15%的数据同时满足以上两个条件。\n</p>\n<p>\n有70%的数据至少满足两个条件之一。\n</p>\n<p>\n原题是强制在线的交互式题目。\n</p>\n\n"}]}