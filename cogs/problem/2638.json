{"title":"数列操作ψ","time_limit":1000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vzyJSVejU","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<p>\n给定一个数列a，你需要支持的操作：区间and，区间or，询问区间最大值\n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n一行两个整数$n,m$，表示数列长度和操作个数。\n</p>\n<p>\n接下来一行有$n$个整数，第$i$个数表示$a_i$。\n</p>\n<p>\n接下来$m$行，每一行均为以下三种操作中的一种\n</p>\n<p>\n$1\\ l\\ r\\ val$：$a_i=a_i\\ and\\ val(l\\leq i \\leq r)$\n</p>\n<p>\n$2\\ l\\ r\\ val$：$a_i=a_i\\ or\\ val(l\\leq i \\leq r)$\n</p>\n<p>\n$3\\ l\\ r$：$max\\{a_i\\}(l\\leq i \\leq r)$\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\n对于每一个3操作，输出一行整数表示对应的答案\n</p>\n<h3>\n【样例输入】\n</h3>\n<pre><p>\n8 6\n4 0 5 7 2 9 12 8\n2 2 5 15\n1 3 5 2\n3 5 7\n1 5 7 12\n2 1 6 4\n3 2 6\n</p>\n</pre>\n<h3>\n【样例输出】\n</h3>\n<pre><p>\n12\n15<span style=\"font-family:monospace;\"></span> \n</p>\n</pre>\n<h3>\n【提示】\n</h3>\n<p>\n<br/>\n</p>\n<p>\n对于$20\\%$数据,$n,m\\leq 3000$\n</p>\n<p>\n<br/>\n</p>\n<p>\n另有$20\\%$数据，1,2操作中$l=r$\n</p>\n<p>\n<br/>\n</p>\n<p>\n另有$20\\%$数据，3操作中$l=r$\n</p>\n<p>\n<br/>\n</p>\n<p>\n对于$100\\%$数据，$1\\leq n,m\\leq100000,0\\leq a_i,val\\leq10^9$\n</p>\n<p>\n<br/>\n</p>\n<p>\n保证所有操作中$1\\leq l\\leq r\\leq n$\n</p>\n<p>\n<br/>\n</p>\n<p>\n很水的随机数据\n</p>\n<p>\n<br/>\n</p>\n<p>\n感谢Yveh大神提醒，该题只用一个log就可以做，两个log的标程已替换成一个log的，时限改为1s\n</p>\n<h3>\n【来源】\n</h3>\n<p>\n吉老师课件《小清新线段树》\n</p>\n\n"}]}