{"title":"[国家集训队2012]字符串游戏","time_limit":3000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vSmJikUaV","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n<link type=\"text/css\" href=\"../../css/Tsinsen2011.css\" rel=\"stylesheet\"/>\n<div class=\"probtitle\" id=\"ptit\">\n字符串游戏(徐捷)\n</div>\n<div style=\"text-align:center;font-size:14px;font-weight:bold;vertical-align:middle;\" id=\"pres\">\n时间限制：3.0s   内存限制：256.0MB\n</div>\n<div id=\"psrc\" style=\"margin-top:20px;display:none;\">\n<div class=\"pdsec\">\n试题来源\n</div>\n<div class=\"pdcont\">\n</div>\n</div>\n<div id=\"pcont1\" style=\"margin-top:20px;display:block;\">\n<h3>\n【问题描述】\n</h3>\n<div class=\"pdcont\">\n给定N个仅有a~z组成的字符串a<sub>i</sub>,每个字符串都有一个权值v<sub>i</sub>,有M次操作，操作分三种：<br/>\nCv x v&#39;:把第x个字符串的权值修改为v&#39;<br/>\nCs x a&#39;:把第x个字符串修改成a&#39;<br/>\nQ:求出当前的最大权字符串集合，使得这个集合中的字符串经过重新排列后满足除最后一个字符串外，前一个字符串是后一个的前缀(两个字符串相同也是前缀关系，也可以一个字符串都不选)<br/>\n前50%的数据可以接受离线算法，后50%的数据要求在线算法。<br/>\n</div>\n<h3>\n【输入格式】\n</h3>\n<div class=\"pdcont\">\n输入的第一行包含一个正整数Test表示当前的数据类型。<br/>\n输入的第二行包含两个正整数N,M表示字符串数和操作数。<br/>\n以下N行，每行一个字符串a<sub>i</sub><br/>\n第N+3行包含N个整数v<sub>i</sub><br/>\n以下M行，为M次操作，操作有三种Cv x v&#39;,Cs x a&#39;,Q,第三种操作如题目描述一样，对于Test=1的修改操作，不用做   任何变化，对于Test=2的修改操作，假设当前最后一次询问操作的答案是ans(如果还没有询问操作，ans=0),那么对于第   一种操作中的v&#39;=min(1000,v&#39;+(ans mod 1000)),对于第二种操作的字符串a&#39;,它的每一位都要加上ans  mod 26(a~z循环)<br/>\n</div>\n<h3>\n【输出格式】\n</h3>\n<div class=\"pdcont\">\n对于每一次询问输出合法的最大权字符串集合的权值和。<br/>\n</div>\n<h3>\n【样例输入】\n</h3>\n<div class=\"pddata\">\n1<br/>\n5 5<br/>\naba<br/>\nab<br/>\nbabb<br/>\nabaa<br/>\nabab<br/>\n-2 1 4 2 3<br/>\nQ<br/>\nCv 1 2<br/>\nQ<br/>\nCs 3 abaab<br/>\nQ<br/>\n</div>\n<h3>\n【样例输出】\n</h3>\n<div class=\"pddata\">\n4<br/>\n6<br/>\n9<br/>\n</div>\n<h3>\n【数据规模和约定】\n</h3>\n<div class=\"pdcont\">\n数据分两种，A类数据可以用离线的方法来完成，B类数据必须使用在线算法。<br/>\n令len=输入数据中所有出现的字符串总长度<br/>\n|v|&lt;1001<br/>\n<table style=\"border-collapse:collapse;border:medium none;\" cellpadding=\"2px\" cellspacing=\"0\" align=\"center\">\n<tbody>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n编号<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n数据类别<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n范围<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n1<br/>\n</td>\n<td rowspan=\"10\" style=\"border:1pt solid;\" valign=\"top\">\nA<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nN,M≤30,len≤500<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n2<br/>\n</td>\n<td rowspan=\"3\" style=\"border:1pt solid;\" valign=\"top\">\nN,M≤1000,len≤10000<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n3<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n4<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n5<br/>\n</td>\n<td rowspan=\"6\" style=\"border:1pt solid;\" valign=\"top\">\nN≤50000,M≤10<sup>5</sup>,len≤10<sup>6</sup><br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n6<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n7<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n8<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n9<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n10<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n11<br/>\n</td>\n<td rowspan=\"10\" style=\"border:1pt solid;\" valign=\"top\">\nB<br/>\n</td>\n<td rowspan=\"10\" style=\"border:1pt solid;\" valign=\"top\">\nN≤50000,M≤10<sup>5</sup>,len≤10<sup>6</sup><br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n12<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n13<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n14<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n15<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n16<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n17<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n18<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n19<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\n20<br/>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n\n"}]}