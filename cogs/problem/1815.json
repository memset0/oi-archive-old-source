{"title":"[国家集训队2012]矩形计算","time_limit":2000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vNQXJkUkg","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>\n<link type=\"text/css\" href=\"../../css/Tsinsen2011.css\" rel=\"stylesheet\"/>\n<div class=\"probtitle\" id=\"ptit\">\n矩形计算(钟沛林)\n</div>\n<div style=\"text-align:center;font-size:14px;font-weight:bold;vertical-align:middle;\" id=\"pres\">\n时间限制：2.0s   内存限制：256.0M\n</div>\n<div id=\"psrc\" style=\"margin-top:20px;\">\n</div>\n<div id=\"pcont\" style=\"margin-top:20px;\">\n<h3>\n【问题描述】\n</h3>\n<div class=\"pdcont\">\n输入一个n*m的矩阵，矩阵的每一个元素都是一个整数，然后有q个询问，每次询问一个子矩阵的权值。矩阵的权值是这样定义的，对于一个整数x，如果它在该矩阵中出现了p次，那么它给该矩阵的权值就贡献p<sup>2</sup>。<br/>\n</div>\n<h3>\n【输入格式】\n</h3>\n<div class=\"pdcont\">\n第一行两个整数n，m表示矩阵的规模。<br/>\n接下来n行每行m个整数，表示这个矩阵的每个元素。<br/>\n再下来一行一个整数q，表示询问个数。<br/>\n接下来q行每行四个正整数x1，y1，x2，y2，询问以第x1行第y1列和第x2行第y2列的连线为对角线的子矩阵的权值。<br/>\n</div>\n<h3>\n【输出格式】\n</h3>\n<div class=\"pdcont\">\n输出q行每行一个整数回答对应询问。<br/>\n</div>\n<h3>\n【样例输入】\n</h3>\n<div class=\"pddata\">\n3 4<br/>\n1 3 2 1<br/>\n1 3 2 4<br/>\n1 2 3 4<br/>\n8<br/>\n1 2 2 1<br/>\n1 1 2 1<br/>\n1 1 3 4<br/>\n1 1 1 1<br/>\n2 2 3 3<br/>\n3 4 2 2<br/>\n1 3 3 1<br/>\n2 4 3 4<br/>\n</div>\n<h3>\n【样例输出】\n</h3>\n<div class=\"pddata\">\n8<br/>\n4<br/>\n38<br/>\n1<br/>\n8<br/>\n12<br/>\n27<br/>\n4<br/>\n</div>\n<h3>\n【数据规模和约定】\n</h3>\n<div class=\"pdcont\">\n对于全部数据<br/>\n1&lt;=n,m&lt;=200<br/>\nq&lt;=100000<br/>\n|矩阵元素大小|&lt;=2*10<sup>9</sup><br/>\n<table style=\"border-collapse:collapse;border:medium none;\" cellpadding=\"2px\" cellspacing=\"0\" align=\"center\">\n<tbody>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase1<br/>\n</td>\n<td colspan=\"2\" style=\"border:1pt solid;\" valign=\"top\">\n3 3<br/>\n-1 1 2<br/>\n-1 -1 1<br/>\n10 2 1<br/>\n3<br/>\n1 3 3 1<br/>\n1 3 2 2<br/>\n2 1 3 2<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase2<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=10,m&lt;=10,q&lt;=100000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase3<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=100,m&lt;=100,q&lt;=5000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase4<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=200,m&lt;=200,q&lt;=1000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase5<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=200,m&lt;=200,q&lt;=1000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase6<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=200,m&lt;=200,q&lt;=1000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase7<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=100,m&lt;=100,q&lt;=50000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n原矩阵中的不同元素不超过200<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase8<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=100,m&lt;=100,q&lt;=50000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n原矩阵中的不同元素不超过200<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase9<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=100,m&lt;=100,q&lt;=50000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n原矩阵中的不同元素不超过200<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase10<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=200,m&lt;=200,q&lt;=100000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n原矩阵中的不同元素不超过200<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase11<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=200,m&lt;=200,q&lt;=100000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n原矩阵中的不同元素不超过200<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase12<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=200,m&lt;=200,q&lt;=100000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n原矩阵中的不同元素不超过200<br/>\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase13<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=100,m&lt;=100,q&lt;=100000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase14<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=100,m&lt;=100,q&lt;=100000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase15<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=200,m&lt;=200,q&lt;=100000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase16<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=200,m&lt;=200,q&lt;=100000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase17<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=200,m&lt;=200,q&lt;=100000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase18<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=200,m&lt;=200,q&lt;=100000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase19<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=200,m&lt;=200,q&lt;=100000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n<tr style=\"border:1pt solid;\" align=\"center\">\n<td style=\"border:1pt solid;\" valign=\"top\">\ncase20<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\nn&lt;=200,m&lt;=200,q&lt;=100000<br/>\n</td>\n<td style=\"border:1pt solid;\" valign=\"top\">\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n\n"}]}