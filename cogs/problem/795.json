{"title":"[HAOI 2012] 高速公路","time_limit":3000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=pSxJmSWPg","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n第二题：高速公路(road)\n</h3>\n<p>\n时间限制：3秒\n</p>\n<p>\n输入：road.in\n</p>\n<p>\n输出：road.out\n</p>\n<h3>\n问题描述\n</h3>\n<p>\nY901高速公路是一条重要的交通纽带，政府部门建设初期的投入以及使用期间的养护费用都不低，因此政府在这条高速公路上设立了许多收费站。\n</p>\n<p>\nY901高速公路是一条由N-1段路以及N个收费站组成的东西向的链，我们按照由西向东的顺序将收费站依次编号为1~N，从收费站i行驶到i+1(或从i+1行驶到i)需要收取Vi的费用。高速路刚建成时所有的路段都是免费的。\n</p>\n<p>\n政府部门根据实际情况，会不定期地对连续路段的收费标准进行调整，根据政策涨价或降价。\n</p>\n<p>\n无聊的小A同学总喜欢研究一些稀奇古怪的问题，他开车在这条高速路上行驶时想到了这样一个问题:对于给定的l,r(l&lt;r),在第l个到第r个收费站里等概率随机取出两个不同的收费站a和b，那么从a行驶到b将期望花费多少费用呢?<r),在第l个到第r个收费站里等概率随机取出两个不同的收费站a和b，那么从a行驶到b将期望花费多少费用呢?< span=\"\"></r),在第l个到第r个收费站里等概率随机取出两个不同的收费站a和b，那么从a行驶到b将期望花费多少费用呢?<>\n</p>\n<h3>\n输入\n</h3>\n<p>\n第一行2个正整数N,M，表示有N个收费站，M次调整或询问\n</p>\n<p>\n接下来M行，每行将出现以下两种形式中的一种\n</p>\n<p>\nC l r v 表示将第l个收费站到第r个收费站之间的所有道路的通行费全部增加v\n</p>\n<p>\nQ l r   表示对于给定的l,r，要求回答小A的问题\n</p>\n<p>\n所有C与Q操作中保证1&lt;=l l&lt;r,在第l个到第r个收费站里等概率随机取出两个不同的收费站a和b，那么从a行驶到b将期望花费多少费用呢?<r<=n< span=\"\"></r<=n<>\n</p>\n<h3>\n输出\n</h3>\n<p>\n对于每次询问操作回答一行，输出一个既约分数\n</p>\n<p>\n若答案为整数a，输出a/1\n</p>\n<h3>\n样例输入\n</h3>\n<p>\n4 5\n</p>\n<p>\nC 1 4 2\n</p>\n<p>\nC 1 2 -1\n</p>\n<p>\nQ 1 2\n</p>\n<p>\nQ 2 4\n</p>\n<p>\nQ 1 4\n</p>\n<h3>\n样例输出\n</h3>\n<p>\n1/1\n</p>\n<p>\n8/3\n</p>\n<p>\n17/6\n</p>\n<h3>\n数据规模\n</h3>\n<p>\n所有C操作中的v的绝对值不超过10000\n</p>\n<p>\n在任何时刻任意道路的费用均为不超过10000的非负整数\n</p>\n<p>\n所有测试点的详细情况如下表所示\n</p>\n<table>\n<tbody>\n<tr>\n<td>\n<p>\nTest\n</p>\n</td>\n<td>\n<p>\nN\n</p>\n</td>\n<td>\n<p>\nM\n</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>\n1\n</p>\n</td>\n<td>\n<p>\n=10\n</p>\n</td>\n<td>\n<p>\n=10\n</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>\n2\n</p>\n</td>\n<td>\n<p>\n=100\n</p>\n</td>\n<td>\n<p>\n=100\n</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>\n3\n</p>\n</td>\n<td>\n<p>\n=1000\n</p>\n</td>\n<td>\n<p>\n=1000\n</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>\n4\n</p>\n</td>\n<td>\n<p>\n=10000\n</p>\n</td>\n<td>\n<p>\n=10000\n</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>\n5\n</p>\n</td>\n<td>\n<p>\n=50000\n</p>\n</td>\n<td>\n<p>\n=50000\n</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>\n6\n</p>\n</td>\n<td>\n<p>\n=60000\n</p>\n</td>\n<td>\n<p>\n=60000\n</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>\n7\n</p>\n</td>\n<td>\n<p>\n=70000\n</p>\n</td>\n<td>\n<p>\n=70000\n</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>\n8\n</p>\n</td>\n<td>\n<p>\n=80000\n</p>\n</td>\n<td>\n<p>\n=80000\n</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>\n9\n</p>\n</td>\n<td>\n<p>\n=90000\n</p>\n</td>\n<td>\n<p>\n=90000\n</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>\n10\n</p>\n</td>\n<td>\n<p>\n=100000\n</p>\n</td>\n<td>\n<p>\n=100000\n</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\n<br/>\n</p>\n\n"}]}