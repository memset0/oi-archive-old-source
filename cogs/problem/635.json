{"title":"[GZOI2011] 图形格式","time_limit":1000,"memory_limit":128,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=pyymNyejg","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<p>\n\t<strong>题目描述</strong>：<strong> </strong><br/>\n大家对GIF这种图形格式一定不陌生，现在我们用字符串压缩来解释GIF压缩图形的基本原理。<br/>\nGIF压缩的基础是一个数字编码与字符串映射关系的字典。字典只包含可能出现在待压缩字符串中的字符或子串的映射关系，且数字编码长度相同。例如，假如要压缩的字符串可能包含所有26个大写字母，那么字典可初始化为（A,00），（B,01），（C,02），…，（Z,25），注意数字编码长度都是2。假如我们只是想压缩DNA序列，那么字典可初始化为（A,0），（T,1），（G,2），（C,3）。<br/>\n压缩算法如下：<br/>\n1.在字典中查找字串未压缩部分最长的前缀，将这个前缀替换成字典对应的数字编码。<br/>\n2.如果字串尚有未完成压缩的部分，则在字典中添加一个映射关系（s,n），s是上一步骤找到的前缀加紧接其后的字符，n是字典中尚未使用的最小的编码。<br/>\n我们以压缩字符串ABABBAABB为例说明，由于字串只包含A和B，字典初始只有两项（A,0）和（B,1）。\n</p>\n<table border=\"1\" cellpadding=\"0\" cellspacing=\"0\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<br/>\n待压缩字串\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t最长前缀\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t替换成编码\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t新增字典条目\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\tABABBAABB\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\tA\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t0\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t(AB,2)\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t0BABBAABB\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\tB\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t1\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t(BA,3)\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t01ABBAABB\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\tAB\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t2\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t(ABB,4)\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t012BAABB\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\tBA\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t3\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t(BAA,5)\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t0123ABB\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\tABB\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t4\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"142\">\n\t\t\t\t<p>\n\t\t\t\t\t---\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n<p>\n\t最终的压缩结果是01234。<br/>\n还有一点要特别注意，当字典中不断添加新的映射关系，数字编码长度在某个步骤将突破初始化时的长度。由于字典所有数字编码长度要保持一致，这时要将字典中原有的数字编码前补0，之后的压缩按新的数字编码进行替换，而原有已替换的数字编码则不受影响。例如，ABABBAABBAABAABAB将压缩成01234027301，而不是0123402731。<br/>\n请对输入的初始字典和压缩后的编码进行解压。<br/>\n<strong>输入格式</strong>（GIF.in）：<br/>\n第一行的字符串是压缩后的数字编码。第二行是初始的字典，由一个正整数n开始，n(1&lt;=n&lt;=100)是字典初始的条目数，后面接着n个字符串，字典中的第一个字符串编码为0（如n&gt;10则是00），第二个字符串编码为1，以此类推。<br/>\n<strong>输出格式</strong>（GIF.out）：<br/>\n输出只有一行，是解压后的字符串。我们保证所有输入都是可以解压的。<br/>\n<strong>样例 </strong>\n</p>\n<table border=\"1\" cellpadding=\"0\" cellspacing=\"0\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td valign=\"top\" width=\"284\">\n\t\t\t\t<br/>\nGIF.in\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"284\">\n\t\t\t\t<p>\n\t\t\t\t\tGIF.out\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td valign=\"top\" width=\"284\">\n\t\t\t\t<p>\n\t\t\t\t\t01234<br/>\n2 A B\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"284\">\n\t\t\t\t<p>\n\t\t\t\t\tABABBAABB\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td valign=\"top\" width=\"284\">\n\t\t\t\t<p>\n\t\t\t\t\t01234027301<br/>\n2 A B\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"284\">\n\t\t\t\t<p>\n\t\t\t\t\tABABBAABBAABAABAB\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td valign=\"top\" width=\"284\">\n\t\t\t\t<p>\n\t\t\t\t\t21104<br/>\n3 BA A C\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"284\">\n\t\t\t\t<p>\n\t\t\t\t\tCAABAAA\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td valign=\"top\" width=\"284\">\n\t\t\t\t<p>\n\t\t\t\t\t01<br/>\n2 JA VA\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t\t<td valign=\"top\" width=\"284\">\n\t\t\t\t<p>\n\t\t\t\t\tJAVA\n\t\t\t\t</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n"}]}