{"title":"[SDOI 2017] 树点涂色","time_limit":1000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vyQNmVegU","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<div class=\"content\">\n<div>\nBob有一棵n个点的有根树，其中1号点是根节点。Bob在每个点上涂了颜色，并且每个点上的颜色不同。定义一条路\n</div>\n<div>\n径的权值是：这条路径上的点（包括起点和终点）共有多少种不同的颜色。Bob可能会进行这几种操作：\n</div>\n<div>\n1 x:把点x到根节点的路径上所有的点染上一种没有用过的新颜色。\n</div>\n<div>\n2 x y:求x到y的路径的权值。\n</div>\n<div>\n3 x y:在以x为根的子树中选择一个点，使得这个点到根节点的路径权值最大，求最大权值。\n</div>\n<div>\nBob一共会进行m次操作\n</div>\n<div>\n</div>\n</div>\n<h3>\n【输入格式】\n</h3>\n<div class=\"content\">\n<div>\n第一行两个数n,m。\n</div>\n<div>\n接下来n-1行，每行两个数a,b，表示a与b之间有一条边。\n</div>\n<div>\n接下来m行，表示操作，格式见题目描述\n</div>\n<div>\n1&lt;=n,m&lt;=100000\n</div>\n<div>\n</div>\n</div>\n<h3>\n【输出格式】\n</h3>\n<div class=\"content\">\n<div>\n每当出现2,3操作，输出一行。\n</div>\n<div>\n如果是2操作，输出一个数表示路径的权值\n</div>\n<div>\n如果是3操作，输出一个数表示权值的最大值\n</div>\n<div>\n</div>\n</div>\n<h3>\n【样例输入】\n</h3>\n<pre>5 6\n1 2\n2 3\n3 4\n3 5\n2 4 5\n3 3\n1 4\n2 4 5\n1 5\n2 4 5\n</pre>\n<h3>\n【样例输出】\n</h3>\n<pre>3\n4\n2\n2\n</pre>\n<p>\n<br/>\n</p>\n\n"}]}