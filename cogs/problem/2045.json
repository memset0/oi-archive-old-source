{"title":"[CodeChef KNGHTMOV] 骑士移动","time_limit":1000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vmNXNVaqg","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<p>\n考虑一张无限大的方格棋盘。我们有一个“骑士”，它必须从(0,0)格开始，按照如下规则，移动至(X,Y)格：每一步，它只能从(u,v)格移动至(u+Ax,v+Ay)或者(u+Bx,v+By)。注意，该规则可能不同于国际象棋中骑士的移动规则。\n</p>\n<p>\n此外，棋盘上有K个障碍格，骑士不能进入这些格子。\n</p>\n<p>\n你的任务是计算骑士有多少种到达指定位置的方案。我们认为两种方案不同，当且仅当它们的步数不同，或者存在某个i使得两种方案中，骑士在第i步到达的格子不同。注意，骑士在到达(X,Y)格后还可能继续移动。\n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n第1行1个整数T，代表测试数据组数。每组数据格式如下：\n</p>\n<p>\n第1行3个整数X,Y,K。\n</p>\n<p>\n第2行4个整数Ax,Ay,Bx,By。\n</p>\n<p>\n第3行K对整数，每对都是一个障碍格的坐标。如果K=0，则这一行不存在。\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\n对每组数据，输出移动方案数模1000000007（10^9+7）的值。如果有无穷多种方案，输出-1.\n</p>\n<h3>\n【样例输入】\n</h3>\n<p>\n3\n</p>\n<p>\n3 3 0\n</p>\n<p>\n1 2 2 1\n</p>\n<p>\n9 9 2\n</p>\n<p>\n1 2 2 1\n</p>\n<p>\n1 2 6 6\n</p>\n<p>\n1 1 0\n</p>\n<p>\n0 0 0 0\n</p>\n<h3>\n【样例输出】\n</h3>\n<p>\n2\n</p>\n<p>\n4\n</p>\n<p>\n0\n</p>\n<h3>\n【提示】\n</h3>\n<p>\n在前两个数据中，骑士的移动方式相当于国际象棋中的“骑士”，但只有两个方向。在第一个数据中，有两种方案：(0,0)-&gt;(1,2)-&gt;(3,3)和(0,0)-&gt;(2,1)-&gt;(3,3).\n</p>\n<p>\n在第三个数据中，骑士无法移动，因此永远无法到达终点。\n</p>\n<p>\n所有坐标的绝对值不超过500\n</p>\n<p>\n(0,0)不是障碍格\n</p>\n<p>\n(X,Y)不是障碍格\n</p>\n<p>\n1&lt;=T&lt;=5\n</p>\n<p>\n对于40%的数据，0&lt;=K&lt;=5\n</p>\n<p>\n对于100%的数据，0&lt;=K&lt;=15\n</p>\n<h3>\n【来源】\n</h3>\n<p>\n<a href=\"https://www.codechef.com/problems/KNGHTMOV/\" target=\"_blank\">Codechef Knight Moving</a> \n</p>\n\n"}]}