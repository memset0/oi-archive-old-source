{"title":"[SCOI 2011] 棘手的操作","time_limit":1000,"memory_limit":128,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=pQiyzxeUe","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<p>\n有N个节点，标号从1到N，这N个节点一开始相互不连通。第i个节点的初始权值为a[i]，接下来有如下一些操作：\n</p>\n<p>\n<strong>  U x y: 加一条边，连接第x个节点和第y个节点</strong> \n</p>\n<p>\n<strong>  A1 x v: 将第x个节点的权值增加v</strong> \n</p>\n<p>\n<strong>  A2 x v: 将第x个节点所在的连通块的所有节点的权值都增加v</strong> \n</p>\n<p>\n<strong>  A3 v: 将所有节点的权值都增加v</strong> \n</p>\n<p>\n<strong>  F1 x: 输出第x个节点当前的权值</strong> \n</p>\n<p>\n<strong>  F2 x: 输出第x个节点所在的连通块中，权值最大的节点的权值</strong> \n</p>\n<p>\n<strong>  F3: 输出所有节点中，权值最大的节点的权值</strong> \n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n输入的第一行是一个整数N，代表节点个数。接下来一行输入N个整数，a[1], a[2], ..., a[N]，代表N个节点的初始权值。\n</p>\n<p>\n再下一行输入一个整数Q，代表接下来的操作数。\n</p>\n<p>\n最后输入Q行，每行的格式如题目描述所示。\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\n对于操作F1, F2, F3，输出对应的结果，每个结果占一行。\n</p>\n<h3>\n【样例输入】\n</h3>\n<pre>3\n0 0 0\n8\nA1 3 -20\nA1 2 20\nU 1 3\nA2 1 10\nF1 3\nF2 3\nA3 -10\nF3\n</pre>\n<h3>\n【样例输出】\n</h3>\n<pre>-10\n10\n10\n</pre>\n<h3>\n【提示】\n</h3>\n<p>\n对于30%的数据，保证 $N&lt;=100，Q&lt;=10000$\n</p>\n<p>\n对于80%的数据，保证 $N&lt;=100000，Q&lt;=100000$\n</p>\n<p>\n对于100%的数据，保证 $N&lt;=300000，Q&lt;=300000$\n</p>\n<p>\n对于所有的数据，保证输入合法，并且 $-1000&lt;=v, a[1], a[2], ..., a[N]&lt;=1000$\n</p>\n<h3>\n【来源】\n</h3>\n<p>\nSCOI 2011\n</p>\n\n"}]}