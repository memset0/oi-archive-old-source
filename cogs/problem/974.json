{"title":"化学反应","time_limit":1000,"memory_limit":512,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=pmxJiQPWq","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n\n<p>\n\t比尔是学校里的化学老师，他为学生们准备了一大堆测试题。每个测试有一个化学式子和几组反应产物，学生从中选择正确的一组。可是比尔并不确定他在输入计算机时是否打错了字，这样学生们就可以简单地判断等式左右两边物质是否守恒来看哪组正确了。\n</p>\n<p>\n\t你需要写一个程序来帮助比尔。程序读入为学生们准备的测试，包含等式左边，一个表示选项数量的整数，若干个可能的等式右边。程序需要判断等式左右是否有相同相等的化学元素。\n</p>\n<p>\n\t比尔为你这个不懂化学的计算机乡巴佬制定了一些规则来帮助你。等式两边都是不包含空格的字符串，包含若干个用 &#39;+&#39;（加号）隔开的化学物质。每个物质之前有一个可选的整系数表示物质数量。每个集团后有一个可选的整系数下标，集团可能只有一个元素或是用圆括号包住的几个元素。每个元素以一个大写字母和一个可选的小写字母表示。\n</p>\n<p>\n\t详细规则用 BNF 图表示，如此：\n</p>\n<ul>\n\t<li>\n\t\t&lt;式子&gt; ::= [&lt;数字&gt;] &lt;物质&gt; { &#39;+&#39; [&lt;数字&gt;] &lt;物质&gt; }\n\t</li>\n\t<li>\n\t\t&lt;物质&gt; ::= &lt;集团&gt; [&lt;数字&gt;] { &lt;集团&gt; [&lt;数字&gt;] }\n\t</li>\n\t<li>\n\t\t&lt;集团&gt; ::= &lt;元素&gt; | &#39;(&#39; &lt;物质&gt; &#39;)&#39;\n\t</li>\n\t<li>\n\t\t&lt;元素&gt; ::= &lt;大写字母&gt; [ &lt;小写字母&gt; ]\n\t</li>\n\t<li>\n\t\t&lt;大写字母&gt; ::= &#39;A&#39;..&#39;Z&#39;\n\t</li>\n\t<li>\n\t\t&lt;小写字母&gt; ::= &#39;a&#39;..&#39;z&#39;\n\t</li>\n\t<li>\n\t\t&lt;数字&gt; ::= &#39;1&#39;..&#39;9&#39; { &#39;0&#39;..&#39;9&#39; }\n\t</li>\n</ul>\n<p>\n\t设某种元素在式子中出现了 X 次，X 是该元素的系数与下标乘积之和。例如下面的化学式：\n</p>\n<p>\n\t<tt>C2H5OH+3O2+3(SiO2)</tt>\n</p>\n<ul>\n\t<li>\n\t\t<tt>C</tt> 共出现了 2 次。\n\t</li>\n\t<li>\n\t\t<tt>H</tt> 共出现了 6 次 (5 + 1)。\n\t</li>\n\t<li>\n\t\t<tt>O</tt> 共出现了 13 次 (1 + 3*2 + 3*2)。\n\t</li>\n\t<li>\n\t\t<tt>Si</tt> 共出现了 3 次。\n\t</li>\n</ul>\n<p>\n\t式子中所有系数都是整数，默认为 1 ，2 以上明示。每个式子中最多有 100 个字符，每种元素会出现不超过 10000 次。\n</p>\n<h3>\n\t输入\n</h3>\n<p>\n\t第一行包含一个化学式，即等式左边。第二行为一个整数 N (1 ≤ N ≤ 10)，表示测试点数目。接下来 N 行每行描述一个测试点的等式右边。\n</p>\n<h3>\n\t输出\n</h3>\n<p>\n\t输出有 N 行，针对每个比尔的测试点给出答案。对于左右各个元素数量相等的测试点给出如下输出：\n</p>\n<p>\n\t<tt>&lt;等式左边&gt;==&lt;等式右边&gt;</tt>\n</p>\n<p>\n\t如果有元素数量不等，物质不守恒，则输出：\n</p>\n<p>\n\t<tt>&lt;等式左边&gt;!=&lt;等式右边&gt;</tt>\n</p>\n<p>\n\t这里<tt>&lt;等式左边&gt;</tt>必须是输入数据第一行的字符串，<tt>&lt;等式右边&gt;</tt>必须是完整的输入数据对应行的字符串。行中不允许有任何空白或其他什么东西出现。\n</p>\n<h3>\n\t样例输入\n</h3>\n<pre xml:space=\"preserve\"><tt>C2H5OH+3O2+3(SiO2)\n6\n2CO2+3H2O+3SiO2\n2C+6H+13O+3Si\n99C2H5OH+3SiO2\n3SiO4+C2H5OH\n3(Si(O)2)+2CO+3H2O+O2\n2CO+3H2O+3O2+3Si</tt></pre>\n<h3>\n\t样例输出\n</h3>\n<pre xml:space=\"preserve\"><tt>C2H5OH+3O2+3(SiO2)==2CO2+3H2O+3SiO2\nC2H5OH+3O2+3(SiO2)==2C+6H+13O+3Si\nC2H5OH+3O2+3(SiO2)!=99C2H5OH+3SiO2\nC2H5OH+3O2+3(SiO2)==3SiO4+C2H5OH\nC2H5OH+3O2+3(SiO2)==3(Si(O)2)+2CO+3H2O+O2\nC2H5OH+3O2+3(SiO2)!=2CO+3H2O+3O2+3Si</tt></pre>\n<h3>\n\t提示\n</h3>\n<p>\n\t样例中并没有数字 &#39;0&#39;，因为它看起来向化学元素氧的符号 &#39;O&#39;。实际测试点可能包含任何可能的字符。\n</p>\n<h3>\n\t来源\n</h3>\n<p>\n\tNortheastern Europe 2001 e, POJ 1114\n</p>\n\n"}]}