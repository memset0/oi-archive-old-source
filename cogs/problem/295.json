{"title":"[NOI2000] 程序分析器","time_limit":1000,"memory_limit":128,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=pyiXJSVPg","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<p>\n\tTiny Basm语言(简称为TB语言)的巴科斯-瑙尔范式(BNF)为：\n</p>\n<ul>\n\t<li>\n\t\t&lt;程序&gt; ::= &lt;语句&gt; [CrLf] { &lt;语句&gt; [CrLf] }\n\t</li>\n\t<li>\n\t\t&lt;语句&gt; ::= &lt;行号&gt; [Space] &lt;语句体&gt;\n\t</li>\n\t<li>\n\t\t&lt;语句体&gt; ::= &lt;累加语句&gt; | &lt;输出语句&gt; | &lt;转移语句&gt; | &lt;条件语句&gt; | &lt;结束语句&gt;\n\t</li>\n\t<li>\n\t\t&lt;累加语句&gt; ::= &lt;变量&gt; + &lt;整数&gt;\n\t</li>\n\t<li>\n\t\t&lt;输出语句&gt; ::= &lt;变量&gt; ?\n\t</li>\n\t<li>\n\t\t&lt;转移语句&gt; ::= GO [Space] &lt;行号&gt;\n\t</li>\n\t<li>\n\t\t&lt;条件语句&gt; ::= IF [Space] &lt;变量&gt; = &lt;整数&gt; [Space] &lt;转移语句&gt;\n\t</li>\n\t<li>\n\t\t&lt;结束语句&gt; ::= END\n\t</li>\n\t<li>\n\t\t&lt;变量&gt; ::= &lt;字母&gt;\n\t</li>\n\t<li>\n\t\t&lt;行号&gt; ::= &lt;整数&gt;\n\t</li>\n\t<li>\n\t\t&lt;整数&gt; ::= &lt;数字&gt; { &lt;数字&gt; }\n\t</li>\n\t<li>\n\t\t&lt;字母&gt; ::= A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z\n\t</li>\n\t<li>\n\t\t&lt;数字&gt; ::= 0|1|2|3|4|5|6|7|8|9\n\t</li>\n</ul>\n<p>\n\t注：其中“::=”表示定义为，“|”表示或，{}内的项可以重复任意多次或不出现，“[Space]”表示空格(一个字符，ASCII码为32)，“[CrLf]”表示回车/换行(两个字符，ASCII码分别为13和10)。\n</p>\n<p>\n\t错误语句示例(在输入文件中不会出现任何错误语句)： 10[Space]A+1.5 （不符合累加语句的定义，所加的不是整数） 20[Space]A[Space]? （不符合输出语句的定义，多加了一个空格） 30[Space]IF[Space]A=B[Space]GO[Space]10 （不符合条件语句的定义，不应变量=变量）\n</p>\n<p>\n\tTB程序的执行：\n</p>\n<ul>\n\t<li>\n\t\t程序从行号最小的一条语句开始执行，在未遇到条件语句时按行号由小至大顺序执行。\n\t</li>\n\t<li>\n\t\t所有变量在程序执行前被自动初始化为0。\n\t</li>\n\t<li>\n\t\t累加语句将语句中变量的值加上语句中的整数送回该变量。\n\t</li>\n\t<li>\n\t\t输出语句将语句中变量的值在监视器上显示出来。\n\t</li>\n\t<li>\n\t\t执行条件语句时，当且仅当该语句中的变量与紧跟在等号后面的整数值相等，后面的转移语句才被执行。该语句中的所有整数值至多为4位。\n\t</li>\n\t<li>\n\t\t转移语句被执行后，程序将转去执行GO后面指定的行号的语句。\n\t</li>\n\t<li>\n\t\t当程序执行结束语句后，结束整个程序的执行。\n\t</li>\n\t<li>\n\t\t假设该系统能处理任意大小的整数，而不会发生溢出。\n\t</li>\n</ul>\n<p>\n\t请编程，对于给定的TB语言程序P，求该程序所执行的语句数(执行条件语句不论是否成功转移，仅记为执行一条语句)。\n</p>\n<p>\n\t[输入文件]\n</p>\n<ul>\n\t<li>\n\t\t输入文件为一个TB语言程序P，语句数不超过100行。\n\t</li>\n\t<li>\n\t\tP中每条语句的长度不超过20个字符。\n\t</li>\n\t<li>\n\t\tP中转移语句里GO后面的行号一定有对应的语句。\n\t</li>\n\t<li>\n\t\tP中可能有多个不同行号的结束语句。\n\t</li>\n\t<li>\n\t\tP中行号最大的语句一定是结束语句。\n\t</li>\n\t<li>\n\t\tP中的行号都不大于3000。\n\t</li>\n\t<li>\n\t\t输入文件不一定是按行号递增顺序给出P的。\n\t</li>\n</ul>\n<p>\n\t[输出文件]\n</p>\n<ul>\n\t<li>\n\t\t输出文件有且仅有一行：\n\t</li>\n\t<li>\n\t\t如果程序能够正常结束，输出该程序所执行的语句数；\n\t</li>\n\t<li>\n\t\t如果程序不能正常结束，输出-1。\n\t</li>\n</ul>\n<p>\n\t[输入输出文件样例] Input\n</p>\n<pre>10 A+1\n20 IF A=5 GO 60\n60 END\n30 A+2\n40 A?\n50 GO 20\n</pre>\n<p>\n\tOutput\n</p>\n<pre>11\n</pre>\n<p>\n\t[样例说明] 执行语句行号按顺序为 10-&gt;20-&gt;30-&gt;40-&gt;50-&gt;20-&gt;30-&gt;40-&gt;50-&gt;20-&gt;60 共11条语句被执行。\n</p>\n\n"}]}