{"title":"[NOI 2007] 项链工厂","time_limit":4000,"memory_limit":512,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=lNNyxXSkW","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<p>\n【问题描述】\n</p>\n<p>\nT公司是一家专门生产彩色珠子项链的公司，其生产的项链设计新颖、款式多样、价格适中，广受青年人的喜爱。最近T公司打算推出一款项链自助生产系统，使用该系统顾客可以自行设计心目中的美丽项链。\n</p>\n<p>\n该项链自助生产系统包括硬件系统与软件系统，软件系统与用户进行交互并控制硬件系统，硬件系统接受软件系统的命令生产指定的项链。该系统的硬件系统已经完成，而软件系统尚未开发，T公司的人找到了正在参加全国信息学竞赛的你，你能帮助T公司编写一个软件模拟系统吗？\n</p>\n<p>\n一条项链包含N个珠子，每个珠子的颜色是1, 2, …, c中的一种。项链被固定在一个平板上，平板的某个位置被标记位置1，按顺时针方向其他位置被记为2,3,…,N。\n</p>\n<p>\n<img width=\"429\" height=\"447\" src=\"../../../../mw/images/7/77/Necklace2007.jpg\" alt=\"Image:Necklace2007.jpg\"/> \n</p>\n<p>\n你将要编写的软件系统应支持如下命令：\n</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td width=\"155\">\n命令\n</td>\n<td width=\"144\">\n参数限制\n</td>\n<td width=\"326\">\n内容\n</td>\n</tr>\n<tr>\n<td>\nR k\n</td>\n<td>\n0<k<n< td=\"\"></k<n<>\n</td>\n<td>\n意为Rotate k。将项链在平板上顺时针旋转k个位置, 即原来处于位置1的珠子将转至位置k+1，处于位置2的珠子将转至位置k+2，依次类推。\n</td>\n</tr>\n<tr>\n<td>\nF\n</td>\n<td>\n \n</td>\n<td>\n意为Flip。将平板沿着给定的对称轴翻转，原来处于位置1的珠子不动，位置2上的珠子与位置N上的珠子互换，位置3上的珠子与位置N-1上的珠子互换，依次类推。\n</td>\n</tr>\n<tr>\n<td>\nS i j\n</td>\n<td>\n1≤i , j≤N\n</td>\n<td>\n意为Swap i , j。将位置i上的珠子与位置j上的珠子互换。\n</td>\n</tr>\n<tr>\n<td>\nP i j x\n</td>\n<td>\n1≤i , j≤N, x≤c\n</td>\n<td>\n意为Paint i , j , x。将位置i沿顺时针方向到位置j的一段染为颜色x。\n</td>\n</tr>\n<tr>\n<td>\nC\n</td>\n<td>\n \n</td>\n<td>\n意为Count。查询当前的项链由多少个“部分”组成，我们称项链中颜色相同的一段为一个“部分”\n</td>\n</tr>\n<tr>\n<td>\nCS i j\n</td>\n<td>\n1≤i , j≤N\n</td>\n<td>\n意为CountSegment i , j。查询从位置i沿顺时针方向到位置j的一段中有多少个部分组成。\n</td>\n</tr>\n</tbody>\n</table>\n<p>\n【输入文件】\n</p>\n<p>\n输入文件第一行包含两个整数N, c，分别表示项链包含的珠子数目以及颜色数目。第二行包含N个整数，x1, x2…, xn，表示从位置1到位置N的珠子的颜色，1 ≤xi ≤c。第三行包含一个整数Q，表示命令数目。接下来的Q行每行一条命令，如上文所述。\n</p>\n<p>\n【输出文件】\n</p>\n<p>\n对于每一个C和CS命令，应输出一个整数代表相应的答案。\n</p>\n<p>\n【输入样例】\n</p>\n<pre>5 3\n1 2 3 2 1\n4\nC\nR 2\nP 5 5 2\nCS 4 1\n</pre>\n<p>\n【输出样例】\n</p>\n<pre>4\n1\n</pre>\n<p>\n【评分方法】\n</p>\n<p>\n本题没有部分分，你的程序的输出只有和标准答案完全一致才能获得满分， 否则不得分。\n</p>\n<p>\n【数据规模和约定】\n</p>\n<ul>\n<li>\n对于60%的数据，N ≤1 000，Q ≤1 000；\n</li>\n<li>\n对于100%的数据，N ≤500 000，Q ≤500 000，c ≤1 000。\n</li>\n</ul>\n\n"}]}