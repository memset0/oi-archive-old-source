{"title":"[WC2013]平面图","time_limit":2000,"memory_limit":512,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vNSzSkPaP","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<p>\n<br/>\n</p>\n<p>\n    在一个平面图中有 n 个顶点和 m 条直线段，第 i 个顶点的坐标为 (xi,yi)，第 j 条直线段连接顶点 uj 和顶点 vj。权值为 hj，除顶点 uj 和 vj 外直线段 j 不经过其他的顶点。任意两条直线段如果存在公共点，则该公共点一定是一个顶点，此时这两条直线段都会连接这个顶点。对于任意的两个顶点 x 和 y，总是可以找到一顶点序列 a1,a2,…,ak 使得 a1=x,ak=y 且对于任意 1≤i&lt;k 满足 ai 和 ai+1 被一条直线段直接连接。\n</p>\n<p>\n    这 m 条直线段将整个平面分成了若干个区域，其中只有一个区域是无穷大的，其余均是有界的，我们称无穷大的区域为禁区。\n</p>\n<p>\n现在给出 q 次询问，每次给定平面中的任意两个不是顶点且分别不在任意一条直线段上的点 A 和 B，请画一条曲线连接 A 和 B，要求曲线不能经过禁区以及任何顶点，并使得穿过的直线段中权值最大的尽可能小。你需要对每次询问回答这个值最小为多少。\n</p>\n<p>\n<br/>\n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n<br/>\n</p>\n<p>\n第一行有两个正整数 n,m，分别表示顶点数和直线段数。\n</p>\n<p>\n接下来 n 行，每行两个整数，这部分中第 i 行（总第 i+1 行）的两个整数 xi,yi 为顶点 i 的坐标。\n</p>\n<p>\n接下来 m 行，每行三个正整数 u,v,h，表示有一条直线段连接顶点 u 和顶点 v，权值为 h。其中 u≠v。\n</p>\n<p>\n接下来一行，有一个正整数 q，表示询问数量。\n</p>\n<p>\n接下来 q 行，每行四个实数 Ax,Ay,Bx,By，表示一组两个点坐标分别为 (Ax,Ay) 和 (Bx,By) 的询问。\n</p>\n<p>\n<br/>\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\n    输出 q 行，每行一个正整数依次表示每个询问的答案。特别的，若不需要跨过任何一条边即可到达，请输出 0；若不存在合法的曲线，请输出 −1。\n</p>\n<h3>\n【样例输入】\n</h3>\n<pre>9 12\n1 1\n1 2\n1 3\n2 1\n2 2\n2 3\n3 1\n3 2\n3 3\n1 2 10\n2 3 10\n3 6 10\n6 9 10\n9 8 10\n8 7 10\n7 4 10\n4 1 10\n2 5 3\n5 8 2\n5 6 4\n4 5 1\n3\n1.5 1.5 2.5 2.5\n1.5 2.5 2.5 1.5\n0.5 0.5 1.5 1.5\n</pre>\n<h3>\n【样例输出】\n</h3>\n<pre><p>\n2\n</p>\n\n<p>\n3\n</p>\n\n<p>\n-1\n</p>\n</pre>\n<h3>\n【限制与约定】\n</h3>\n<div class=\"table-responsive\">\n<table class=\"table table-bordered table-text-center table-vertical-middle\">\n<thead>\n<tr>\n<th>\n测试点编号\n</th>\n<th>\n$n, m, q$ 的范围\n</th>\n<th>\n$x, y$ 的范围\n</th>\n<th>\n其他特征\n</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\n1\n</td>\n<td>\n$n = 10$，$m = 13$，$q = 20$\n</td>\n<td rowspan=\"2\">\n$0 \\leq x \\leq 1$，$0 \\leq y \\leq 2000$\n</td>\n<td rowspan=\"5\">\n所有直线段长度均等于 $1$\n</td>\n</tr>\n<tr>\n<td>\n2\n</td>\n<td>\n$n = 2012$，$m = 3016$，$q \\leq 1000$\n</td>\n</tr>\n<tr>\n<td>\n3\n</td>\n<td>\n$n, m \\leq 50$，$q \\leq 200$\n</td>\n<td rowspan=\"3\">\n$0 \\leq x,y \\leq 1000$\n</td>\n</tr>\n<tr>\n<td>\n4\n</td>\n<td rowspan=\"2\">\n$n, m \\leq 100000$，$q \\leq 100000$\n</td>\n</tr>\n<tr>\n<td>\n5\n</td>\n</tr>\n<tr>\n<td>\n6\n</td>\n<td rowspan=\"2\">\n$n, m \\leq 2000$，$q \\leq 2000$\n</td>\n<td rowspan=\"5\">\n$0 \\leq x, y \\leq 10^7$\n</td>\n<td>\n每个有界区域都是凸多边形且每条直线段的权值均等于 $1$\n</td>\n</tr>\n<tr>\n<td>\n7\n</td>\n<td>\n每条直线段的权值均等于 $1$\n</td>\n</tr>\n<tr>\n<td>\n8\n</td>\n<td rowspan=\"3\">\n$n, m \\leq 100000$，$q \\leq 100000$\n</td>\n<td rowspan=\"3\">\n无\n</td>\n</tr>\n<tr>\n<td>\n9\n</td>\n</tr>\n<tr>\n<td>\n10\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>\n对于全部数据，均满足 $5 \\leq n, m \\leq 100000$，所有直线段的权值不会超过 $10^9$。所有询问的坐标均为不超过 $10^7$ 的非负实数，且保证是 $0.5$ 的奇数倍。\n</p>\n<p>\n在此键入。\n</p>\n<h3>\n【来源】\n</h3>\n<p>\nWC2013.\n</p>\n\n"}]}