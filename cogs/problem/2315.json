{"title":"[HZOI 2015]奈特","time_limit":1000,"memory_limit":512,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vJiSiVjkg","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<p>\n我们有n个城市，这些城市的关系组成了一棵有根树，首都是树根\n</p>\n<p>\n要求你支持以下操作：\n</p>\n<p>\n第i个操作有以下两种形式：\n</p>\n<p>\n1、1 u 表示在第i个时刻u这个城池被野蛮人的军队暴揍了一顿\n</p>\n<p>\n2、2 u v k val\n</p>\n<p>\n这个操作表示国王将从u城池走到v城池，但是这个国王是处女座\n</p>\n<p>\n所以他只会在没有被揍过的城市或者这个城市被揍的时刻&lt;=val的城市中停留休息\n</p>\n<p>\n又因为这个国王很懒，所以他能休息就一定会休息\n</p>\n<p>\n现在国王希望每次出行前都能知道他第k个休息的城市的编号是多少\n</p>\n<p>\n如果他休息不足k次就可以到达v城池，请输出-1\n</p>\n<p>\n由于野蛮人很奇怪，所以野蛮人不会暴揍一个城池两次或两次以上\n</p>\n<p>\n注意国王并不会在起点和终点休息\n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n第一行输入n表示节点数量\n</p>\n<p>\n以下n个正整数分别表示每个城市的父亲，父亲为0的节点为首都\n</p>\n<p>\n之后输入m表示操作次数\n</p>\n<p>\n以下m个操作如题意所示\n</p>\n<p>\n数据保证每个城池最多会被揍过一次\n</p>\n<p>\n数据保证u!=v,数据保证当第i个操作是第二种操作时，0&lt;=val&lt;=i\n</p>\n<p>\n数据保证n，m&lt;=100000\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\n对于第二种操作输出相应的答案\n</p>\n<h3>\n【样例输入】\n</h3>\n<p>\n样例输入1：\n</p>\n<p>\n<br/>\n</p>\n<p>\n3\n</p>\n<p>\n0 1 2\n</p>\n<p>\n5\n</p>\n<p>\n2 1 3 1 0\n</p>\n<p>\n1 2\n</p>\n<p>\n2 1 3 1 0\n</p>\n<p>\n2 1 3 1 1\n</p>\n<p>\n2 1 3 1 2\n</p>\n<p>\n样例输入2：\n</p>\n<p>\n6\n</p>\n<p>\n2 5 2 2 0 5\n</p>\n<p>\n3\n</p>\n<p>\n2 1 6 2 0\n</p>\n<p>\n1 2\n</p>\n<p>\n2 4 5 1 0\n</p>\n<p>\n<br/>\n</p>\n<h3>\n【样例输出】\n</h3>\n<p>\n样例输出1：\n</p>\n<p>\n2\n</p>\n<p>\n-1\n</p>\n<p>\n-1\n</p>\n<p>\n2\n</p>\n<p>\n样例输出2：\n</p>\n<p>\n5\n</p>\n<p>\n-1\n</p>\n<p>\n<br/>\n</p>\n\n"}]}