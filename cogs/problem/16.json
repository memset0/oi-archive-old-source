{"title":"[NOI 2007] 货币兑换","time_limit":1000,"memory_limit":128,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=lmzimNzke","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n\n<p>\n【问题描述】\n</p>\n<p>\n  小 Y最近在一家金券交易所工作。该金券交易所只发行交易两种金券：A纪念券（以下简称A券）和B纪念券（以下简称B券）。每个持有金券的顾客都有一个自己的 帐户。金券的数目可以是一个实数。每天随着市场的起伏波动，两种金券都有自己当时的价值，即每一单位金券当天可以兑换的人民币数目。我们记录第K天中A券 和B券的价值分别为AK和BK（元/单位金券）。<br/>\n为了方便顾客，金券交易所提供了一种非常方便的交易方式：比例交易法。<br/>\n比例交易法分为两个方面：<br/>\na)卖出金券：顾客提供一个[0，100]内的实数OP作为卖出比例，其意义为：将OP%的A券和OP%的B券以当时的价值兑换为人民币；<br/>\nb)买入金券：顾客支付IP元人民币，交易所将会兑换给用户总价值为IP的金券，并且，满足提供给顾客的A券和B券的比例在第K天恰好为RateK；<br/>\n例如，假定接下来3天内的Ak、Bk、RateK的变化分别为：\n</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td>\n<div>\n时间\n</div>\n</td>\n<td>\n<div>\nAk\n</div>\n</td>\n<td>\n<div>\nBk\n</div>\n</td>\n<td>\n<div>\nRatek\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n第一天\n</div>\n</td>\n<td>\n<div>\n1\n</div>\n</td>\n<td>\n<div>\n1\n</div>\n</td>\n<td>\n<div>\n1\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n第二天\n</div>\n</td>\n<td>\n<div>\n1\n</div>\n</td>\n<td>\n<div>\n2\n</div>\n</td>\n<td>\n<div>\n2\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n第三天\n</div>\n</td>\n<td>\n<div>\n2\n</div>\n</td>\n<td>\n<div>\n2\n</div>\n</td>\n<td>\n<div>\n3\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\n假定在第一天时，用户手中有100元人民币但是没有任何金券。<br/>\n用户可以执行以下的操作：\n</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td>\n<div>\n时间\n</div>\n</td>\n<td>\n<div>\n用户操作\n</div>\n</td>\n<td>\n<div>\n人民币(元)\n</div>\n</td>\n<td>\n<div>\nA券的数量\n</div>\n</td>\n<td>\n<div>\nB券的数量\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n开户\n</div>\n</td>\n<td>\n<div>\n无\n</div>\n</td>\n<td>\n<div>\n100\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n第一天\n</div>\n</td>\n<td>\n<div>\n买入100元\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n<td>\n<div>\n50\n</div>\n</td>\n<td>\n<div>\n50\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n第二天\n</div>\n</td>\n<td>\n<div>\n卖出50%\n</div>\n</td>\n<td>\n<div>\n75\n</div>\n</td>\n<td>\n<div>\n25\n</div>\n</td>\n<td>\n<div>\n25\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n第二天\n</div>\n</td>\n<td>\n<div>\n买入60元\n</div>\n</td>\n<td>\n<div>\n15\n</div>\n</td>\n<td>\n<div>\n55\n</div>\n</td>\n<td>\n<div>\n40\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n第三天\n</div>\n</td>\n<td>\n<div>\n卖出100%\n</div>\n</td>\n<td>\n<div>\n205\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\n注意到，同一天内可以进行多次操作。<br/>\n小Y是一个很有经济头脑的员工，通过较长时间的运作和行情测算，他已经知道了未来N天内的A券和B券的价值以及Rate。他还希望能够计算出来，如果开始时拥有S元钱，那么N天后最多能够获得多少元钱。\n</p>\n<p>\n【输入格式】\n</p>\n<p>\n第一行两个正整数N、S，分别表示小Y能预知的天数以及初始时拥有的钱数。接下来N行，第K行三个实数AK、BK、RateK，意义如题目中所述。\n</p>\n<p>\n【输出格式】\n</p>\n<p>\n只有一个实数MaxProfit，表示第N天的操作结束时能够获得的最大的金钱数目。答案保留3位小数。\n</p>\n<p>\n【输入样例】\n</p>\n<p>\n3 100<br/>\n1 1 1<br/>\n1 2 2<br/>\n2 2 3\n</p>\n<p>\n【输出样例】\n</p>\n<p>\n225.000\n</p>\n<p>\n【样例说明】\n</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td>\n<div>\n时间\n</div>\n</td>\n<td>\n<div>\n用户操作\n</div>\n</td>\n<td>\n<div>\n人民币(元)\n</div>\n</td>\n<td>\n<div>\nA券的数量\n</div>\n</td>\n<td>\n<div>\nB券的数量\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n开户\n</div>\n</td>\n<td>\n<div>\n无\n</div>\n</td>\n<td>\n<div>\n100\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n第一天\n</div>\n</td>\n<td>\n<div>\n买入100元\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n<td>\n<div>\n50\n</div>\n</td>\n<td>\n<div>\n50\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n第二天\n</div>\n</td>\n<td>\n<div>\n卖出100%\n</div>\n</td>\n<td>\n<div>\n150\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n第二天\n</div>\n</td>\n<td>\n<div>\n买入150元\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n<td>\n<div>\n75\n</div>\n</td>\n<td>\n<div>\n37.5\n</div>\n</td>\n</tr>\n<tr>\n<td>\n<div>\n第三天\n</div>\n</td>\n<td>\n<div>\n卖出100%\n</div>\n</td>\n<td>\n<div>\n225\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n<td>\n<div>\n0\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\n<br/>\n</p>\n<p>\n【数据规模和约定】\n</p>\n<p>\n测试数据设计使得精度误差不会超过10^-7。<br/>\n对于40%的测试数据，满足N ≤10；<br/>\n对于60%的测试数据，满足N ≤1 000；<br/>\n对于100%的测试数据，满足N ≤100 000；\n</p>\n<p>\n对于100%的测试数据，满足：<br/>\n0 <ak ≤10；<br=\"\"> 0 <bk ≤10；<br=\"\"> 0 <ratek ≤100<br=\"\"> MaxProfit ≤10<br/>\n<br/>\n提示<br/>\n输入文件可能很大，请采用快速的读入方式。<br/>\n必然存在一种最优的买卖方案满足：<br/>\n每次买进操作使用完所有的人民币；<br/>\n每次卖出操作卖出所有的金券。</ratek></bk></ak>\n</p>\n<p>\n【评分方法】<br/>\n本题没有部分分，你的程序的输出只有和标准答案相差不超过0.001时，才能<br/>\n获得该测试点的满分，否则不得分。\n</p>\n\n"}]}