{"title":"[SDOI 2010] 猪国杀","time_limit":1000,"memory_limit":64,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vQJXQVUqj","statement":[{"title":"# 题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<h3>\n概述\n</h3>\n<p>\n《猪国杀》是一种多猪牌类回合制游戏，一共有三种角色：主猪，忠猪，反猪。\n</p>\n<p>\n每局游戏主猪有且只有一只，忠猪和反猪可以有多只，每只猪扮演一种角色。\n</p>\n<h3>\n<strong>游戏目的</strong> \n</h3>\n<p>\n主猪（MP）：自己存活的情况下消灭所有的反猪。\n</p>\n<p>\n忠猪（ZP）：不惜一切保护主猪，胜利条件与主猪相同。\n</p>\n<p>\n反猪（AP）：杀死主猪。(宋人夹注: 输入里代表反猪的是FP(反Pig?AntiPig?))\n</p>\n<h3>\n<strong>游戏过程</strong> \n</h3>\n<p>\n游戏开始时候，每个玩家手里都会有 4 张牌，且体力上限和初始体力都是 4 。\n</p>\n<p>\n开始游戏时，从主猪开始，按照逆时针方向（数据中就是按照编号从 1, 2, 3...n, 1... 的顺序）依次行动。\n</p>\n<p>\n每个玩家自己的回合可以分为 4 个阶段\n</p>\n<h3>\n<strong>摸牌阶段</strong> \n</h3>\n<p>\n从牌堆顶部摸两张牌，依次放到手牌的最右边。\n</p>\n<h3>\n出牌阶段\n</h3>\n<p>\n你可以使用 0 张到任意张牌，每次使用牌的时候都使用最靠左的能够使用的牌。\n</p>\n<p>\n当然，要满足如下规则\n</p>\n<p>\n如果没有猪哥连弩，每个出牌阶段只能使用一次“杀”来攻击。\n</p>\n<p>\n任何牌被使用后被弃置（武器是装备上）。\n</p>\n<p>\n被弃置的牌以后都不能再用，即与游戏无关。\n</p>\n<h3>\n各种牌介绍\n</h3>\n<p>\n每张手牌用一个字母表示，字母代表牌的种类。\n</p>\n<h4>\n<strong>基本牌</strong> \n</h4>\n<p>\n<strong>『桃(P)』</strong> \n</p>\n<p>\n在自己的回合内，如果自己的体力值不等于体力上限，那么使用一个桃可以为自己补充一点体力；否则不能使用桃。\n</p>\n<p>\n桃只能对自己使用。\n</p>\n<p>\n在自己的回合外，如果自己的血变为 0 或者更低，那么也可以使用。\n</p>\n<p>\n<strong>『杀(K)』</strong> \n</p>\n<p>\n在自己的回合内，对攻击范围内除自己以外的一名角色使用。\n</p>\n<p>\n如果没有被『闪』抵消，则造成 1 点伤害。\n</p>\n<p>\n无论有无武器，杀的攻击范围都是 1。\n</p>\n<p>\n<strong>『闪(D)』</strong> \n</p>\n<p>\n当你受到杀的攻击时，可以弃置一张闪来抵消杀的效果。\n</p>\n<h4>\n锦囊牌\n</h4>\n<p>\n<strong>『决斗(F)』</strong> \n</p>\n<p>\n出牌阶段，对除自己以外任意一名角色使用，由目标角色先开始，自己和目标角色轮流弃置一张杀，首先没有杀可弃的一方受到1点伤害，另一方视为此伤害的来源。\n</p>\n<p>\n<strong>『南猪入侵(N)』</strong> \n</p>\n<p>\n出牌阶段，对除你以外所有角色使用，按逆时针顺序从使用者下家开始依次结算，除非弃置一张杀，否则受到1点伤害。\n</p>\n<p>\n<strong>『万箭齐发(W)』</strong> \n</p>\n<p>\n和南猪入侵类似，不过要弃置的不是杀而是闪。\n</p>\n<p>\n<strong>『无懈可击(J)』</strong> \n</p>\n<p>\n在目标锦囊生效前抵消其效果。\n</p>\n<p>\n每次有一张锦囊即将生效时，从使用这张锦囊的猪开始，按照逆时针顺序，依次得到使用无懈可击的机会。\n</p>\n<p>\n效果\n</p>\n<p>\n用于决斗时，决斗无效并弃置。\n</p>\n<p>\n用于南猪入侵或万箭齐发时，当结算到某个角色时才能使用，当前角色不需弃置牌并且不会受到伤害（仅对一个角色产生效果）。\n</p>\n<p>\n用于无懈可击时，成为目标的无懈可击被无效。\n</p>\n<h4>\n装备牌\n</h4>\n<p>\n<strong>『猪哥连弩(Z)』</strong> \n</p>\n<p>\n武器，攻击范围 1，出牌阶段你可以使用任意张杀。\n</p>\n<p>\n同一时刻最多只能装一个武器。\n</p>\n<p>\n如果先前已经有了一把武器，那么之后再装武器的话，会弃置以前的武器来装现在的武器。\n</p>\n<p>\n特殊事件及概念解释\n</p>\n<h3>\n伤害来源\n</h3>\n<p>\n杀、南猪入侵、万箭齐发的伤害来源均是使用该牌的猪。\n</p>\n<p>\n决斗的伤害来源如上。\n</p>\n<h3>\n距离\n</h3>\n<p>\n两只猪的距离定义为沿着逆时针方向间隔的猪数 +1。即初始时 1 和 2 的距离为 1 ，但是 2 和 1 的距离就是 n - 1 。\n</p>\n<p>\n注意一个角色的死亡会导致一些猪距离的改变。\n</p>\n<h3>\n玩家死亡\n</h3>\n<p>\n如果该玩家的体力降到 0 或者更低，并且自己手中没有足够的桃使得自己的体力值回到 1，那么就死亡了，死亡后所有的牌（装备区，手牌区）被弃置、\n</p>\n<h4>\n奖励与惩罚\n</h4>\n<p>\n反猪死亡时，最后一个伤害来源处（即使是反猪）立即摸三张牌。\n</p>\n<p>\n忠猪死亡时，如果最后一个伤害来源是主猪，那么主猪所有装备牌、手牌被弃置。\n</p>\n<p>\n注意，一旦达成胜利条件，游戏立刻结束，因此即使会摸 3 张牌或者还有牌可以用也不用执行了。\n</p>\n<p>\n现在，我们已经知道每只猪的角色、手牌，还有牌堆初始情况，并且假设每个角色会按照如下的行为准则进行游戏，你需要做的就是告诉小猪 iPig 最后的结果。\n</p>\n<h3>\n几种行为\n</h3>\n<h4>\n献殷勤\n</h4>\n<p>\n使用无懈可击挡下南猪入侵、万箭齐发、决斗。\n</p>\n<p>\n使用无懈可击抵消表敌意。\n</p>\n<h4>\n表敌意\n</h4>\n<p>\n对某个角色使用杀、决斗。\n</p>\n<p>\n使用无懈可击抵消献殷勤。\n</p>\n<h4>\n跳忠\n</h4>\n<p>\n即通过行动表示自己是忠猪。\n</p>\n<p>\n跳忠行动就是对主猪或对某只已经跳忠的猪献殷勤，或者对某只已经跳反的猪表敌意。\n</p>\n<h4>\n跳反\n</h4>\n<p>\n即通过行动表示自己是反猪。\n</p>\n<p>\n跳反行动就是对主猪或对某只已经跳忠的猪表敌意，或者对某只已经跳反的猪献殷勤。\n</p>\n<p>\n忠猪不会跳反，反猪也不会跳忠。\n</p>\n<p>\n不管是忠猪还是反猪，能够跳必然跳。\n</p>\n<h3>\n行动准则\n</h3>\n<h4>\n共性\n</h4>\n<p>\n每个角色如果手里有桃且生命值未满，那么必然吃掉。\n</p>\n<p>\n有南猪入侵、万箭齐发、必然使用。\n</p>\n<p>\n有装备必然装上。\n</p>\n<p>\n受到杀时，有闪必然弃置。\n</p>\n<p>\n响应南猪入侵或者万箭齐发时候，有杀/闪必然弃置。\n</p>\n<p>\n不会对未表明身份的猪献殷勤（包括自己）。\n</p>\n<h4>\n特性\n</h4>\n<p>\n<strong>主猪</strong> \n</p>\n<p>\n主猪会认为没有跳身份，且用南猪入侵/万箭齐发对自己造成伤害的猪是“类反猪”（没伤害到不算，注意“类反猪”并没有表明身份），如果之后跳了，那么主猪会重新认识这只猪。\n</p>\n<p>\n对于每种表敌意的方式，对逆时针方向能够执行到的第一只“类反猪”或者已跳反猪表；如果没有，那么就不表敌意。\n</p>\n<p>\n决斗时会不遗余力弃置杀。\n</p>\n<p>\n如果能对已经跳忠的猪或自己献殷勤，那么一定献。\n</p>\n<p>\n如果能够对已经跳反的猪表敌意，那么一定表。\n</p>\n<p>\n<strong>忠猪</strong> \n</p>\n<p>\n对于每种表敌意的方式，对逆时针方向能够执行到的第一只已经跳反的猪表；如果没有，那么就不表敌意。\n</p>\n<p>\n决斗时，如果对方是主猪，那么不会弃置杀，否则，会不遗余力弃置杀。\n</p>\n<p>\n如果有机会对主猪或者已经跳忠的猪献殷勤，那么一定献。\n</p>\n<p>\n<strong>反猪</strong> \n</p>\n<p>\n对于每种表敌意的方式，如果有机会则对主猪表，否则，对逆时针方向能够执行到的第一只已经跳忠的猪表；如果没有，那么就不表敌意。\n</p>\n<p>\n决斗时会不遗余力弃置杀。\n</p>\n<p>\n如果有机会对已经跳反的猪献殷勤，那么一定献。\n</p>\n<p>\n<br/>\n</p>\n<p>\n限于 iPig 只会用 P++ 语言写 A + B，他请你用 Pigcal(Pascal)、P(C) 或 P++(C++) 语言来帮他预测最后的结果。\n</p>\n<p>\n(宋人夹注: <a href=\"https://mubu.com/doc/2707815814591da4\" target=\"_blank\">一个更清晰的版本</a>)\n</p>\n<h3>\n【输入格式】\n</h3>\n第一行包含两个正整数n(2 &lt;= n &lt;= 10) 和m( m &lt;= 2000)，分别代表玩家数和牌堆中牌的数量。数据保证牌的数量够用(宋人夹注: 这句是扯淡, 数据可能摸完, 这时要一直摸最后一张)。 接下来n行，每行5个字符串，依次表示对第i只猪的角色和初始4张手牌描述。编号为1的肯定是主猪。 再接下来一行，一共m个字符串，按照从牌堆顶部到牌堆底部的顺序描述每张牌。 所有的相邻的两个字符串都严格用1个空格隔开，行尾没有多余空格。<br/>\n<h3>\n【输出格式】\n</h3>\n输出数据第一行包含一个字符串代表游戏结果。如果是主猪胜利，那么输出“MP”，否则输出“FP”。数据保证游戏总会结束。 接下来n行，第i行是对第i只猪的手牌描述（注意只需要输出手牌），按照手牌从左往右的顺序输出，相邻两张牌用一个空格隔开，行末尾没有多余空格。如果这只猪已阵亡，那么只要输出“DEAD”即可。注意如果要输出手牌而没有手牌的话，那么只需输出一个空行。<br/>\n<h3>\n【样例输入】\n</h3>\n<pre>3 10\nMP D D F F\nZP N N N D\nFP J J J J\nF F D D J J F F K D    </pre>\n<h3>\n【样例输出】\n</h3>\n<pre>FP\nDEAD\nDEAD\nJ J J J J J D  </pre>\n<h3>\n【提示】\n</h3>\n<h3>\n【来源】\n</h3>\n<h3>\n【题目来源】\n</h3>\n<a href=\"http://www.lydsy.com/JudgeOnline/problem.php?id=1972\">耒阳大世界（衡阳八中） OJ 1972</a> Uploaded by rvalue\n<p>\n<br/>\n</p>\n\n"}]}