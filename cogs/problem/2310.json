{"title":"[CTSC2016]科学考察队","time_limit":1000,"memory_limit":256,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=vXNzzVjka","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<h3>\n【题目描述】\n</h3>\n<p>\n   今天正是五四青年节。在这样的大好日子里，青年探险家牛牛带着他的科学考察队前去考察一片原始森林。\n</p>\n<p>\n   在考察开始前，牛牛获得了这片原始森林的地图。这片森林里有 n 个集结点，编号为 1 到 n 的整数。在这些集结点之间，存在 m 条路径，编号为 1 到 m 的整数。每条路径以一个集结点为起点，一个集结点为终点。\n</p>\n<p>\n   为了提高科学考察的效率，牛牛将他带领的考察队分为了 p 个小队，每个小队都能够独立地完成一些工作。他们约定从编号为 S 的集结点出发，最终在\n</p>\n<p>\n编号为 T 的集结点汇合。在考察的过程中，会遇到重重困难，比如科考队员可以从悬崖的顶端缓缓下降到悬崖底部，却不能从悬崖底部直接攀爬到悬崖顶上，因此输入的路径都是单向的。\n</p>\n<p>\n   当一个小队沿着一条路径前进后，这个小队将会记录路径上的各种信息与数据。然而有的路径需要考察队自行开辟，开辟一条路径需要耗费一定的材料，将\n</p>\n<p>\n产生一些费用。由于装备数量有限，牛牛给各小队分配的装备也可能会不同，因此，有些条件困难的路径上，有些小队会因为装备不足而无法通过。但是，牛牛\n</p>\n<p>\n通过合理地分配装备，确保了每一支小队都能顺利到达编号为 T 的集结点。\n</p>\n<p>\n   在他们都到达 T 点汇合后，牛牛将会汇总所有的信息与数据，这些信息与数据的总价值即为这次科学考察行动的总收益。其中，如果有多支小队通过了同\n</p>\n<p>\n一条路径，由于他们记录到的关于这条路径的数据是重复的，因此价值只会计算一次。而开辟路径所花费的费用即为这次科学考察的总支出，同样，即使有多支考察队经过同一条需要开辟的路径，这条路径也只需要开辟一次。\n</p>\n<p>\n   现在，牛牛希望为他的 p 个小队设计出合理的行动路径，使得总收益减去总支出的值最大。\n</p>\n<h3>\n【输入格式】\n</h3>\n<p>\n对于每组输入数据：\n</p>\n<p>\n   第一行 5 个正整数，依次为 n,m,p,S,T, 意义如题所述。\n</p>\n<p>\n   接下来 2m 行，每两行描述一条路径。\n</p>\n<p>\n   每条路径的第一行三个整数 u,v,w，表示这条路径起点为 u，终点为 v。若 w &gt; 0，则表示这条路径上的数据价值为 w，且不需要开辟。若 w ≤ 0，则表示这条路径上数据价值为 0，且开辟的花费为 -w。\n</p>\n<p>\n   每条路径的第二行第一个整数 k，表示不能通过这条路径的小队数量。接下来 k 个互不相同的整数，表示这足个小队的编号。\n</p>\n<h3>\n【输出格式】\n</h3>\n<p>\n   对于每组输入数据，你需要依次输出 p 行。第 i 行表示第 i 个小队的行动顺序。\n</p>\n<p>\n   每行第一个数足，表示这个小队总共走过了多少条路径。接下来 k 个数，表示这个小队从 S 前往 T．的过程中依次走过的路径编号。\n</p>\n<h3>\n【样例输入】\n</h3>\n<pre>4 4 2 1 4\n1 3 3\n1 2\n1 2 5\n0\n2 3 -2\n1 1\n3 4 1\n0\n</pre>\n<h3>\n【样例输出】\n</h3>\n<pre>2 1 4\n3 2 3 4\n</pre>\n<h3>\n【样例说明】\n</h3>\n<p>\n   地图上有 4 个集结点与 4 条路径，其中第 1 支小队能通过的路径有 1、2、4，第二支小队能通过的路径有 2、3、4。最终 1 小队依次通过 1、4 路径，2 小队依次通过 2、3、4 路径。获取的总收益为 3 + 5 + 1 = 9。总支出为2。总收入减总支出的值为 9 - 2 = 7。\n</p>\n<h3>\n【子任务及部分分】\n</h3>\n<p>\n<br/>\n</p>\n<p>\n   每个测试点单独评分。每个测试点你还可能获得部分分。\n</p>\n<p>\n   对于每个测试点，我们设置了10个评分参数a1,a2,a3,…,a10。如果选手的输出不合法，则得零分。否则，在你的方案中，若考察总收益为Wuser，你的分数将会由下表给出，若符合表中多个条件，取分数最高的：\n</p><table style=\"width:60%;\" cellpadding=\"2\" cellspacing=\"0\" border=\"1\" bordercolor=\"#000000\">\n<tbody>\n<tr>\n<td style=\"text-align:center;\">\n得分\n</td>\n<td style=\"text-align:center;\">\n条件\n</td>\n<td style=\"text-align:center;\">\n得分\n</td>\n<td style=\"text-align:center;\">\n条件\n</td>\n</tr>\n<tr>\n<td style=\"text-align:center;\">\n10\n</td>\n<td style=\"text-align:center;\">\nwser ≥ a10\n</td>\n<td style=\"text-align:center;\">\n5\n</td>\n<td style=\"text-align:center;\">\nwser ≥ a5<br/>\n</td>\n</tr>\n<tr>\n<td style=\"text-align:center;\">\n9\n</td>\n<td style=\"text-align:center;\">\nwser ≥ a9<br/>\n</td>\n<td style=\"text-align:center;\">\n4\n</td>\n<td style=\"text-align:center;\">\nwser ≥ a4<br/>\n</td>\n</tr>\n<tr>\n<td style=\"text-align:center;\">\n8\n</td>\n<td style=\"text-align:center;\">\nwser ≥ a8<br/>\n</td>\n<td style=\"text-align:center;\">\n3\n</td>\n<td style=\"text-align:center;\">\nwser ≥ a3<br/>\n</td>\n</tr>\n<tr>\n<td style=\"text-align:center;\">\n7\n</td>\n<td style=\"text-align:center;\">\nwser ≥ a7<br/>\n</td>\n<td style=\"text-align:center;\">\n2\n</td>\n<td style=\"text-align:center;\">\nwser ≥ a2<br/>\n</td>\n</tr>\n<tr>\n<td style=\"text-align:center;\">\n6\n</td>\n<td style=\"text-align:center;\">\nwser ≥ a6<br/>\n</td>\n<td style=\"text-align:center;\">\n1\n</td>\n<td style=\"text-align:center;\">\nwser ≥ a1<br/>\n</td>\n</tr>\n</tbody>\n</table>\n<p></p>\n<p>\n<br/>\n</p>\n<h3>\n【来源】\n</h3>\n<p>\nCTSC2016 D3T3\n</p>\n\n"}]}