{"title":"[NOI1998] 并行计算","time_limit":1000,"memory_limit":128,"url":"http://cogs.pro:8080/cogs/problem/problem.php?pid=pzzmNNVWk","statement":[{"title":"题目描述","format":"html","require":["katex"],"content":"\n\n<p>\n\t运算器（ALU）是计算机中的重要部件，它的功能是进行数学运算。图一是运算器的工作简图，运算器的一次运算操作过程为：运算器在控制器的控制下， 从指定的存储器（MEMORY）存储单元中读出待运算的两个源操作数A和B，经过一定时间的计算后得到运算结果C，并将它写入指定的存储器存储单元中。\n</p>\n<p>\n\t<a href=\"../../../../wiki/Image:Parallel1.jpg\"><img height=\"173\" border=\"0\" width=\"384\" alt=\"Image:Parallel1.jpg\" src=\"../../mw/images/5/56/Parallel1.jpg\"/></a> 图一\n</p>\n<p>\n\t运算器能完成的运算种类及所需时间如下表所示：\n</p>\n<table cellspacing=\"0\" border=\"1\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t运算种类\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t运算操作\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t所需运算时间\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t1\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\tC=A+B\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\tTadd\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t2\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\tC=A-B\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\tTsub\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t3\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\tC=A*B\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\tTmul\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t4\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\tC=A/B\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\tTdiv\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n<p>\n\t在计算复杂的四则混合运算表达式时，运算器就变成了高速计算的“瓶颈”。为了得到更快的运算速度，计算机科学家们设计了一种有两个运算器的并行计算机，它的结构简图如图二所示。\n</p>\n<p>\n\t<a href=\"../../wiki/Image:Parallel2.jpg\"><img height=\"240\" border=\"0\" width=\"443\" alt=\"Image:Parallel2.jpg\" src=\"../../mw/images/a/a9/Parallel2.jpg\"/></a> 图二\n</p>\n<p>\n\t由于两个运算器可以同时进行运算，因此大大提高了整机运算速度。该并行计算机有以下两种控制指令：\n</p>\n<p>\n\t运算指令\n</p>\n<ul>\n\t<li>\n\t\tOP Time Alu_no Operate_no Address1 Address2 Address3\n\t</li>\n</ul>\n<p>\n\t其中OP为运算指令标识符，其后有六个参数：\n</p>\n<ul>\n\t<li>\n\t\tTime表示执行该指令的开始时间\n\t</li>\n\t<li>\n\t\tAlu_no表示承担该次运算操作的运算器编号（Alu_no∈{1，2}）\n\t</li>\n\t<li>\n\t\tOperate_no表示该次运算的运算种类（Operate_no∈{1，2，3，4}）\n\t</li>\n\t<li>\n\t\tAddress1,Address2表示待运算的两个源操作数的存储单元地址\n\t</li>\n\t<li>\n\t\tAddress3表示该次运算结束后存放运算结果的存储单元地址\n\t</li>\n</ul>\n<p>\n\t结束指令\n</p>\n<ul>\n\t<li>\n\t\tEND Time Address\n\t</li>\n</ul>\n<p>\n\t其中 END为结束指令标识符，其后有两个参数：\n</p>\n<ul>\n\t<li>\n\t\tTime表示整个控制程序的结束时间\n\t</li>\n\t<li>\n\t\tAddress表示存放最终计算结果的存储单元地址\n\t</li>\n</ul>\n<p>\n\t每个运算器同一时刻可以执行一条运算指令，结束指令表示控制程序结束。\n</p>\n<p>\n\t现在需要你编一个程序，对给定的待计算的表达式，自动生成一段控制程序，使图二所示的并行计算机能够正确计算该表达式的值，并使总运算时间尽量小。\n</p>\n<p>\n\t输入\n</p>\n<p>\n\t输入文件的第一行为四个不超过1000的正整数，依次为Tadd、Tsub、Tmul和Tdiv。 输入文件的第二行为待计算的四则混合运算表达式（长度不超过255个字符），表达式中的变量用大写英文字母表示，各变量的初始值依照变量的字母顺序依次存 放在地址为1,2,…的存储单元中。\n</p>\n<p>\n\t输入文件中同一行相邻两项之间用一个或多个空格隔开。\n</p>\n<p>\n\t输出\n</p>\n<p>\n\t输出文件为完成该表达式计算的最优控制指令段。指令根据其开始执行时间先后依次输出（对于开始执行时间相同的两条指令，输出先后次序不限），每条指令占一行。输出文件中同一行相邻两项之间用一个空格隔开。\n</p>\n<p>\n\t约定\n</p>\n<ul>\n\t<li>\n\t\t控制程序初始执行时间从0时刻开始。\n\t</li>\n\t<li>\n\t\t问题中所涉及的各种时间量的单位相同。\n\t</li>\n\t<li>\n\t\t存储器的存储单元最多有1K个。\n\t</li>\n\t<li>\n\t\t由于数据读写时间同运算时间相比较小，可忽略不计。\n\t</li>\n\t<li>\n\t\t如果两个运算器同时对同一个存储单元进行操作，则运算器1先操作，运算器2后操作\n\t</li>\n</ul>\n<p>\n\t评分\n</p>\n<ul>\n\t<li>\n\t\t程序的得分将取决于其所能找到的最优解与标准最优解相比较的优劣程度。\n\t</li>\n</ul>\n<p>\n\t样例输入\n</p>\n<pre>2 2 4 12\nC+(A+B)*C-E/F+F\n</pre>\n<p>\n\t样例输出\n</p>\n<pre>OP 0 1 1 1 2 6\nOP 0 2 4 4 5 8\nOP 2 1 1 3 5 7\nOP 4 1 3 6 3 10\nOP 8 1 1 10 7 11\nOP 12 1 2 11 8 12\nEND 14 12\n</pre>\n\n"}]}