# 题目描述


<h3>
【题目描述】
</h3>
<p>
给定一个序列，请编写一种数据结构来完成以下操作：
</p>
<p>
1. 输入 $l,r,k$；对区间 $[l,r]$ 每个数加上$k$；
</p>
<p>
2. 输入 $l,r$；输出区间 $[l,r]$ 的和，并对$1e9+7$取模；
</p>
<p>
3. 输入 $l,k$；在位置$l$后添加一个大小为$k$的节点；
</p>
<p>
4. 输入 $l,r$；删除区间 $[l,r]$；
</p>
<p>
5. 输入 $l,r$；输出区间 $[l,r]$ 最大值；
</p>
<p>
6. 输入 $l,r$；输出区间 $[l,r]$ 最小值；
</p>
<p>
7. 输入 $l,r,k$；将区间$[l,r]$的值全部改为k；
</p>
<p>
8. 输入 $l,r$；反转区间 $[l,r]$；
</p>
<p>
注意：对于删除添加操作，例如在位置$i$后添加值$k$，那么$k$的位置为$i+1$，原$i+1$位置的数的位置为$i+2$，以此类推。若删除区间 $[l,r]$ 那么原$r+1$位置的数的位置变为$l$以此类推。即每个数的位置不固定，为当前序列的相对位置。
</p>
<h3>
【输入格式】
</h3>
<p>
第一行有两个正整数 $n,m$;
</p>
<p>
第二行$n$个整数，为序列初始值.
</p>
<p>
以下$m$行每行一个操作，第一个数为操作编号，后面为它所对应的输入；
</p>
<p>
保证一切输入均为非负数，且不会有错误情况（$l,r$超边界等）；
</p>
<h3>
【输出格式】
</h3>
<p>
对于操作2、5、6，输出对应的值，每行一个（含输出操作的）操作输出；
</p>
<h3>
【样例输入】
</h3>
<pre>5 8
1 2 3 4 5
1 1 5 1
2 1 5
3 5 7
4 6 6
5 1 5
6 1 5
7 1
8 1 5
</pre>
<h3>
【样例输出】
</h3>
<pre>20
6
2
2
</pre>
<h3>
【提示】
</h3>
<p>
保证除求和(操作2)外其他结果均在long long范围内。
</p>
<p>
**提示:求max/min时取模会使答案错误。**
</p>
<p>
共20个测试点:
</p>
<p>
对于 50% 的数据，$n,m≤10000$;
</p>
<p>
对于 90% 的数据，$n,m≤100000$;
</p>
<p>
对于 100% 的数据，$n≤300000,m≤100000$.
</p>
<h3>
【来源】
</h3>
<p>
by _SMY
</p>
