# 题目描述


<h3>
【题目描述】
</h3>
<p>
给定一棵有根树，树根为1
</p>
<p>
要求支持以下三种操作：
</p>
<p>
1、M u 把u这个节点反色(即白色变成黑色，黑色变成白色）
</p>
<p>
2、R u 把跟u树上距离为奇数的点反色
</p>
<p>
3、Q u 查询u和所有黑点的LCA的编号和
</p>
<h3>
【输入格式】
</h3>
<p>
第一行n,m 表示节点数目和操作数目
</p>
<p>
以下n-1行，每行u，v描述一条边的两个端点，w描述边权
</p>
<p>
以下m行，每行一个操作如题意所示
</p>
<p>
注意：一开始树上所有节点均为白色
</p>
<p>
n，m&lt;=200000,边权&lt;=1000
</p>
<h3>
【输出格式】
</h3>
<p>
对于每个Q操作，输出答案
</p>
<h3>
【样例输入】
</h3>
<pre>5 7
2 1 486
3 2 599
4 1 463
5 4 550
M 2
R 3
M 4
R 2
R 4
Q 4
R 2</pre>
<h3>
【样例输出】
</h3>
<pre>6</pre>
