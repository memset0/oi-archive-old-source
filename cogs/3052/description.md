# 题目描述


<h3>
【题目描述】
</h3>
<p>
一棵有点权的有根树如果满足以下条件，则被轩轩称为对称二叉树：
</p>
<p>
1.二叉树； 
</p>
<p>
2.将这棵树所有节点的左右子树交换，新树和原树对应位置的结构相同且点权相等。
</p>
<p>
下图中节点内的数字为权值，节点外的id表示节点编号。
</p>
<p>
<img src="/upload/image/20181111/20181111214015_15120.png" alt=""/> 
</p>
<p>
<br/>
</p>
<p>
现在给出一棵二叉树，希望你找出它的一棵子树，该子树为对称二叉树，且节点数最多。请输出这棵子树的节点数。
</p>
<p>
注意：只有树根的树也是对称二叉树。本题中约定，以节点T为子树根的一棵“子树”指的是：节点T 和它的全部后代节点构成的二叉树。
</p>
<h3>
【输入格式】
</h3>
<p>
<br/>
</p>
<p>
第一行一个正整数n，表示给定的树的节点的数目，规定节点编号1~n，其中节点
</p>
<p>
1是树根。
</p>
<p>
第二行n个正整数，用一个空格分隔，第i个正整数$v_i$代表节点i的权值。
</p>
<p>
接下来n行，每行两个正整数$l_i,r_i$，分别表示节点i的左右孩子的编号。如果不存在左/右孩子，则以−1表示。两个数之间用一个空格隔开。
</p>
<h3>
【输出格式】
</h3>
<p>
输出文件共一行，包含一个整数，表示给定的树的最大对称二叉子树的节点数。
</p>
<h3>
【样例输入1】
</h3>
<pre>2
1 3
2 -1
-1 -1
</pre>
<h3>
【样例输出1】
</h3>
<pre>1</pre>
<h3>
【样例1说明】
</h3>
<p>
<img src="/upload/image/20181111/20181111215408_88290.jpg" alt=""/> 
</p>
<p>
最大的对称二叉子树为以节点 2 为树根的子树，节点数为 1。
</p>
<p>
<br/>
</p>
<h3>
【样例输入2】
</h3>
<pre>10 
2 2 5 5 5 5 4 4 2 3 
9 10 
-1 -1 
-1 -1 
-1 -1 
-1 -1 
-1 2 
3 4 
5 6 
-1 -1 
7 8
</pre>
<h3>
【样例输出2】
</h3>
<pre>3</pre>
<h3>
【样例2说明】
</h3>
<p>
<img src="/upload/image/20181111/20181111215421_27638.jpg" alt=""/> 
</p>
<p>
最大的对称二叉子树为以节点 7 为树根的子树，节点数为 3。
</p>
<h3>
【数据规模与约定】
</h3>
<p>
<br/>
</p>
<p>
共 25 个测试点。
</p>
<p>
$v_i \leq 1000$。
</p>
<p>
测试点 1-3，$n \leq 10$，保证 根结点的左子树所有节都没右 孩子，根结点的右 孩子，根结点的右子树的所有节点 都没有左孩子。
</p>
<p>
测试点 4-8，$n \leq 10$。
</p>
<p>
测试点 9-12，$n \leq 10^5$，保证输入是一棵 “满二叉树 ”。
</p>
<p>
测试点 13-16，$n \leq 10^5$，保证输入 是一棵 “完全二叉树 ”。
</p>
<p>
测试点 17-20，$n \leq 10^5$，保证输入的 树点权 均为 1。
</p>
<p>
测试点 21-25，$n \leq 10^6$。
</p>
<p>
本题约定：
</p>
<p>
层次：节点的层次从根开始定义起，根为第一层，根的孩子为第二层。树中任一节点的层次等于其父亲节点的层次加1。
</p>
<p>
树的深度：树中节点的最大层次称为树的深度。
</p>
<p>
满二叉树：设二叉树的深度为h，且二叉树有$2^h-1$个节点，这就是满二叉树。
</p>
<p>
<img src="/upload/image/20181111/20181111220012_33701.jpg" alt=""/>    满二叉树（深度为 3）
</p>
<p>
完全二叉树：设二叉树的深度为h，除第h层外，其它各层的结点数都达到最大个数，第h层所有的结点都连续集中在最左边，这就是完全二叉树。
</p>
<p>
<img src="/upload/image/20181111/20181111220051_36424.jpg" alt=""/><img src="/upload/image/20181111/20181111220102_84704.jpg" alt=""/> 
</p>
<p>
      完全二叉树（深度为 3）                  完全二叉树（深度为 3）
</p>
<h3>
【来源】
</h3>
<p>
NOIP2018普及组第四题。
</p>
