# 题目描述


<p class="MsoNormal" style="margin-left:18.0pt;text-align:center;" align="center">
<br/>
</p>
<p>
【问题描述】
</p>
<p>
要求你写一个程序，在一个地图中，找到最小步数将每个鬼移动到他们指定的位置。地图包含一些小方格。每格要么是墙（鬼不能进入），要么是走廊（鬼能进入）。
</p>
<p>
每一步里，你可以同时移动任意数量的鬼。每个鬼要么待在原地不动，要么移动到相邻的格子里（相邻的格子有公共边），如果移动满足下列条件，则移动是可行的。
</p>
<p>
1.没有一个以上的鬼在同一个格子里。
</p>
<p>
2.没有一对鬼在一步里交换了位置。
</p>
<p>
例如，假设鬼的位置是如右上图所示的，其中sharp(#)表示墙，空格表示走廊，a，b，c表示鬼：
</p>
<p>
<img src="/upload/image/20151027/20151027193505_66693.png" alt=""/> 
</p>
<p>
经过移动后，地图可以变成如下的样子：
</p>
<p>
<img src="/upload/image/20151027/20151027193512_68136.png" alt=""/> 
</p>
<p>
【输入格式】
</p>
<p>
输入包括最多10组数据，每组数据包含一幅地图。输入格式如下：
</p>
<p>
<img src="/upload/image/20151027/20151027193521_62814.png" alt=""/> 
</p>
<p>
第一行的w，h和n表示地图的宽度和高度，n表示鬼的数目，他们满足：
</p>
<p>
4≤w≤16, 4≤h≤16, 1≤n≤3
</p>
<p>
接下来h行，每行w个字符：
</p>
<p>
一个#表示墙。
</p>
<p>
一个小写字母表示鬼的初始位置（该位置也是走廊）。
</p>
<p>
一个大写字母表示鬼的目标位置（该位置也是走廊）。
</p>
<p>
一个空格表示空的走廊。
</p>
<p>
在每幅地图里，前n个小写字母和前n个大写字母表示鬼的初始位置及鬼的目标位置。我们需要将小写字母表示的鬼移动到对应的大写字母的位置里。
</p>
<p>
最后一组数据后一行有三个0。
</p>
<p>
【输出格式】
</p>
<p>
对每组数据输出一行一个整数，表示最小的移动步数。
</p>
<p>
【样例输入】 [蒟蒻自己调不好这个缩进，所以在其他编辑器上截了图，可以去POJ上复制样例 →.→]
</p>
<p>
<img src="/upload/image/20151027/20151027193545_75425.png" alt=""/> 
</p>
<p>
【样例输出】
</p>
<p>
7
</p>
<p>
36
</p>
<p>
【来源】
</p>
<p>
Japan 2007 Uva 1601 POJ 3523 刘汝佳 《算法竞赛入门经典》 例题 7-9 （P205）
</p>
<p>
<br/>
</p>
